<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>karl</title><link>https://karlquinsland.com/</link><description>Karl's little corner of the internet</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Thu, 18 Dec 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://karlquinsland.com/index.xml" rel="self" type="application/rss+xml"/><item><title>#TwoMinuteTeardown: Ubiquiti SFP Wizard</title><link>https://karlquinsland.com/ubiquiti-uacc-sfp-wizard/</link><pubDate>Thu, 18 Dec 2025 00:00:00 +0000</pubDate><author>karl</author><guid>https://karlquinsland.com/ubiquiti-uacc-sfp-wizard/</guid><description><![CDATA[<h1 id="two-minute-teardown-ubiquiti-sfp-wizard">Two Minute Teardown: Ubiquiti SFP Wizard</h1>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>SFP modules interface to their host over what is essentially a low speed i2c interface and a few high-speed differential pairs.</p>
<p>Devices that can interrogate and re-program the SFP modules have been around for a while but they are either niche, esoteric, expensive, or all of the above.</p>
<p>People have been <a href="https://forums.servethehome.com/index.php?threads/transceiver-password-collection.39458/" target="_blank" rel="noopener noreffer ">hacking on these things</a> for a while:</p>
<ul>
<li><a href="https://forum.reveltronics.com/viewtopic.php?t=527" target="_blank" rel="noopener noreffer ">Writing protected SFP / QSFP / XFP and searching password (brute force method) - REVELTRONICS</a></li>
<li><a href="https://github.com/hfuller/transceiver-notes" target="_blank" rel="noopener noreffer ">GitHub - hfuller/transceiver-notes: Notes about hacking, programming, and otherwise dinking with SFPs and other optical transceivers.</a></li>
<li><a href="https://github.com/SloMusti/sfpddm" target="_blank" rel="noopener noreffer ">GitHub - SloMusti/sfpddm: Arduino library for interfacing SFP modules and reading DDM information as per SFF-8472</a></li>
<li><a href="https://www.hitoha.moe/read-sfp-i2c-via-ch341a-programmer" target="_blank" rel="noopener noreffer ">Read SFP I2C via CH341a Programmer – HITOHA.もえ</a></li>
<li><a href="https://osmocom.org/projects/misc-hardware/wiki/Sfp-experimenter" target="_blank" rel="noopener noreffer ">sfp-experimenter</a></li>
</ul>
<p>The <a href="https://store.ui.com/us/en/category/accessories-modules-fiber/collections/accessories-pro-direct-attach-cables/products/uacc-sfp-wizard" target="_blank" rel="noopener noreffer ">Ubiquiti SFP Wizard</a> is a new entrant to the market.</p>
<p>This is not a review.
The packaging is plain recycled (?) cardboard with white ink; it doesn&rsquo;t photograph well so this is also not an unboxing.</p>
<h2 id="teardown">Teardown</h2>
<p>This thing is a massive pain in the ass to open.
I swear, somebody on the design team must be an investor in a glue factory.</p>
<p>The device is made up of an inner frame which holds the electronics.
Two &ldquo;structural&rdquo; caps are attached to the midframe with glue ans screws.
The outer case / panels snap to this midframe and there are two decorative &ldquo;trim&rdquo; caps that complete the exterior.</p>
<p>Virtually everything has at least <em>some</em> glue on it.</p>
<p>Anyways, start with the trim cap on the SFP module side.
You will then want to begin gently trying to pry the back half of the case away from the front half.
Once the clips along the side are undone, there&rsquo;s one more clip that holds the back panel to the midframe.</p>
<p>You&rsquo;ll need a bright light and a long-neck screwdriver to hit it, but if you look through the gap between the two sfp module bays you should be able to see the tab.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>Instead of weights to make the thing feel more premium in the hand, how about a bigger battery that&rsquo;s also user-replaceable!?</p>
<p>The LCD is heat-staked into the front panel.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>Yep, it&rsquo;s an ESP32. Not expected &hellip; but welcome!</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            Yep, ESP32 inside. I did not have that on my bingo card!
            
                
                
        </p> 
    </figcaption>
    
</figure>


<p>There&rsquo;s a few more interesting things on the underside of the board&hellip; including a few headers that are almost certainly for programming/debugging.</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            That USB-C Port is not going anywhere!
            
                
                
        </p> 
    </figcaption>
    
</figure>


<p>That&rsquo;s about it! Once you manage to get in, it&rsquo;s a pretty simple device.</p>
<h2 id="misc">misc</h2>
<p>As soon as I saw the ESP32, I had to see if the USB-C port was connected to it (or just for power).
Yep, it&rsquo;s wired up as a USB device:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>123456.747577<span class="o">]</span> usb 5-4.1.4: new full-speed USB device number <span class="m">61</span> using xhci_hcd
</span></span><span class="line"><span class="cl"><span class="o">[</span>123456.854812<span class="o">]</span> usb 5-4.1.4: New USB device found, <span class="nv">idVendor</span><span class="o">=</span>303a, <span class="nv">idProduct</span><span class="o">=</span>1001, <span class="nv">bcdDevice</span><span class="o">=</span> 1.01
</span></span><span class="line"><span class="cl"><span class="o">[</span>123456.854818<span class="o">]</span> usb 5-4.1.4: New USB device strings: <span class="nv">Mfr</span><span class="o">=</span>1, <span class="nv">Product</span><span class="o">=</span>2, <span class="nv">SerialNumber</span><span class="o">=</span><span class="m">3</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>123456.854820<span class="o">]</span> usb 5-4.1.4: Product: USB JTAG/serial debug unit
</span></span><span class="line"><span class="cl"><span class="o">[</span>123456.854822<span class="o">]</span> usb 5-4.1.4: Manufacturer: Espressif
</span></span><span class="line"><span class="cl"><span class="o">[</span>123456.854824<span class="o">]</span> usb 5-4.1.4: SerialNumber: DE:AD:BE:EF:AA:BB
</span></span><span class="line"><span class="cl"><span class="o">[</span>123456.902886<span class="o">]</span> cdc_acm 5-4.1.4:1.0: ttyACM0: USB ACM device
</span></span><span class="line"><span class="cl"><span class="o">[</span>123456.902918<span class="o">]</span> usbcore: registered new interface driver cdc_acm
</span></span><span class="line"><span class="cl"><span class="o">[</span>123456.902920<span class="o">]</span> cdc_acm: USB Abstract Control Model driver <span class="k">for</span> USB modems and ISDN adapters
</span></span></code></pre></td></tr></table>
</div>
</div><p>I wasn&rsquo;t able to use <em>just</em> <code>esptool</code> to reboot into bootloader mode and I didn&rsquo;t look for <code>boot0</code> pins so no attempt to dump the firmware was made.
If they didn&rsquo;t trigger any of the eFuse features, this thing could end up being a nice little SFP programmer for hobbyists that want to hack on SFPs beyond what the Ubiquiti stock firmware allows.</p>
<div class="details admonition warning open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-exclamation-triangle fa-fw" aria-hidden="true"></i>Warning<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>Do not update firmware above 1.1.0. Apparently the device can <a href="https://community.ui.com/releases/SFP-Wizard-1-1-1/3249a171-c563-4fe1-91de-6b670057b541" target="_blank" rel="noopener noreffer ">no-longer flash <em>arbitrary</em>_ modules after updating</a>.</p>
<p>It&rsquo;s not clear if that&rsquo;s a mistake or they caved to some pressure from the SFP module manufacturers.</p>
</div>
        </div>
    </div>
<h3 id="other-ics">Other ICs</h3>
<ul>
<li>
<p><a href="https://www.winbond.com/hq/product/code-storage-flash-memory/serial-nor-flash/?__locale=en&amp;partNo=W25Q256JV" target="_blank" rel="noopener noreffer ">Winbond 25Q256JVFQ</a>. This is almost certainly for storing all the SFP module &ldquo;profiles&rdquo; that the device supports.</p>
</li>
<li>
<p>There&rsquo;s a TI part labeled <code>PD534 2CKG4 A49D</code> which is likely a <a href="https://www.ti.com/lit/ds/symlink/pca9534.pdf" target="_blank" rel="noopener noreffer ">PCA9534A</a> which is an IO expander. I have absolutely no idea what it&rsquo;s being used for in this design&hellip; the ESP32 has plenty of GPIOs available.</p>
</li>
</ul>
]]></description></item><item><title>#TwoMinuteTeardown: Hamgeek YK-1000H NTP</title><link>https://karlquinsland.com/hamgeek-yk-1000h-gps-ntp-server/</link><pubDate>Fri, 12 Dec 2025 00:00:00 +0000</pubDate><author>karl</author><guid>https://karlquinsland.com/hamgeek-yk-1000h-gps-ntp-server/</guid><description><![CDATA[<h1 id="two-minute-teardown-hamgeek-yk-1000h-ntp">Two Minute Teardown: Hamgeek YK-1000H NTP</h1>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>Curiosity got the better of me when browsing AliExpress and I spotted <a href="https://www.aliexpress.us/item/3256808325833761.html?gatewayAdapt=glo2usa" target="_blank" rel="noopener noreffer ">this</a> GPS NTP server for under $100 USD.</p>
<p>I needed a cart-stuffer anyways so I ordered one as a backup for my <a href="/yet-another-gps-pps-opnsense/" rel="">existing</a> GPS/NTP server.</p>
<p>While waiting, I took a look around to see if there was any additional information about who makes this / if there was a custom firmware or similar.
Nope, there there is <a href="https://www.dzombak.com/blog/2024/12/yk-1000h-ntp-server/" target="_blank" rel="noopener noreffer "><em>not</em> a ton of information</a> about the <code>YK-1000H</code> online.</p>
<p>Shortly after it arrived, I plugged it in and &hellip; waited for it to get a GPS fix in an area where I know GPS works well.
After about 24 hours, still no fix!</p>
<p>That&rsquo;s when I noticed the warning that the seller had added to their product listing:</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            You&#39;ll never guess what I didn&#39;t see until after it arrived...
            
                
                
        </p> 
    </figcaption>
    
</figure>


<p>I do not really understand why there&rsquo;s a $3 surcharge for the international version; I <em>assumed</em> that all of the major GPS constellations use the same CDMA modulation in the same ~1.5GHz band so as long as you don&rsquo;t need the encrypted military signals, the radio hardware should be the same everywhere and just work everywhere.</p>
<p>Apparently not!
Oh well, the unofficial motto of AliExpress is <em>一分钱一分货</em> (&ldquo;Buyer Beware&rdquo;).</p>
<h2 id="teardown">Teardown</h2>
<p>Start from the rear, remove the screws and the nut/grommet around the SMA connector.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>You will not be able to slide the main PCB out because it&rsquo;s still connected to the front panel via a ribbon cable.</p>
<p>Then remove the front screws and then the main PCB can be slid out.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>There&rsquo;s nothing of interest on the reverse side of the main PCB or the LCD board.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>The cans on the GPS module are soldered on &hellip; but not well.
With just a little bit of prying, they came right off&hellip; to reveal a very dusty interior.</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            I do not know what that dust is...
            
                
                
        </p> 
    </figcaption>
    
</figure>


<p>I can&rsquo;t get an ID on the RF front-end chip, the <a href="https://www.digikey.com/en/products/detail/macronix/MX29LV320EBTI-70G/2744812" target="_blank" rel="noopener noreffer "><code>MX-70G</code></a> next to the <code>UBX-G5000-BT</code> is almost certainly flash memory for the GPS module.
Almost none of the pads go anywhere; the two pads near that SMA connector are likely power and the other two pads that go anywhere (top left) are likely the serial TX/RX lines for configuration/debug.
It appears that the UART is broken out to that 3-pin header near the GPS module.</p>
<h2 id="ics-and-markings">ICs and Markings</h2>
<ul>
<li><a href="https://www.ixbt.com/monitor/images/aver-pilot/ubx-g5010.pdf" target="_blank" rel="noopener noreffer "><code>UBX-G5000-BT</code></a>: u-blox multi-constellation GPS receiver that absolutely should have worked anywhere in the world. Not sure why the seller insisted on the &ldquo;international&rdquo; version.</li>
<li><a href="https://www.lcsc.com/datasheet/C717616.pdf" target="_blank" rel="noopener noreffer "><code>WCH CH9126</code></a>: A dedicated SNTP client/server chip with built in ethernet MAC/PHY. Feels like a W5500 but instead of just TCP/UDP it has SNTP support built in.</li>
<li><code>74HC245KA</code>: A standard octal bus transceiver to help with data lines / level shifting.</li>
<li><a href="https://www.lcsc.com/datasheet/C91356.pdf" target="_blank" rel="noopener noreffer "><code>STC Micro STC15W4K56S4</code></a>: an 8051 based microcontroller to handle GPS parsing and general control of the device / driving the display.</li>
</ul>
<p>The main PCB has some text and a QR code in the front/left corner:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">YK-1000P 卫星同步时钟主板
</span></span><span class="line"><span class="cl">2024.11.25 Ver4.0
</span></span></code></pre></td></tr></table>
</div>
</div><p>The QR code decodes to <code>YKDZ_250505_0255</code></p>
<p>The &ldquo;carrier&rdquo; board with the CH9126 has:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">590679W_Y40_250925
</span></span></code></pre></td></tr></table>
</div>
</div><p>The LCD/Display board has a QR code that decodes to <code>YKDZ_TFT_241220_0068</code></p>
<p>Those are almost certainly production batch/date codes.
The pattern feels similar to what JLCPCB uses for their PCBs but that&rsquo;s just a guess / not uniquely identifying.</p>
<h2 id="miscellaneous">Miscellaneous</h2>
<p>I asked the seller for the software and they sent me a copy.
I do not know why they couldn&rsquo;t just have linked to it in the product listing &hellip; but oh well.
Now you can download it w/o having to bother w/ the language barrier :).</p>
<ul>
<li><a href="


https://karlquinsland.com/hamgeek-yk-1000h-gps-ntp-server/files/manual-scan.pdf


" rel="">Scanned Manual</a> (chinese and english)</li>
<li><a href="


https://karlquinsland.com/hamgeek-yk-1000h-gps-ntp-server/files/YK-1000H%E5%8D%AB%E6%98%9F%E5%90%8C%E6%AD%A5%E6%97%B6%E9%92%9F%E4%BA%A7%E5%93%81%E8%AF%B4%E6%98%8E%E4%B9%A6.pdf


" rel="">OEM Manual (<code>YK-1000H卫星同步时钟产品说明书.pdf</code>)</a> (chinese, only)</li>
<li><a href="


https://karlquinsland.com/hamgeek-yk-1000h-gps-ntp-server/files/90467%2090479%20YK-1000H%20%E8%8B%B1%E6%96%87%E8%BD%AF%E4%BB%B6.exe


" rel="">OEM Software (<code>90467 90479 YK-1000H 英文软件.exe</code>)</a></li>
</ul>
<h3 id="software">Software</h3>
<p>Partly because I didn&rsquo;t get the &ldquo;international&rdquo; version and partly because I don&rsquo;t have a proper Windows based RE environment set up, I wasn&rsquo;t able to dig into the software much.</p>
<p>Googling the very unique <code>CH9126_MODULE_V1.03</code> string turns up &hellip; <em>one</em> <a href="https://www.cnblogs.com/Lqqq123/p/18058274" target="_blank" rel="noopener noreffer ">reference</a> post with some C code that probably matches what the OEM software is doing to configure the module.</p>
<p>I have archived the reference post <a href="https://web.archive.org/save/https://www.cnblogs.com/Lqqq123/p/18058274" target="_blank" rel="noopener noreffer ">here</a> and <a href="


https://karlquinsland.com/hamgeek-yk-1000h-gps-ntp-server/files/random-reference-code.pdf


" rel="">here</a>.
That reference post has a link to a <a href="


https://karlquinsland.com/hamgeek-yk-1000h-gps-ntp-server/files/CH9126ConfigTool.zip


" rel=""><code>CH9126ConfigTool.zip</code></a> which appears to be a reference implementation/SDK with a compiled <code>.exe</code> as well.
The <code>.exe</code> isn&rsquo;t the same one as what the seller sent me &hellip; but the icon is identical so they&rsquo;re probably from the same source.</p>
<p>The <code>strings</code> output did raise an eyebrow:</p>
<ul>
<li>The common UART baud rate strings is interesting, probably for configuring the comms to the main microcontroller.</li>
<li>No obvious certificates or cryptographic strings; firmware might not be signed?</li>
<li>There is some mechanism for saving configuration. Presumably that&rsquo;s a cheap way to load arbitrary bytes into the device&hellip; :)</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span><span class="lnt">93
</span><span class="lnt">94
</span><span class="lnt">95
</span><span class="lnt">96
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">❯ strings 90467<span class="se">\ </span>90479<span class="se">\ </span>YK-1000H<span class="se">\ </span>英文软件.exe
</span></span><span class="line"><span class="cl">SNTP CHANNEL
</span></span><span class="line"><span class="cl">SNTP
</span></span><span class="line"><span class="cl">Space
</span></span><span class="line"><span class="cl">Mark
</span></span><span class="line"><span class="cl">Even
</span></span><span class="line"><span class="cl">None
</span></span><span class="line"><span class="cl">Operation Status:
</span></span><span class="line"><span class="cl"><span class="o">(</span>&lt;<span class="o">=</span>1024<span class="o">)</span>
</span></span><span class="line"><span class="cl">Data Format:
</span></span><span class="line"><span class="cl">Rx Pack TimeOut:
</span></span><span class="line"><span class="cl">Rx Pack Len:
</span></span><span class="line"><span class="cl">Parity:
</span></span><span class="line"><span class="cl">Stop Bit:
</span></span><span class="line"><span class="cl">Data Bit:
</span></span><span class="line"><span class="cl">Baud:
</span></span><span class="line"><span class="cl">PORT CONFIG
</span></span><span class="line"><span class="cl">GateWay:
</span></span><span class="line"><span class="cl">Mask:
</span></span><span class="line"><span class="cl">Name:
</span></span><span class="line"><span class="cl">NET CONFIG
</span></span><span class="line"><span class="cl">SAVE CONFIG
</span></span><span class="line"><span class="cl">LOAD CONFIG
</span></span><span class="line"><span class="cl">CONFIG
</span></span><span class="line"><span class="cl">RESET
</span></span><span class="line"><span class="cl">SEARCH
</span></span><span class="line"><span class="cl">Module List<span class="o">(</span>Double Click to get configuration<span class="o">)</span>
</span></span><span class="line"><span class="cl">REFRESH
</span></span><span class="line"><span class="cl">Adapter:
</span></span><span class="line"><span class="cl">Name
</span></span><span class="line"><span class="cl">Operation Status:
</span></span><span class="line"><span class="cl">%d.%s
</span></span><span class="line"><span class="cl"><span class="nb">bind</span> error : %d
</span></span><span class="line"><span class="cl">ip:%s  mac: %02X:%02X:%02X:%02X:%02X:%02X
</span></span><span class="line"><span class="cl">socket error : %d
</span></span><span class="line"><span class="cl">Config Successful!
</span></span><span class="line"><span class="cl">Reset Successful!
</span></span><span class="line"><span class="cl">Successfully Get Configuration On Line %d
</span></span><span class="line"><span class="cl">Search Device Successful!
</span></span><span class="line"><span class="cl">CH9126_MODULE_V1.03
</span></span><span class="line"><span class="cl">recvfrom error : %d
</span></span><span class="line"><span class="cl">Receive Failed...
</span></span><span class="line"><span class="cl">sendto error : %d
</span></span><span class="line"><span class="cl">&lt;...&gt;
</span></span><span class="line"><span class="cl">Searching Devices...
</span></span><span class="line"><span class="cl">Create Socket Failed, Please Retry...
</span></span><span class="line"><span class="cl">Please Choose One Module From Module List,If There Is None,Please Search First
</span></span><span class="line"><span class="cl">No Valid Rows Selected...
</span></span><span class="line"><span class="cl">Getting Device Configuration...
</span></span><span class="line"><span class="cl">The Length Of The Module Name Is Illegal,Please Retry...
</span></span><span class="line"><span class="cl">Rx Pack Len is between <span class="m">0</span> and 1024!Please Re-enter...
</span></span><span class="line"><span class="cl"><span class="m">1024</span>
</span></span><span class="line"><span class="cl">Configuring...
</span></span><span class="line"><span class="cl">Save Configuration Successful!
</span></span><span class="line"><span class="cl">%s.cfg
</span></span><span class="line"><span class="cl">saved
</span></span><span class="line"><span class="cl">CFG Files <span class="o">(</span>*.cfg<span class="o">)</span><span class="p">|</span>*.cfg<span class="o">||</span>
</span></span><span class="line"><span class="cl">Load Successful!
</span></span><span class="line"><span class="cl">saved.cfg
</span></span><span class="line"><span class="cl">CFG Files <span class="o">(</span>*.cfg<span class="o">)</span><span class="p">|</span>*.cfg<span class="p">|</span>
</span></span><span class="line"><span class="cl">open
</span></span><span class="line"><span class="cl">.<span class="se">\H</span>elp.txt
</span></span><span class="line"><span class="cl">Pulse Output:
</span></span><span class="line"><span class="cl">Polling Interval:
</span></span><span class="line"><span class="cl">Dest IP:
</span></span><span class="line"><span class="cl">Mode:
</span></span><span class="line"><span class="cl">Random
</span></span><span class="line"><span class="cl">Local Port:
</span></span><span class="line"><span class="cl">Dest Prot:
</span></span><span class="line"><span class="cl">&lt;...&gt;
</span></span><span class="line"><span class="cl"><span class="m">1200</span>
</span></span><span class="line"><span class="cl"><span class="m">2400</span>
</span></span><span class="line"><span class="cl"><span class="m">4800</span>
</span></span><span class="line"><span class="cl"><span class="m">9600</span>
</span></span><span class="line"><span class="cl"><span class="m">14400</span>
</span></span><span class="line"><span class="cl"><span class="m">19200</span>
</span></span><span class="line"><span class="cl"><span class="m">38400</span>
</span></span><span class="line"><span class="cl"><span class="m">57600</span>
</span></span><span class="line"><span class="cl"><span class="m">115200</span>
</span></span><span class="line"><span class="cl"><span class="m">230400</span>
</span></span><span class="line"><span class="cl"><span class="m">460800</span>
</span></span><span class="line"><span class="cl"><span class="m">921600</span>
</span></span><span class="line"><span class="cl">Mark
</span></span><span class="line"><span class="cl">Space
</span></span><span class="line"><span class="cl">ASCII
</span></span><span class="line"><span class="cl">TCP_Sever
</span></span><span class="line"><span class="cl">TCP_Client
</span></span><span class="line"><span class="cl">UDP_Server
</span></span><span class="line"><span class="cl">UDP_Client
</span></span><span class="line"><span class="cl">KeepSocket
</span></span><span class="line"><span class="cl">DiscardSocket
</span></span><span class="line"><span class="cl">StoreAllData
</span></span><span class="line"><span class="cl">StoreLastData
</span></span><span class="line"><span class="cl">StoreNoData
</span></span><span class="line"><span class="cl">SNTP_Server
</span></span><span class="line"><span class="cl">SNTP_Client
</span></span></code></pre></td></tr></table>
</div>
</div>]]></description></item><item><title>#TwoMinuteTeardown: Duogalia AM70 Optical Fiber Multi-Meter</title><link>https://karlquinsland.com/duogalia-am70-optical-fiber-multi-meter/</link><pubDate>Wed, 10 Dec 2025 00:00:00 +0000</pubDate><author>karl</author><guid>https://karlquinsland.com/duogalia-am70-optical-fiber-multi-meter/</guid><description><![CDATA[<h1 id="two-minute-teardown-duogalia-a-m70-optical-fiber-multi-meter">Two Minute Teardown: Duogalia A-M70 Optical Fiber Multi-Meter</h1>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>While diagnosing a flakey fiber link, i ran into a situation where a basic &ldquo;flashing red&rdquo; visual fault finder was not sufficient.
I needed to actually measure the optical power levels on both ends of the link to ensure that the fiber was not damaged and that the SFPs were operating within spec.</p>
<p><a href="https://www.amazon.com/dp/B0B6TY7X6K" target="_blank" rel="noopener noreffer ">This</a> was the cheapest tool that could be delivered quickly.
The issue was found and fixed so now let&rsquo;s have a look inside.</p>
<div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw" aria-hidden="true"></i>Many Generics<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>There are many many similar looking units on Ali Express and the other usual import sites.
I do not know who the ODM is but it&rsquo;s clear that the <code>Duogalia A-M70</code> is just another rebrand of the same design.</p>
<p>As best as I can tell, the ODM for this is <code>T-Better</code>?</p>
</div>
        </div>
    </div>
<h2 id="teardown">Teardown</h2>
<p>The nice thing about simple devices like this is that they are easy to open and rather predictable inside.
From the back, there are four self-tapping screws holding the back panel on.
Removing those reveals a very simple interior.</p>
<p>The few unpopulated components near where the battery attaches are almost certainly for a &ldquo;better&rdquo; model that has a built in battery that can be recharged over the non populated USB-C port.</p>
<p>The square IC in the middle is running the show, the large IC off to the side is likely the display driver and the two SOP-16 chips near the ethernet port and optical sensors are for abstracting the details away for the benefit of the microcontroller.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>There are 4 more screws holding the PCB to the front half of the case; if you remove them, you can get a look at the side of the PCB with the screen on it&hellip; revealing that there&rsquo;s absolutely nothing special on the other side of the PCB.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>And here&rsquo;s a close up of the silk screen on the main controller that makes me think <code>T-Better</code> is the ODM.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<h2 id="miscellaneous">Miscellaneous</h2>
<p>The PCB is marked with:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">T-Better
</span></span><span class="line"><span class="cl">MINI-OPM-N32-MAIN
</span></span><span class="line"><span class="cl">V11 20250617
</span></span></code></pre></td></tr></table>
</div>
</div><p>The main ICs are:</p>
<ul>
<li>
<p><a href="https://uploadcdn.oneyac.com/attachments/files/brand_pdf/hgsemi/2B/E2/CD4017CMTR.pdf" target="_blank" rel="noopener noreffer "><code>HGSemi / CD4017C</code></a>: a 10 bit decade counter to handle the ethernet cable testing functions.</p>
</li>
<li>
<p><a href="https://www.nationstech.com/uploadfile/file/20220907/1662539811646982.pdf" target="_blank" rel="noopener noreffer "><code>NSING / NATION N32G031</code></a>:  Cortex®-M0 microcontroller running the show.</p>
</li>
<li>
<p><a href="https://www.lcsc.com/datasheet/C507163.pdf" target="_blank" rel="noopener noreffer "><code>HGSemi / CD4051B</code></a>: an 8-channel analog multiplexer to handle the optical power sensor inputs. I guess the main microcontroller doesn&rsquo;t have enough ADC channels on its own.</p>
</li>
<li>
<p><a href="https://www.lcsc.com/datasheet/C5174490.pdf" target="_blank" rel="noopener noreffer "><code>TM(Shenzhen Titan Micro Elec) TM1621B / TM1621B</code></a>: the LCD driver IC for the display.</p>
</li>
</ul>
<p>I was not able to locate the OEM or get a digital copy of the manual that came with this thing so I scanned it myself. You can fetch it <a href="


https://karlquinsland.com/duogalia-am70-optical-fiber-multi-meter/files/manual-scan.pdf


" rel="">here</a>.</p>
]]></description></item><item><title>TESmart HKS801-P23-USBK KVM Teardown</title><link>https://karlquinsland.com/tesmart-hks801-p23-usbk-kvm-teardown/</link><pubDate>Sat, 17 May 2025 00:00:00 +0000</pubDate><author>karl</author><guid>https://karlquinsland.com/tesmart-hks801-p23-usbk-kvm-teardown/</guid><description><![CDATA[<h1 id="tesmart-hks801-p23-usbk-kvm-teardown">TESmart HKS801-P23-USBK KVM Teardown</h1>
<p>Recently, one of the USB ports on <a href="/hdmi-kvm-teardown-and-esphome/" rel="">my previous KVM switch</a> failed. Since it&rsquo;s a critical piece of equipment, I needed a replacement the same day. The original AliExpress product page was no longer available; the seller seems to have closed up shop entirely.</p>
<p>Fortunately, the OEM—<code>XUFUNG</code>—has released an updated version, now sold in the US as the <a href="https://www.tesmart.com/products/hks801-p23" target="_blank" rel="noopener noreffer ">TESmart HKS801-P23-USBK</a>. It looks visually identical to the previous KVM switch, but the USB ports now feature the characteristic blue color indicating USB 3.0 support.</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            OEM &#39;what&#39;s in the box&#39; image.
            
                
                
        </p> 
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        <p>
            OEM feature overview image.
            
                
                
        </p> 
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        <p>
            OEM &#34;what&#39;s new&#34; image; the big upgrade here is 5 Gbps USB support.
            
                
                
        </p> 
    </figcaption>
    
</figure>


<div class="details admonition note open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw" aria-hidden="true"></i>Note<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">Despite every PCB featuring a clear <code>XUFUNG</code> label, that specific string doesn&rsquo;t appear in many places online! A quick Google search only returns my prior post and <a href="https://dancharblog.wordpress.com/2025/05/02/tesmart-hdc202-x24-thunderbolt-4-kvm-teardown-and-review/" target="_blank" rel="noopener noreffer ">this teardown of another TESmart KVM</a>. You should check out the internals of that one too! Because it uses Thunderbolt, the internals are quite a bit more complicated.</div>
        </div>
    </div>
<h2 id="whats-inside">What&rsquo;s inside?</h2>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw" aria-hidden="true"></i>TL;DR<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">It&rsquo;s the same architecture as before, but with some minor component changes and corresponding PCB layout updates.</div>
        </div>
    </div>
<p>As before, two main PCBs are stacked: the top houses the main microcontroller and HDMI ports, while the bottom contains the USB ports and power supply.</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            Photo taken just after top cover removed.
            
                
                
        </p> 
    </figcaption>
    
</figure>


<p><figure >

    
        
        

    

    <figcaption>
        
        <p>
            Close up of the &#34;output&#34; portion of the HDMI PCB.
            
                
                
        </p> 
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        <p>
            Closeup of the network interface PCB.
            
                
                
        </p> 
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        <p>
            Angled shot of the dupont connector between the top (HDMI) and bottom (USB) PCBs.
            
                
                
        </p> 
    </figcaption>
    
</figure>

</p>
<p>It&rsquo;s interesting to see that the power rails differ: 5V for the 4K version, and apparently there&rsquo;s an 8K version that uses 12V. It&rsquo;s also nice that the RX/TX lines are explicitly labeled; it makes things a bit easier to hack on.</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            Close up of the RTS5411S USB hub controller and the mysterious F68B chips.
            
                
                
        </p> 
    </figcaption>
    
</figure>


<h2 id="chips">Chips</h2>
<p>In no particular order, here are the main ICs I identified on the PCB:</p>
<ul>
<li>
<p><a href="https://lcsc.com/product-detail/USB-Converters_Realtek-Semicon-RTS5411S-GR_C5356838.html" target="_blank" rel="noopener noreffer ">RTS5411s</a> - USB 3.1 Super-Speed HUB Controller
cx32l003f8</p>
</li>
<li>
<p>F68B / A1V8 - Not sure, can&rsquo;t find any positive ID. There&rsquo;s one for every RTS5411S port, though, and some traces do daisy chain between the individual F68B chips so i&rsquo;m guessing they&rsquo;re related to USB and possibly a buffer/signal conditioner?</p>
<ul>
<li>Interestingly enough, I don&rsquo;t see any traces from this chip to the &ldquo;slow&rdquo; USB ports that are meant to handle the keyboard/mouse. Those are monitored by the CH545L which is probably looking for the keyboard/mouse signals to trigger switching between banks.</li>
</ul>
</li>
<li>
<p><a href="https://lcsc.com/product-detail/Microcontrollers-MCU-MPU-SOC_WCH-Jiangsu-Qin-Heng-CH545L_C19183926.html?s_z=n_C19183926" target="_blank" rel="noopener noreffer ">WCH CH545L</a> - USB multi-host multi-device enhanced E8051 MCU</p>
</li>
<li>
<p><a href="https://www.zbitsemi.com/upload/file/20200903/20200903105452_99571.pdf" target="_blank" rel="noopener noreffer ">CX32L003F8</a> - ARM® Cortex®-M0+ 32-bit</p>
<ul>
<li>Used in a few different locations: front panel to scan buttons, update the display, monitor IR signals.</li>
</ul>
</li>
<li>
<p><a href="https://www.wch-ic.com/products/CH578_7.html" target="_blank" rel="noopener noreffer ">WCH CH578M</a> - ARM® Cortex®-M0 Core Bluetooth Low Energy MCU</p>
<ul>
<li>This is the micro on the LAN port; makes sense as it has a built in 10M Ethernet PHY</li>
<li>Assuming there&rsquo;s no restriction that prevents the ethernet PHY and BT PHY from being used at the same time, this KVM could have ditched the IR remote and used a phone app instead&hellip;</li>
<li>Previously, this was handled with a <a href="https://www.st.com/en/microcontrollers-microprocessors/stm8s003f3.html" target="_blank" rel="noopener noreffer ">ST 8S003f3p6</a> and a <a href="https://jlcpcb.com/partdetail/WCH_Jiangsu_Qin_Heng-CH395Q/C87390" target="_blank" rel="noopener noreffer ">WCH CH395Q</a> so the LAN controller has definitely had a BOM consolidation!</li>
</ul>
</li>
<li>
<p><a href="https://en.chipsea.com/product/details/?choice_id=1079" target="_blank" rel="noopener noreffer ">Chipsea CS32F031C8T6</a> - ARM® Cortex®-M0 MCU</p>
<ul>
<li>Happens to be the exact same micro as the previous KVM and seems to be featured in Dan&rsquo;s KVM, too</li>
</ul>
</li>
<li>
<p><a href="https://jlcpcb.com/partdetail/GEC-WS3232ECN/C2973151" target="_blank" rel="noopener noreffer ">WS3232ECN</a> - Generic RS232 transceiver</p>
<ul>
<li>Previously this was done with a <code>SIPEX SP3223EEX</code> which is not the same footprint as the WS3232ECN.. so that&rsquo;s a minor layout change</li>
</ul>
</li>
<li>
<p><a href="https://web.archive.org/web/20240523025020/https://www.ite.com.tw/en/product/view?mid=99" target="_blank" rel="noopener noreffer ">IT66341TE</a> - 4 IN to 1 OUT HDMI2.0 18Gb/s Switch.</p>
<ul>
<li>Still can&rsquo;t find any formal technical info on this chip, probably due to <a href="https://en.wikipedia.org/wiki/High-bandwidth_Digital_Content_Protection" target="_blank" rel="noopener noreffer ">HDCP</a> restrictions.</li>
<li>Same as the previous KVM, but that one also used an IT66321E, which is not present on this PCB.</li>
</ul>
</li>
</ul>
]]></description></item><item><title>#TwoMinuteTeardown: Petkit Eversweet Solo 2</title><link>https://karlquinsland.com/petkit-eversweet-solo2-teardown/</link><pubDate>Sun, 20 Apr 2025 00:00:00 +0000</pubDate><author>karl</author><guid>https://karlquinsland.com/petkit-eversweet-solo2-teardown/</guid><description><![CDATA[<h1 id="two-minute-teardown-petkit-eversweet-solo-2">Two Minute Teardown: Petkit Eversweet Solo 2</h1>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>I am doing research for an upcoming project and was curious about how other people have solved a similar problem.
<a href="https://www.amazon.com/dp/B0B3RWF653" target="_blank" rel="noopener noreffer ">This</a> happens to be the cheapest option that was available at the time.</p>
<p>I am primarily interested in the pump; the integrated &ldquo;low water&rdquo; sensor and the UV-C sterilization are very nice features that would check off a lot of boxes for me&hellip; Unfortunately this pump it lacks both the flow rate and the head that I need for my project.</p>
<p>Oh well.</p>
<p>The pump is sealed with a potting compound so I was not able to do a full teardown.</p>
<p><figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        <p>
            The black protrusion is the water level sensor.
            
                
                
        </p> 
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>

</p>
<p>The base isn&rsquo;t that spectacular; a cheap micro with BTLE controlling power to a basic wireless power transmission module.
The wireless power module is covered in conformal coating so the IC number was a pain to read but it is a XKT-511.
I can find <a href="https://leap.tardate.com/electronics101/power/wirelessledmodule/" target="_blank" rel="noopener noreffer "><em>very</em> little information</a> about this IC.
As far as I can tell, it is similar to Qi wireless power but without any signaling or modulation of the carrier signal.
Various qi receiver devices will briefly &ldquo;wake up&rdquo; when placed on the base but they do not stay powered on or charge.
My <a href="/wozniak-wpx-0001a-qi-tester-teardown/" rel="">qi tester</a> does power up and measures about .2W but it can&rsquo;t recognize the protocol.</p>
<p><figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>

</p>
]]></description></item><item><title>#TwoMinuteTeardown: Wozniak WPX-0001 Qi Tester</title><link>https://karlquinsland.com/wozniak-wpx-0001a-qi-tester-teardown/</link><pubDate>Sun, 20 Apr 2025 00:00:00 +0000</pubDate><author>karl</author><guid>https://karlquinsland.com/wozniak-wpx-0001a-qi-tester-teardown/</guid><description><![CDATA[<h1 id="qi-wireless-power-tester">Qi wireless power tester</h1>
<p>The <a href="https://en.wikipedia.org/wiki/Qi_%28standard%29" target="_blank" rel="noopener noreffer ">Qi standard</a> for transmitting power is ~ 15 years old and has been ubiquitous for at least a decade now.
And yet, I have only <em>recently</em> seen any testing equipment for it.</p>
<p>The <a href="https://www.aliexpress.us/item/3256808097182455.html" target="_blank" rel="noopener noreffer ">Wozniak WPX-0001A</a> is a simple tester that can measure the output level and protocol of Qi chargers.</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            &#39;standard tools create wonderful things&#39; ❤️.
            
                
                
        </p> 
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        <p>
            Please ignore the super shiny reflections...
            
                
                
        </p> 
    </figcaption>
    
</figure>


<p>In the box you get a basic NTC probe, a USB-C cable and the tester itself.
The printed paper &ldquo;manual&rdquo; is just a QR code that points to <a href="https://user.ee-lab.cn" target="_blank" rel="noopener noreffer "><code>user.ee-lab.cn</code></a>.</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            Yep, more reflections/glare. Sorry!
            
                
                
        </p> 
    </figcaption>
    
</figure>


<p>The unit is made up of two circular PCBs screwed together.
The screws are hiding behind the decal face plate.</p>
<p>Take your time here and use a heat gun to soften the adhesive&hellip; or you risk breaking the plastic cover.</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            Three of the four screws can be seen here. The remaining screw is hiding beneath the remaining decal shard.
            
                
                
        </p> 
    </figcaption>
    
</figure>


<p>The LCD is also glued in place. The ribbon cable is <em>just</em> long enough; putting it back together is a bit of a pain.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>The non-covered gold-plated traces and black silkscreen <em>pop</em>.
Unfortunately, most ICs are either too small for me to read or the marking have been laser etched off.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>The business-end of the tester is a Qi receiver coil.
It&rsquo;s two coils of magnet wire and some magnets. Nothing special here.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        <p>
            The snaking black cable is the NTC probe.
            
                
                
        </p> 
    </figcaption>
    
</figure>


]]></description></item><item><title>#TwoMinuteTeardown: Panel Mount Liquid Level Indicator</title><link>https://karlquinsland.com/generic-liquid-level-display/</link><pubDate>Sat, 15 Feb 2025 00:00:00 +0000</pubDate><author>karl</author><guid>https://karlquinsland.com/generic-liquid-level-display/</guid><description><![CDATA[<h1 id="generic-liquid-level-meter-teardown">Generic liquid level meter teardown</h1>
<p>I ordered this part years ago for a project I eventually canceled.</p>
<p>I can&rsquo;t use it for anything, and it&rsquo;s just taking up space, so I&rsquo;m going to open it up before I recycle it.</p>
<p>The Ali Express listing is a 404 so I don&rsquo;t have a link to share or really any information about it.</p>
<p>The main thing to take away is that it&rsquo;s meant to interface with a liquid level sensor.
It will display the level of liquid in a tank and - optionally - trigger a few relays based on the level.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>This is a generic case; not all screw terminals pictured here are actually wired up to anything on this model.</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            Not all the screw terminals are actually wired up to anything on this model; the case is generic.
            
                
                
        </p> 
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>The main body slides off pretty easily.
There are two PCBs inside: one for the display and one to handle the relays and sensor input.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>The display PCB is pretty simple; no active electronics and a tonne of LEDs.
The bar graph LEDs are almost certainly <a href="https://en.wikipedia.org/wiki/Charlieplexing" target="_blank" rel="noopener noreffer ">charlieplexed</a> but the 7 segment might have an integrated driver.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>The screw terminals on the rear of the case are directly soldered to the main PCB so I&rsquo;m not going to be able to take it apart any further without disordering things&hellip; defeating the spirit of the <a href="/tags/two-minute-teardown/" rel="">#TwoMinuteTeardown</a>.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>Looking at the top left, you can see the few pins for the 7-segment displays; a total of 12 pins.
Of those 12, some don&rsquo;t have traces leading to them so they&rsquo;re probably just for mechanical support. There are far too few remaining pins for even basic charlieplexing so I&rsquo;m guessing there&rsquo;s an integrated driver of some kind. Probably a <a href="https://www.analog.com/media/en/technical-documentation/data-sheets/max7219-max7221.pdf" target="_blank" rel="noopener noreffer ">max7219</a> or similar</p>
<h2 id="the-main-ics">The main ICs</h2>
<p>Really just the one main application processor and a few support ICs.</p>
<ul>
<li><a href="https://www.jotrin.com/product/parts/MA803AS2" target="_blank" rel="noopener noreffer "><code>MA803AS2</code></a> - 8051 based microcontroller that&rsquo;s running the show</li>
<li><a href="https://www.alldatasheet.com/datasheet-pdf/pdf/1679343/NEXPERIA/HEF4051B.html" target="_blank" rel="noopener noreffer "><code>HEF4051B</code></a> - 8-channel analog multiplexer, probably for the display</li>
<li><code>74hc164</code> - 8-bit shift register, probably for the display</li>
</ul>
]]></description></item><item><title>#TwoMinuteTeardown: Home Assistant Voice - Preview Edition</title><link>https://karlquinsland.com/home-assistant-voice-pe-teardown/</link><pubDate>Sat, 01 Feb 2025 00:00:00 +0000</pubDate><author>karl</author><guid>https://karlquinsland.com/home-assistant-voice-pe-teardown/</guid><description><![CDATA[<h1 id="home-assistant-voice-preview-edition-teardown">Home Assistant Voice: Preview Edition teardown</h1>
<p>This is a quick <a href="/tags/two-minute-teardown/" rel="">#TwoMinuteTeardown</a> post for the recently released <a href="https://www.home-assistant.io/voice-pe/" target="_blank" rel="noopener noreffer ">Home Assistant Voice Node - Preview edition</a>.</p>
<p>Normally, I&rsquo;d be doing a full teardown, but this is a little different; the Home Assistant team has done a <em>lot</em> of the work out in the open.
With just a quick Google, you can find official:</p>
<ul>
<li>teardown instructions <a href="https://voice-pe.home-assistant.io/guides/disassemble/" target="_blank" rel="noopener noreffer ">here</a>.</li>
<li>source code <a href="https://github.com/esphome/home-assistant-voice-pe" target="_blank" rel="noopener noreffer ">here</a>.</li>
<li>3D printable case <a href="https://www.printables.com/model/1110526-home-assistant-voice-preview-edition-enclosure" target="_blank" rel="noopener noreffer ">files</a>.</li>
<li>Instructions for adding custom devices <a href="https://voice-pe.home-assistant.io/guides/grove_port/" target="_blank" rel="noopener noreffer ">here</a>.</li>
</ul>
<p>I am grateful for such a well-documented and open project.
Truly, by hackers for hackers!</p>
<h2 id="teardown">Teardown</h2>
<p>See the official instructions if you can&rsquo;t figure it out.</p>
<p>There&rsquo;s not much to the device, really.
The top half hosts the physical buttons and the microphones.
The thin, metal-looking piece in the top right is the antenna.</p>
<p>In the bottom right, there&rsquo;s a small switch that appears to mux between the main application processor (ESP32) and the audio processor.</p>
<p>I wonder weather this is &ldquo;leftover&rdquo; from development and they haven&rsquo;t gotten around to simplifying the BOM yet or if this is intentionally populated for users to re-program the audio processor.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>All of the &ldquo;fun&rdquo; stuff is on the bottom half.</p>
<p>Immediately, you notice the PCB has multiple <em>populated</em> pin headers for hacking. Bonus, they&rsquo;re all labeled!</p>
<p>The layout and BOM is about what you&rsquo;d expect for a ~$50 single-purpose device.</p>
<p>Where possible, I&rsquo;ve <a href="#ics" rel="">identified</a> the big ICs.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<h3 id="wishful-thinking">wishful thinking</h3>
<p>In a word: Ethernet.</p>
<p>Most of the ESP32 product line does not have support for ethernet via <a href="https://en.wikipedia.org/wiki/Media-independent_interface#RMII" target="_blank" rel="noopener noreffer ">RMII</a> (unfortunately) but there is always SPI based ethernet.</p>
<p>There are a few areas where the PCB is bare/empty and with a few tweaks to the layout, it would have been possible to also expose SPI headers next to the <a href="https://wiki.seeedstudio.com/Grove-I2C_Hub/" target="_blank" rel="noopener noreffer ">grove connector</a>.</p>
<p>Assuming there&rsquo;s a spare SPI peripheral to use, SPI based ethernet would have latency and throughput as good as or better than WiFi.</p>
<p>It would have been a nice option for those of us who prefer the reliability of wired connections.</p>
<p>Oh well.</p>
<h2 id="ics">ICs</h2>
<p>This is just the big ones that were going to be easy-ish to positively identify.
I skipped a few of the super small ICs that had a few characters (at most!) of identification on them.</p>
<p>Two flash chips, one for the ESP32 and one for the &ldquo;ai&rdquo; chip which is maybe doing detection and is almost certainly doing some other DSP stuff.
TI parts for the audio codec and a few miscellaneous bits as well.</p>
<h3 id="zbit-semiconductor-zb25vq128">zbit semiconductor ZB25VQ128</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">AN2414
</span></span><span class="line"><span class="cl">25VQ128DSJG
</span></span><span class="line"><span class="cl">P3S952
</span></span></code></pre></td></tr></table>
</div>
</div><p><a href="https://linux-chenxing.org/pioneer3/sv50pd/ZB25VQ128.pdf" target="_blank" rel="noopener noreffer ">This</a> is a clone of a super common winbond nor flash chip with the same part number.</p>
<h3 id="zbit-semiconductor-zb25vq32">zbit semiconductor ZB25VQ32</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">KN2444
</span></span><span class="line"><span class="cl">25VQ32DSJG
</span></span><span class="line"><span class="cl">EQ4537
</span></span></code></pre></td></tr></table>
</div>
</div><p><a href="https://semic-boutique.com/wp-content/uploads/2016/05/ZB25VQ32.pdf" target="_blank" rel="noopener noreffer ">Same</a> as above, but smaller.</p>
<h3 id="ti-tlv320aic3204">TI TLV320AIC3204</h3>
<p><a href="https://www.ti.com/product/TLV320AIC3204" target="_blank" rel="noopener noreffer ">This</a> is the audio codec.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">AIC
</span></span><span class="line"><span class="cl">3204
</span></span><span class="line"><span class="cl">TI 48I
</span></span><span class="line"><span class="cl">A69Y G4
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ti-sn74lvc125a">TI SN74LVC125A</h3>
<p><a href="https://www.ti.com/product/SN74LVC125A" target="_blank" rel="noopener noreffer ">This</a> is a pretty common buffer IC and I don&rsquo;t know for sure what it&rsquo;s being used for.
I am 99% certain that the LEDs under the rotary encoder are neopixels and those can be driven directly from the ESP32.
The only other thing that comes to mind is a &ldquo;switch&rdquo; to physically cut power to the microphones when the user has engaged the mute switch.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">LC125A
</span></span><span class="line"><span class="cl">TI44K
</span></span><span class="line"><span class="cl">C237
</span></span><span class="line"><span class="cl">9F
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="xmos-xu316">XMOS XU316</h3>
<p>The <a href="https://www.xmos.com/download/XU316-1024-QF60A-xcore_ai-Datasheet%2826%29.pdf" target="_blank" rel="noopener noreffer ">XU316-1024-QF60A</a> is an interesting chip.
The product name and datasheet suggest that it&rsquo;s instrumental in &ldquo;ai&rdquo; workloads 🙄 but the datasheet is a bit more concrete:</p>
<blockquote>
<p>The xcore.ai series is a comprehensive range of 32-bit multicore microcontrollers that brings the low latency and timing determinism of the xCORE architecture to mainstream embedded applications.
Unlike conventional microcontrollers, xCORE multicore microcontrollers execute multiple real-time tasks simultaneously and communicate between tasks using a high speed network.
Because xCORE multicore microcontrollers are completely deterministic when executing from internal memory, you can write software to implement functions that traditionally require dedicated hardware.</p>
</blockquote>
<p>This is doing real time audio processing - presumably to cancel background noise/echo - and might also be doing wake word detection.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">XMOS
</span></span><span class="line"><span class="cl">V16A0
</span></span><span class="line"><span class="cl">GT2446P2
</span></span><span class="line"><span class="cl">TMCY48.00
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="espressif-esp32-s3">Espressif ESP32-S3</h3>
<p>This chip needs no introduction!</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">ESP32-S3
</span></span><span class="line"><span class="cl">242024
</span></span><span class="line"><span class="cl">R8MRK668000
</span></span><span class="line"><span class="cl">UC00MBE423
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="the-little-guys">The little guys</h3>
<p>All the ICs that are too small to have full/meaningful part numbers.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">FE
</span></span><span class="line"><span class="cl">NZ
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">f9
</span></span><span class="line"><span class="cl">GkA
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">CEDTI
</span></span></code></pre></td></tr></table>
</div>
</div><p>Given the proximity to both the speaker connector and the <a href="#ti-tlv320aic3204" rel="">audio codec</a>, I am guessing this is an audio amplifier, probably also from TI.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">TI 45
</span></span><span class="line"><span class="cl">AYK
</span></span></code></pre></td></tr></table>
</div>
</div>]]></description></item><item><title>Multi-Material Printing Hack for Prusa XL</title><link>https://karlquinsland.com/multi-material-printing-hack/</link><pubDate>Wed, 25 Dec 2024 00:00:00 +0000</pubDate><author>karl</author><guid>https://karlquinsland.com/multi-material-printing-hack/</guid><description><![CDATA[<!-- markdownlint-disable-file MD002 -->
<p>In the same spirit as <a href="/extending-the-mk3s-print-area/" rel="">an earlier post</a>, here is a quick hack I used to get my <strong>dual</strong>-headed Prusa XL printer to print with <strong>three</strong> materials at once.</p>
<p>While the technique worked, it may not be the best method, so proceed with caution.</p>
<h2 id="the-problem">The problem</h2>
<p>I am trying to print a part that requires two different materials at the same time: ABS and TPU.</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            The shaded blue area is meant to be TPU/FLEX material. The shaded yellow area is meant to be ABS material.
            
                
                
        </p> 
    </figcaption>
    
</figure>


<p>The first complication comes from the &ldquo;unfriendly&rdquo; shape; the part is spherical and has no ideal orientation for printing without any supports.</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            Grey is TPU, Green is ABS, and the Blue/Grey mix is the support material composed of interleaved PLA and TPU layers.
            
                
                
        </p> 
    </figcaption>
    
</figure>


<p>To make matters slightly more complicated, TPU is one of those filaments that likes to stick to pretty much everything; I have few good options for support material.
The <a href="https://www.youtube.com/watch?v=5VV2fbJ0apg" target="_blank" rel="noopener noreffer "><em>least</em> sticky material</a> is PLA.</p>
<p>So now I have a single job that requires three materials: ABS, TPU, and PLA&hellip;. but still only two print heads to work with.</p>
<p>What to do?</p>
<p>Usually when faced with the &ldquo;more materials than heads&rdquo; problem, the solution is to use the <a href="https://marlinfw.org/docs/gcode/M600.html" target="_blank" rel="noopener noreffer "><code>M600</code></a> gCode command to have the printer pause, eject the current material and wait for the user to load the new material.</p>
<p>This technique is not new; it&rsquo;s widely supported and works perfectly <strong>if</strong> the materials are similar enough that the extrusion settings can be shared between them.</p>
<p>For my part, the tool head will have to transition from <code>PLA</code> to <code>ABS</code> which means virtually every instruction in the gCode will have to change as well.</p>
<h2 id="the-loophole">The loophole</h2>
<p>Fortunately, the geometry for this part has a &ldquo;gap&rdquo; between the initial section where supports are needed and the internal section where the ABS material is needed.</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            This is the &#39;per-layer&#39; view from the slicer with a &#39;bottom-up&#39; perspective. As before, Grey is TPU, Green is ABS, and the thin blue circle represents the topmost layer of the support material.
            
                
                
        </p> 
    </figcaption>
    
</figure>


<p>Notice that the <em>last</em> support layer (blue circle) is still a few layers away from the first ABS layer (the green section).</p>
<p>Essentially, I do need three materials, <strong>but only two at a time</strong>.
What a coincidence that I have a printer with two heads!</p>
<h2 id="the-solution-hack">The <del>solution</del> hack</h2>
<div class="details admonition warning open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-exclamation-triangle fa-fw" aria-hidden="true"></i>Warning<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>This is a hack and may not work for all printers or all slicers.
Think of this more as a &ldquo;proof of concept&rdquo; than a reliable technique.
You can likely adapt this technique to other printers but you will need to understand the gCode generated by your slicer and the firmware running on your printer.</p>
<p>Ideally, this serves as a demonstration and inspires the development of a more robust solution; conceivably, the prusa slicer/firmware could be modified to support this use case directly with not much effort.</p>
</div>
        </div>
    </div>
<p>The solution is to lie to the slicer and tell it that I have three tool heads.
This way, I can use correct profiles for each material and the slicer will generate the correct gCode for each material.</p>
<p>All I have to do is post-process the gCode to pause for a manual material swap at the correct time and then replace all references to the third tool head with the second tool head after the swap.</p>
<p>Simple, right?</p>
<p>(yes, but not as simple as I thought)</p>
<p>This particular part has a little over 400K lines of gCode so I&rsquo;m not going to do this by hand!
Here&rsquo;s a quick and dirty Python script that rewrote the gCode for me:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="ch">#!/usr/bin/env -S uv run</span>
</span></span><span class="line"><span class="cl"><span class="c1"># /// script</span>
</span></span><span class="line"><span class="cl"><span class="c1"># requires-python = &#34;&gt;=3.13&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># dependencies = [</span>
</span></span><span class="line"><span class="cl"><span class="c1">#   &#34;structlog&#34;,</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ]</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ///</span>
</span></span><span class="line"><span class="cl"><span class="c1">##</span>
</span></span><span class="line"><span class="cl"><span class="c1"># See: https://github.com/prusa3d/Prusa-Firmware-Buddy/blob/master/lib/Marlin/Marlin/src/gcode/control/T.cpp</span>
</span></span><span class="line"><span class="cl"><span class="c1"># See: https://help.prusa3d.com/article/buddy-firmware-specific-g-code-commands_633112</span>
</span></span><span class="line"><span class="cl"><span class="c1"># See: https://old.reddit.com/r/prusa3d/comments/15djlgu/change_filament_settings_mid_print_not_just_colour/ju2c37f/</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">re</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">structlog</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">log</span> <span class="o">=</span> <span class="n">structlog</span><span class="o">.</span><span class="n">get_logger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">replace_t2_with_t1_after_m600</span><span class="p">(</span><span class="n">input_file</span><span class="p">,</span> <span class="n">output_file</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">    Modifies a GCode file based on the following rules:
</span></span></span><span class="line"><span class="cl"><span class="s2">    1. Before the `M600` line, comment out any lines mentioning `T2` by adding `; HACK ;`.
</span></span></span><span class="line"><span class="cl"><span class="s2">    2. After the `M600` line, replace all instances of `T2` with `T1` if surrounded by whitespace.
</span></span></span><span class="line"><span class="cl"><span class="s2">    3. Lines beginning with `;` are always ignored.
</span></span></span><span class="line"><span class="cl"><span class="s2">
</span></span></span><span class="line"><span class="cl"><span class="s2">    Args:
</span></span></span><span class="line"><span class="cl"><span class="s2">    - input_file: Path to the input GCode file.
</span></span></span><span class="line"><span class="cl"><span class="s2">    - output_file: Path to the output GCode file.
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">m600_found</span> <span class="o">=</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">    <span class="n">line_number</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">    <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&#34;Starting...&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">input_file</span><span class="p">,</span> <span class="s2">&#34;r&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="n">output_file</span><span class="p">,</span> <span class="s2">&#34;w&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outfile</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">infile</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># For debugging / status</span>
</span></span><span class="line"><span class="cl">            <span class="n">line_number</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1"># Skip lines starting with a semicolon</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&#34;;&#34;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="k">continue</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1"># For all intents and purposes, tool head 3 (T2) does not exist.</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># AT the time of the &#34;color swap&#34;, The second tool head stops being a PLA and starts being an ABS tool.</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># This means that we need to comment out all mentions of T2 before the swap and</span>
</span></span><span class="line"><span class="cl">            <span class="c1">#   after the swap, re-write everything.</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># In all cases, we should never refer to T2.</span>
</span></span><span class="line"><span class="cl">            <span class="c1">##</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="ow">not</span> <span class="n">m600_found</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># Check for M600 line</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="k">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&#34;^M600$&#34;</span><span class="p">,</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()):</span>
</span></span><span class="line"><span class="cl">                    <span class="n">m600_found</span> <span class="o">=</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">                    <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&#34;&#39;M600&#39; found!&#34;</span><span class="p">,</span> <span class="n">line_number</span><span class="o">=</span><span class="n">line_number</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="k">continue</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="c1"># Comment out lines mentioning T2 before M600</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s2">&#34;\bT2\b&#34;</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                    <span class="n">line</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&#34;; HACK ;</span><span class="si">{</span><span class="n">line</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">                    <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                        <span class="s2">&#34;Removing mention of Tool Head 3 (t2)&#34;</span><span class="p">,</span> <span class="n">line_number</span><span class="o">=</span><span class="n">line_number</span>
</span></span><span class="line"><span class="cl">                    <span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="k">continue</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1"># Replace &#39;T2&#39; with &#39;T1&#39; only if surrounded by whitespace after M600</span>
</span></span><span class="line"><span class="cl">            <span class="n">modified_line</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&#34;\bT2\b&#34;</span><span class="p">,</span> <span class="s2">&#34;T1&#34;</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">outfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">modified_line</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">input_file</span> <span class="o">=</span> <span class="s2">&#34;your_gcode_file_here.gcode&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">output_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&#34;MOD.</span><span class="si">{</span><span class="n">input_file</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">replace_t2_with_t1_after_m600</span><span class="p">(</span><span class="n">input_file</span><span class="p">,</span> <span class="n">output_file</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&#34;Done!&#34;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>I ran that script, loaded the modified gCode into the printer, and&hellip;was not able to fool the printer.</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            Prusa XL refusing to start the print because it knows I&#39;m trying to cheat.
            
                
                
        </p> 
    </figcaption>
    
</figure>


<p>The printer was - somehow - aware that the gCode wanted three heads with three distinct materials and refused to start the print until I added a third head.</p>
<p>As it turns out, that python script isn&rsquo;t quite enough to fool the printer.
I&rsquo;ll spare you from the many iterative attempts to get this working and say that the following additional optimizations/deletions were necessary:</p>
<h3 id="manual-fix-1-remove-all-routines-for-the-third-tool-head">Manual fix 1: Remove all routines for the third tool head</h3>
<p>Somewhere early on in the gCode is a section that looks like this</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span> <span class="n">purge</span> <span class="n">third</span> <span class="k">tool</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">G1</span> <span class="n">F24000</span>
</span></span><span class="line"><span class="cl"><span class="n">P0</span> <span class="n">S1</span> <span class="n">L2</span> <span class="n">D0</span><span class="p">;</span> <span class="n">park</span> <span class="n">the</span> <span class="k">tool</span>
</span></span><span class="line"><span class="cl"><span class="n">M109</span> <span class="n">T2</span> <span class="n">S255</span>
</span></span><span class="line"><span class="cl"><span class="n">T2</span> <span class="n">S1</span> <span class="n">L0</span> <span class="n">D0</span><span class="p">;</span> <span class="n">pick</span> <span class="n">the</span> <span class="k">tool</span>
</span></span><span class="line"><span class="cl"><span class="n">G92</span> <span class="n">E0</span> <span class="p">;</span> <span class="n">reset</span> <span class="n">extruder</span> <span class="n">position</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">M104</span><span class="o">.</span><span class="mi">1</span> <span class="n">T0</span> <span class="n">P13</span> <span class="n">Q13</span> <span class="n">S230</span>
</span></span><span class="line"><span class="cl"><span class="n">G0</span> <span class="n">X210</span> <span class="n">Y</span><span class="o">-</span><span class="mi">7</span> <span class="n">Z10</span> <span class="n">F24000</span> <span class="p">;</span> <span class="n">move</span> <span class="n">close</span> <span class="n">to</span> <span class="n">the</span> <span class="n">sheet</span><span class="s1">&#39;s edge</span>
</span></span><span class="line"><span class="cl"><span class="n">G0</span> <span class="n">E30</span> <span class="n">X220</span> <span class="n">Z0</span><span class="o">.</span><span class="mi">2</span> <span class="n">F170</span> <span class="p">;</span> <span class="n">purge</span> <span class="k">while</span> <span class="n">moving</span> <span class="n">towards</span> <span class="n">the</span> <span class="n">sheet</span>
</span></span><span class="line"><span class="cl"><span class="n">G0</span> <span class="n">X250</span> <span class="n">E9</span> <span class="n">F800</span> <span class="p">;</span> <span class="k">continue</span> <span class="n">purging</span> <span class="ow">and</span> <span class="n">wipe</span> <span class="n">the</span> <span class="n">nozzle</span>
</span></span><span class="line"><span class="cl"><span class="n">G0</span> <span class="n">X253</span> <span class="n">Z0</span><span class="o">.</span><span class="mi">05</span> <span class="n">F8000</span> <span class="p">;</span> <span class="n">wipe</span><span class="p">,</span> <span class="n">move</span> <span class="n">close</span> <span class="n">to</span> <span class="n">the</span> <span class="n">bed</span>
</span></span><span class="line"><span class="cl"><span class="n">G0</span> <span class="n">X256</span> <span class="n">Z0</span><span class="o">.</span><span class="mi">2</span> <span class="n">F8000</span> <span class="p">;</span> <span class="n">wipe</span><span class="p">,</span> <span class="n">move</span> <span class="n">quickly</span> <span class="n">away</span> <span class="n">from</span> <span class="n">the</span> <span class="n">bed</span>
</span></span><span class="line"><span class="cl"><span class="n">G1</span> <span class="n">E</span><span class="o">-</span><span class="mf">1.05</span> <span class="n">F2400</span> <span class="p">;</span> <span class="n">retract</span>
</span></span><span class="line"><span class="cl"> <span class="p">;</span> <span class="n">update</span> <span class="n">slicer</span> <span class="n">internal</span> <span class="n">retract</span> <span class="n">variable</span>
</span></span><span class="line"><span class="cl"><span class="n">G92</span> <span class="n">E0</span> <span class="p">;</span> <span class="n">reset</span> <span class="n">extruder</span> <span class="n">position</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">M104</span> <span class="n">S100</span> <span class="n">T2</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>This can be removed from the gCode as there is no physical 3rd head to purge or park, heat up, probe&hellip;etc.</p>
<p>If the python script naïvely replaced <em>all</em> instances of <code>T2</code> with <code>T1</code>, this section would be left in the gCode and would waste time running the second print head through the same routine twice.</p>
<h3 id="manual-fix-2-remove-all-metadata">Manual fix 2: Remove all metadata</h3>
<p>This one took quite a few trial/error attempts to figure out.
At the tail end of the unmodified gCode there are some &ldquo;shutdown&rdquo; commands and then a ton of metadata:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;... many many lines omitted ...&gt;
</span></span><span class="line"><span class="cl">; turn off extruder heaters
</span></span><span class="line"><span class="cl"> M104 T0 S0
</span></span><span class="line"><span class="cl"> M104 T1 S0
</span></span><span class="line"><span class="cl"> M104 T2 S0
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&lt;...&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">; objects_info = {&#34;objects&#34;:&lt;...&gt;}
</span></span><span class="line"><span class="cl">; filament used [mm] = 24022.62, 2012.80, 3975.01
</span></span><span class="line"><span class="cl">; filament used [cm3] = 57.78, 4.84, 9.56
</span></span><span class="line"><span class="cl">&lt;...&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">; prusaslicer_config = begin
</span></span><span class="line"><span class="cl">&lt;...&gt;
</span></span><span class="line"><span class="cl">; filament_type = FLEX;PLA;ABS
</span></span><span class="line"><span class="cl">&lt;...&gt;
</span></span><span class="line"><span class="cl">; filament_colour = #408080;#FF8000;#FFF2EC
</span></span><span class="line"><span class="cl">&lt;...&gt;
</span></span><span class="line"><span class="cl">; prusaslicer_config = end
</span></span></code></pre></td></tr></table>
</div>
</div><p>As best as I can tell, there&rsquo;s a few hundred lines that encode some basic metadata about the part(s) and the filament(s) used / print times and the slicer specific configuration information.
If you look closely, you can see that a fair number of properties have three values: one for each tool head:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;...&gt;
</span></span><span class="line"><span class="cl">; filament_type = FLEX;PLA;ABS
</span></span><span class="line"><span class="cl">&lt;...&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>I spent a few iterations trying to identify what each property did and if it was safe to drop the third value but wasn&rsquo;t making a ton of progress.
Eventually I just decided to drop <em>all</em> of the metadata&hellip; and that worked!</p>
<p>Initially I didn&rsquo;t think that the printer firmware would be reading <em>ANY</em> of the <strong>commented out</strong> sections of the file but I guess this makes sense for metadata and anything else that&rsquo;s not a gCode instruction.</p>
<p>As best as I can tell, nothing contained in the metadata sections changes how the actual print is executed.
All of the values are for the slicer UI and - in some cases - for the printer firmware to sanity check the gCode before starting the print.</p>
<p>I could be wrong about this but I don&rsquo;t have the time/patience/resources to properly test this. The gCode works well enough for my needs without the metadata so I&rsquo;m content to move on to the next steps on this project.</p>
<p>If I am wrong about what the metadata sections do and it turns out that they do help refine/improve how the printer firmware processes instructions&hellip;please do let me know!</p>
<h2 id="tldr">TL;DR</h2>
<p>If you have a need to print with more materials than you have tool heads, you <strong>might</strong> be able to trick the slicer/printer into re-configuring a print head mid-print.</p>
<p>To do this, get the slicer to generate valid and correct gCode for each material/tool head combination as if you had an appropriately configured printer.
After the gCode has been generated, map every &ldquo;virtual&rdquo; too head to a real tool head and remove any additional references to the virtual tool heads.</p>
]]></description></item><item><title>AliExpress 11.11 Sale Teardowns (2024 edition)</title><link>https://karlquinsland.com/aliexpress-11-11-sale-teardowns-2024/</link><pubDate>Sun, 01 Dec 2024 00:00:00 +0000</pubDate><author>karl</author><guid>https://karlquinsland.com/aliexpress-11-11-sale-teardowns-2024/</guid><description><![CDATA[<!-- markdownlint-disable-file MD024 -->
<h1 id="11-11-day-teardowns-2024-edition">11-11 day teardowns (2024 edition)</h1>
<p>I guess this is becoming a <a href="http://localhost:1313/categories/11.11-sale/" target="_blank" rel="noopener noreffer ">tradition</a> now?</p>
<p>During China&rsquo;s Single&rsquo;s Day sale on AliExpress, I bought various gadgets - both for projects and out of curiosity.
Rather than write separate posts, here&rsquo;s a collection of mini teardowns showing what&rsquo;s inside each item.</p>
<p>Previous years:</p>
<ul>
<li><a href="/aliexpress-11-11-sale-teardowns/" rel="">2023</a></li>
</ul>
<h2 id="tuya-zigbee-35-inch-smart-wall-switch">Tuya Zigbee 3.5 Inch Smart Wall Switch</h2>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p><a href="https://www.aliexpress.us/item/3256807444250563.html?gatewayAdapt=glo2usa" target="_blank" rel="noopener noreffer ">non-affiliate link</a></p>
<p>I&rsquo;m always looking for a better scene controller/switch/Home Assistant interface.
I was curious about which chip they used for the full graphics display and was hoping for an easily hackable Android device.
Unfortunately, no such luck with this.</p>
<p>The main application processor is <a href="https://linux-sunxi.org/F1C100s" target="_blank" rel="noopener noreffer "><code>F1C100s</code></a> which is a low-cost, low-power, ARM9-based SoC.
It might be able to run a custom Linux build that could draw a custom UI, but it&rsquo;s not going to be as easy as rooting an Android device.</p>
<p>There’s not much in the box, just the switch and a manual.
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>

</p>
<p>It&rsquo;s a pretty standard &ldquo;power supply and relays in the back, touch screen in the front&rdquo; design.
This time, though, there&rsquo;s an <em>exposed</em> programming header!?</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            Note the &#39;fire wire&#39; label for mains input... :D
            
                
                
        </p> 
    </figcaption>
    
</figure>


<p>A few screws later, the back panel comes off to reveal some power regulation/switching components and the Zigbee module.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>They achieved the &ldquo;mushy, then clicky&rdquo; feel of the buttons by using a rubber insert around the tactile switches.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>The power supply doesn&rsquo;t look too bad.
Clearance looks OK, there is a fuse, and the soldering is decent.
I don&rsquo;t know how well isolated that transformer is, but it&rsquo;s probably fine.</p>
<p><figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        <p>
            J2 looks like it might be DC input or possibly RS485 for a future model?
            
                
                
        </p> 
    </figcaption>
    
</figure>

</p>
<h2 id="ueetop-175w-gan-usb-c-charger-bk-112d">Ueetop 175W GaN USB C Charger (BK-112D)</h2>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p><a href="https://www.aliexpress.us/item/3256807203418058.html?gatewayAdapt=glo2usa" target="_blank" rel="noopener noreffer ">non-affiliate link</a></p>
<p>As the USB-C PD standard matures and GaN technology makes high-power chargers cheaper, it&rsquo;s fun to see the internals get more complex but also more integrated.
This was less than $15 shipped which is <em>insane</em> for a 100W+ charger unless they cut corners somewhere&hellip;</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            Hey, it came with a mains cord and it&#39;s even correct for my country!
            
                
                
        </p> 
    </figcaption>
    
</figure>


<p>There are a LOTS of chips holding things together; it&rsquo;s almost impossible to open this without breaking at least one!
Consider this a warning: you will be doing a destructive teardown if you open this!</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            Look at those PCB traces going to the output. Easily 5mm wide!
            
                
                
        </p> 
    </figcaption>
    
</figure>


<p>As this is a <a href="/tags/two-minute-teardown/" rel="">#TwoMinuteTeardown</a>, I&rsquo;m not going to remove all the silastic glue on the power supply module nor will I check the ripple in the output.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>Other than that, it&rsquo;s about what you&rsquo;d expect from a modern USB-C charger that isn&rsquo;t hyper-compact; beefy looking AC-to-DC converter, a few big caps and then the USB-C PD controller.</p>
<p>Between each group of ports is a series of passives, some beefy looking power MOSFETs and a protocol negotiation IC.</p>
<p><figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>

</p>
<h3 id="notable-ics">Notable ICs</h3>
<p><a href="https://ismartware.com/article-1-2.html" target="_blank" rel="noopener noreffer ">SW3516</a></p>
<p><a href="https://www.lcsc.com/product-detail/USB-Converters_Shenzhen-Fuman-Elec-XPD977D30A_C2892062.html" target="_blank" rel="noopener noreffer ">Shenzhen Fuman Elec XPD977D30A</a></p>
<p><a href="https://www.lcsc.com/product-detail/Microcontroller-Units-MCUs-MPUs-SOCs_CHIPSEA-CSU32P10-SOP8_C914988.html" target="_blank" rel="noopener noreffer ">CHIPSEA CSU32P10</a></p>
<h2 id="generic-ozone-generator-xd001">Generic Ozone generator (XD001)</h2>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p><a href="https://www.aliexpress.us/item/3256805759188983.html?gatewayAdapt=glo2usa" target="_blank" rel="noopener noreffer ">non-affiliate link</a></p>
<p>There’s not much in the box other than the generator and a manual.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>It’s easy to take apart with no hidden screws!</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>Inside, you’ll find about what you’d expect: a potted HV module, fan, controller, and a battery.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>Instead of the cheaper &ldquo;carbon needle&rdquo; ozone generators, this one uses a ceramic plate.</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            Such a pretty glow!
            
                
                
        </p> 
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        <p>
            Micro USB is INEXCUSABLE in 2024!
            
                
                
        </p> 
    </figcaption>
    
</figure>


<p>Annoyingly, they used a micro USB port for charging.
This is <em>inexcusable</em> in 2024.
The silk screen on the PCB indicates that the design is from late 2020, which would be slightly more acceptable if USB-C wasn’t already the standard by then.
Furthermore, this device doesn’t need any complicated USB-C PD features, so it’s not like they’d have to worry about the extra cost or complexity of a USB-C controller.
Really, all they needed was <em>two</em> (very important, <a href="https://hackaday.com/2019/07/16/exploring-the-raspberry-pi-4-usb-c-issue-in-depth/" target="_blank" rel="noopener noreffer "><strong>NOT</strong> ONE</a>) 5.1k resistors and a USB-C port and they could have been future proofed!</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>They scrubbed the markings off the SOIC16 CPU. The rest of the components are about what you’d expect for managing lithium batteries, switching the fan, and driving the boost converter for the ozone generator.</p>
<p>It appears another version of this device also features a buzzer.
I&rsquo;m not sure what for, but the silk screen clearly shows a spot for it.</p>
<p><figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>

</p>
<h2 id="btf-light-sp530e-led-controller">BTF Light SP530E LED Controller</h2>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p><a href="https://www.aliexpress.us/item/3256806286614116.html?gatewayAdapt=glo2usa" target="_blank" rel="noopener noreffer ">non-affiliate link</a></p>
<p>This is the first of a few LED controllers I bought to see if they are compatible with <a href="https://kno.wled.ge/" target="_blank" rel="noopener noreffer ">WLED</a> or ESPHome.
I have some <a href="#side-note-the-ossha-community-is-being-heard" rel="">thoughts</a> on the state of the LED controller market, but to summarize: it&rsquo;s <em>getting better</em>!</p>
<p>The packaging is very nondescript, containing just the controller and a manual.</p>
<p><figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>

</p>
<p>They did include a screwdriver, which&hellip; makes me wonder how many people are buying the individual components to DIY a LED lighting solution but also don&rsquo;t already have a screwdriver?</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>The PCB is pretty simple and, thankfully, is nothing more than an ESP32 and a level shifter.
It also includes a small condenser microphone for the music reactive mode.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>The MOSFETs look robust enough to handle a decent amount of current, and there&rsquo;s a decent amount of via stitching around the power traces, so it <em>should</em> be able to handle the heat.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        <p>
            They labeled the programming header. ❤️
            
                
                
        </p> 
    </figcaption>
    
</figure>


<h3 id="notable-ics-1">Notable ICs</h3>
<p><a href="https://www.lcsc.com/product-detail/Microcontrollers-MCU-MPU-SOC_Espressif-Systems-ESP32-C3FN4_C2848860.html" target="_blank" rel="noopener noreffer ">ESP32-C3</a></p>
<p><a href="https://www.lcsc.com/product-detail/74-Series_TM-Shenzhen-Titan-Micro-Elec-TM74HC245_C84121.html" target="_blank" rel="noopener noreffer ">TM(Shenzhen Titan Micro Elec) TM74HC245</a></p>
<h2 id="gledepto-gl-c-015wl-d-led-controller">Gledepto GL-C-015WL-D LED Controller</h2>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p><a href="https://www.aliexpress.us/item/3256807239400011.html?gatewayAdapt=glo2usa" target="_blank" rel="noopener noreffer ">non-affiliate link</a></p>
<p>As with the other device, this controller also has bare-bones packaging.</p>
<p>No screwdriver needed because all the terminals have their own locking lever!</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>Happy to see an ESP32 module in here&hellip; on its own PCB? Complete with a micro USB port for flashing?!?</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>Yep, the ESP32 is on a separate PCB that&rsquo;s connected to the main board via a header.
The silk screen on the PCB makes me think that this was <em>initially</em> developed for an ESP8266 but then they added the header for the ESP32 module late(?) in design.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>The silk screen is really well done; everything is labeled well.</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            Really happy to see that the GPIOs are labeled... for both the ESP32 and 8266 variant!
            
                
                
        </p> 
    </figcaption>
    
</figure>


<p>Because this is an &ldquo;addressable&rdquo; LED controller, there&rsquo;s not much to look at.
The GPIO from the ESP goes more or less directly to the output pins.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>And in case there was any doubt, the back of the PCB makes it super clear that this PCB <em>can</em> be used with an ESP8266 or ESP32.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<h2 id="smlight-a1-slwf-03-led-controller">SMLight A1-SLWF-03 LED Controller</h2>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p><a href="https://www.aliexpress.us/item/3256805957696665.html?gatewayAdapt=glo2usa" target="_blank" rel="noopener noreffer ">non-affiliate link</a></p>
<p>I saved the <em>best</em> for last!
This LED controller <em>really</em> did surprise me with how open it is!</p>
<p>They&rsquo;re not putting a generic &ldquo;ESP32 powered&rdquo; message on the label leaving the reader to read between the lines / infer that the device can be flashed with alternate firmware.</p>
<p>They&rsquo;re straight up saying so!
The label has the GPIO pins clearly labeled.
It uses USB-C for power and flashing.
The USB port is <em>modern</em> unlike <a href="#generic-ozone-generator-xd001" rel="">other</a> devices I&rsquo;ve <a href="#gledepto-gl-c-015wl-d-led-controller" rel="">shown</a> in this post.
The USB port can also be used for programming and isn&rsquo;t hidden!</p>
<p>Here&rsquo;s to hoping that they release a version for analog LED strips! 🤞</p>
<p><figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        <p>
            🇺🇦
            
                
                
        </p> 
    </figcaption>
    
</figure>

</p>
<h3 id="side-note-the-ossha-community-is-being-heard">side note: the OSS/HA community is being heard</h3>
<p>Over the past few years, I&rsquo;ve been scouring AliExpress to find the latest and greatest in LED controllers and every year I&rsquo;ve been disappointed.
But over the last year or so, I&rsquo;ve noticed a <em>huge</em> uptick in the number of controllers that are <em>actually</em> compatible with Home Assistant and other open-source home automation systems.</p>
<p>In the beginning, they were all ESP8266 based and trivial to reverse engineer and flash.
Then they started using TuYa intermediate MCUs which were a bit more tedious to reverse engineer but still possible if you were willing to put in the effort.</p>
<p>Now, they&rsquo;re using ESP32 based chips and going out of their way to LABEL which GPIOs go to which pin(s) and to generally make it TRIVIAL to flash WLED or ESPHome or whatever you want.</p>
<p>This means some savvy manufacturers are paying attention and recognizing the growing hobbyist market for these devices and are catering to them.
There&rsquo;s somebody out there that&rsquo;s not going to force their garbage app/api on you and is going to let you do whatever you want with the device you bought.
This was UNHEARD OF just a few years ago and I&rsquo;m <em>so</em> happy to see it happening now!</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            This is such a victory for the DIY/HA/OSS community!
            
                
                
        </p> 
    </figcaption>
    
</figure>


<h2 id="g3061-pd65w-mini-hot-plate">G3061 PD65W Mini Hot Plate</h2>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p><a href="https://www.aliexpress.us/item/3256806193753913.html?gatewayAdapt=glo2usa" target="_blank" rel="noopener noreffer ">non-affiliate link</a></p>
<p>And the winner of the &ldquo;feels most like a hand-built prototype&rdquo; award goes to&hellip; this thing!</p>
<p>Normally I don&rsquo;t like it when screws are hidden under labels / stickers&hellip; but in this case, the &ldquo;sticker&rdquo; is a rubber foot that doesn&rsquo;t even &ldquo;hide&rdquo; the screws.</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            Those lumps under the rubber mat are the screws holding the case together.
            
                
                
        </p> 
    </figcaption>
    
</figure>


<p>Looking from the side, the construction becomes pretty clear; it&rsquo;s probably just using a PCB for the heating element and the stacked PCBs separated with little brass standoffs is for thermal isolation.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>USB-C for power is <em>always</em> a good sign.
Other than that, a basic <a href="https://www.mcu.com.cn/en/" target="_blank" rel="noopener noreffer ">CMSemicon</a> IC runs the show.</p>
<p>The OLED screen module is for sure one of those prototype modules meant for hobbyists!</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            The use of threaded inserts for nuts just screams &#39;prototype&#39; to me. Nothing wrong with that, just makes me smile.
            
                
                
        </p> 
    </figcaption>
    
</figure>


<p>As expected, the heating element is just PCB traces on an aluminum substrate PCB.
Cheap and effective!</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>If anybody needs the instructions for this, I scanned a copy and you can get it from <a href="


https://karlquinsland.com/aliexpress-11-11-sale-teardowns-2024/files/07_hotplate/g3601-instructions.pdf


" rel="">here</a>.</p>
<h2 id="generic-usb-c-dock-w-lcd">Generic USB-C Dock w/ LCD</h2>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p><a href="https://www.aliexpress.us/item/3256806850754746.html?gatewayAdapt=glo2usa" target="_blank" rel="noopener noreffer ">non-affiliate link</a></p>
<p>USB-C &ldquo;expansion&rdquo; docs are a dime a dozen now.
This caught my attention because of the LCD display on the side.
What are the odds that it presents as a second display using <a href="https://www.displayport.org/displayport-over-usb-c/" target="_blank" rel="noopener noreffer ">display port tunneling</a> via usb-alt mode?</p>
<p>There are no screws, just clips.</p>
<p><figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>

</p>
<p>It looks like a pretty straightforward de-mux and breakout PCB.
The display is an isolated / standalone component that&rsquo;s linked to the main PCB with just 4 wires.
What are the odds that it&rsquo;s hanging off a USB hub?</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            I&#39;m not exactly sure why they made the USB-C &#34;tail&#34; detachable.
            
                
                
        </p> 
    </figcaption>
    
</figure>


<p>The silk screen markings make me think that the &ldquo;internal&rdquo; name for this product is <code>K0108-1D</code>.
Interesting that the <code>HUB</code> PCB has a date code almost a full <em>year</em> after the <code>LCD</code> PCB..
Also worth noting; the instructions that came with the device link to the same shady <code>key123.vip</code> site that the <a href="#ajazz-akp03e-stream-deck-clone" rel="">ajazz</a> used so there&rsquo;s <em>definitely</em> some sort of relationship between the two but I&rsquo;m not sure what it is.</p>
<p><figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>

</p>
<p>Annoyingly, they lasered off the markings on the display module.
I don&rsquo;t have a clip for the eeprom, but I bet that there&rsquo;d be at least a few interesting strings in there :D.</p>
<p><figure >

    
        
        

    

    <figcaption>
        
        <p>
            I wonder what SW1 is used for...
            
                
                
        </p> 
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        <p>
            Nothing much on the under side of the USB-Dock PCB.
            
                
                
        </p> 
    </figcaption>
    
</figure>

</p>
<h3 id="usb-details">USB details</h3>
<p>After seeing that the LCD is just a standalone module, I wanted to see how it presented itself to the host.
As expected, it&rsquo;s just a USB hub with a few devices hanging off it.
The display module is almost certainly the HID device.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">❯ lsusb -vvv -t &gt; pre-dock
</span></span><span class="line"><span class="cl">❯ lsusb -vvv -t &gt; pre-dock
</span></span><span class="line"><span class="cl">❯ lsusb -vvv -t &gt; post-dock
</span></span><span class="line"><span class="cl">❯ diff pre-dock post-dock
</span></span><span class="line"><span class="cl">3a4,15
</span></span><span class="line"><span class="cl">&gt;     <span class="p">|</span>__ Port 003: Dev 006, If 0, <span class="nv">Class</span><span class="o">=</span>Hub, <span class="nv">Driver</span><span class="o">=</span>hub/4p, 480M
</span></span><span class="line"><span class="cl">&gt;         ID 1a40:0801 Terminus Technology Inc.
</span></span><span class="line"><span class="cl">&gt;         /sys/bus/usb/devices/1-3  /dev/bus/usb/001/006
</span></span><span class="line"><span class="cl">&gt;         <span class="p">|</span>__ Port 003: Dev 007, If 0, <span class="nv">Class</span><span class="o">=</span>Hub, <span class="nv">Driver</span><span class="o">=</span>hub/4p, 480M
</span></span><span class="line"><span class="cl">&gt;             ID 1a40:0801 Terminus Technology Inc.
</span></span><span class="line"><span class="cl">&gt;             /sys/bus/usb/devices/1-3.3  /dev/bus/usb/001/007
</span></span><span class="line"><span class="cl">&gt;             <span class="p">|</span>__ Port 002: Dev 009, If 0, <span class="nv">Class</span><span class="o">=</span>Human Interface Device, <span class="nv">Driver</span><span class="o">=</span>usbhid, 480M
</span></span><span class="line"><span class="cl">&gt;                 ID 5548:6667
</span></span><span class="line"><span class="cl">&gt;                 /sys/bus/usb/devices/1-3.3.2  /dev/bus/usb/001/009
</span></span><span class="line"><span class="cl">&gt;         <span class="p">|</span>__ Port 004: Dev 008, If 0, <span class="nv">Class</span><span class="o">=</span>Vendor Specific Class, <span class="nv">Driver</span><span class="o">=</span>r8152, 480M
</span></span><span class="line"><span class="cl">&gt;             ID 0bda:8152 Realtek Semiconductor Corp. RTL8152 Fast Ethernet Adapter
</span></span><span class="line"><span class="cl">&gt;             /sys/bus/usb/devices/1-3.4  /dev/bus/usb/001/008
</span></span></code></pre></td></tr></table>
</div>
</div><p>And here&rsquo;s <code>dmesg</code> with the screen <em>not</em> attached versus <em>attached</em>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">usb 1-3: new high-speed USB device number <span class="m">23</span> using xhci_hcd
</span></span><span class="line"><span class="cl">usb 1-3: New USB device found, <span class="nv">idVendor</span><span class="o">=</span>1a40, <span class="nv">idProduct</span><span class="o">=</span>0801, <span class="nv">bcdDevice</span><span class="o">=</span> 1.00
</span></span><span class="line"><span class="cl">usb 1-3: New USB device strings: <span class="nv">Mfr</span><span class="o">=</span>0, <span class="nv">Product</span><span class="o">=</span>1, <span class="nv">SerialNumber</span><span class="o">=</span><span class="m">0</span>
</span></span><span class="line"><span class="cl">usb 1-3: Product: USB 2.0 Hub
</span></span><span class="line"><span class="cl">hub 1-3:1.0: USB hub found
</span></span><span class="line"><span class="cl">hub 1-3:1.0: <span class="m">4</span> ports detected
</span></span><span class="line"><span class="cl">usb 1-3: USB disconnect, device number <span class="m">23</span>
</span></span><span class="line"><span class="cl">usb 1-3-port3: attempt power cycle
</span></span><span class="line"><span class="cl">usb 1-3: new high-speed USB device number <span class="m">28</span> using xhci_hcd
</span></span><span class="line"><span class="cl">usb 1-3: New USB device found, <span class="nv">idVendor</span><span class="o">=</span>1a40, <span class="nv">idProduct</span><span class="o">=</span>0801, <span class="nv">bcdDevice</span><span class="o">=</span> 1.00
</span></span><span class="line"><span class="cl">usb 1-3: New USB device strings: <span class="nv">Mfr</span><span class="o">=</span>0, <span class="nv">Product</span><span class="o">=</span>1, <span class="nv">SerialNumber</span><span class="o">=</span><span class="m">0</span>
</span></span><span class="line"><span class="cl">usb 1-3: Product: USB 2.0 Hub
</span></span><span class="line"><span class="cl">hub 1-3:1.0: USB hub found
</span></span><span class="line"><span class="cl">hub 1-3:1.0: <span class="m">4</span> ports detected
</span></span><span class="line"><span class="cl">usb 1-3.3: new high-speed USB device number <span class="m">29</span> using xhci_hcd
</span></span><span class="line"><span class="cl">usb 1-3.3: New USB device found, <span class="nv">idVendor</span><span class="o">=</span>1a40, <span class="nv">idProduct</span><span class="o">=</span>0801, <span class="nv">bcdDevice</span><span class="o">=</span> 1.00
</span></span><span class="line"><span class="cl">usb 1-3.3: New USB device strings: <span class="nv">Mfr</span><span class="o">=</span>0, <span class="nv">Product</span><span class="o">=</span>1, <span class="nv">SerialNumber</span><span class="o">=</span><span class="m">0</span>
</span></span><span class="line"><span class="cl">usb 1-3.3: Product: USB 2.0 Hub
</span></span><span class="line"><span class="cl">hub 1-3.3:1.0: USB hub found
</span></span><span class="line"><span class="cl">hub 1-3.3:1.0: <span class="m">4</span> ports detected
</span></span><span class="line"><span class="cl">usb 1-3.4: new high-speed USB device number <span class="m">30</span> using xhci_hcd
</span></span><span class="line"><span class="cl">usb 1-3.4: New USB device found, <span class="nv">idVendor</span><span class="o">=</span>0bda, <span class="nv">idProduct</span><span class="o">=</span>8152, <span class="nv">bcdDevice</span><span class="o">=</span>20.00
</span></span><span class="line"><span class="cl">usb 1-3.4: New USB device strings: <span class="nv">Mfr</span><span class="o">=</span>1, <span class="nv">Product</span><span class="o">=</span>2, <span class="nv">SerialNumber</span><span class="o">=</span><span class="m">3</span>
</span></span><span class="line"><span class="cl">usb 1-3.4: Product: USB 10/100 LAN
</span></span><span class="line"><span class="cl">usb 1-3.4: Manufacturer: Realtek
</span></span><span class="line"><span class="cl">usb 1-3.4: SerialNumber: 00E04C360C56
</span></span><span class="line"><span class="cl">r8152-cfgselector 1-3.4: reset high-speed USB device number <span class="m">30</span> using xhci_hcd
</span></span><span class="line"><span class="cl">r8152 1-3.4:1.0: skip request firmware
</span></span><span class="line"><span class="cl">r8152 1-3.4:1.0 eth0: v1.12.13
</span></span><span class="line"><span class="cl">r8152 1-3.4:1.0 enp5s0f1u3u4: renamed from eth0
</span></span></code></pre></td></tr></table>
</div>
</div><p>And with the screen attached, there&rsquo;s some additional lines as another device is enumerated:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">usb 1-3.3.2: new high-speed USB device number <span class="m">34</span> using xhci_hcd
</span></span><span class="line"><span class="cl">usb 1-3.3.2: New USB device found, <span class="nv">idVendor</span><span class="o">=</span>5548, <span class="nv">idProduct</span><span class="o">=</span>6667, <span class="nv">bcdDevice</span><span class="o">=</span> 3.00
</span></span><span class="line"><span class="cl">usb 1-3.3.2: New USB device strings: <span class="nv">Mfr</span><span class="o">=</span>1, <span class="nv">Product</span><span class="o">=</span>2, <span class="nv">SerialNumber</span><span class="o">=</span><span class="m">3</span>
</span></span><span class="line"><span class="cl">usb 1-3.3.2: Product: 997F1
</span></span><span class="line"><span class="cl">usb 1-3.3.2: Manufacturer: <span class="m">997</span>
</span></span><span class="line"><span class="cl">usb 1-3.3.2: SerialNumber: 997F11193737
</span></span><span class="line"><span class="cl">on usb-0000:05:00.1-3.3.2/input0
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ajazz-akp03e-stream-deck-clone">Ajazz AKP03E (Stream Deck clone)</h2>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p><a href="https://www.aliexpress.us/item/3256807320371570.html?gatewayAdapt=glo2usa" target="_blank" rel="noopener noreffer ">non-affiliate link</a></p>
<p>This is a clone/knockoff of the Elgato Stream Deck products.
I was curious to see if they did anything differently than the original for the internal hardware.
Turns out, no.
It&rsquo;s still a basic LCD screen behind a matrix of clear buttons.</p>
<p>The unit can be easily separated from its stand and there are no hidden screws!</p>
<p><figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>

</p>
<p>After going around the edge w/ a spudger, the internals reveal themselves.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>The <code>-VxNx</code> suffix on the silk screen matches the silk screen seen on the <a href="#generic-usb-c-dock-w-lcd" rel="">USB-C Dock</a>&hellip; which really does make me think that there&rsquo;s some sort of relationship between the two products.</p>
<p>The board with the physical knobs/buttons is just a &ldquo;pass through&rdquo; PCB; everything here just goes right over the FFC to the board with the screen and buttons.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>I can&rsquo;t find <em>anything</em> when googling the main IC, unfortunately.</p>
<blockquote>
<p>ARX29025</p>
<p>Q2402</p>
</blockquote>
<p>The silk screen is:</p>
<blockquote>
<p>HSV293-N3-LCD-V2P1</p>
<p>20240620</p>
</blockquote>
<p><figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>

</p>
<p>The software is <em>super</em> sketchy; just trying to find a build that actually worked on macOS was a pain!</p>
<p>The <a href="https://www.a-jazz.com/en/search.jsp?id=422&amp;q=03" target="_blank" rel="noopener noreffer ">official site</a> looks and functions like it was made with a 2000s-era website builder 🤮.</p>
<p>With some google-fu, I found links to a <a href="https://bbs.key123.vip/" target="_blank" rel="noopener noreffer ">web forum</a> that may not be officially related to the product, but <a href="https://bbs.key123.vip/forum.php?mod=viewthread&amp;tid=1167&amp;highlight=AKP03" target="_blank" rel="noopener noreffer ">has some download links</a> to software that is supposed to work with the device, on macOS in English.</p>
<p>I never got a working build of the software, but the few builds that I did try all have the same architecture; a <code>Qt</code> app that hosts plugins and does all of the thinking for the device.</p>
<p>With a bit more digging, I think that this &ldquo;Mirabox&rdquo; company is the underlying OEM and the ajazz is just a white-labeled version of this product: <a href="https://miraboxbuy.com/collections/stream-dock/products/streamdock-mbox-n3" target="_blank" rel="noopener noreffer ">Stream Dock MBox 293N3</a>.</p>
<p>Mirabox also appears to have a <a href="https://sdk.key123.vip/en/guide/overview.html#stream-dock-mbox-293n4" target="_blank" rel="noopener noreffer ">fledgling SDK</a> for plugins <em>and</em> a <a href="https://github.com/MiraboxSpace/Linux-StreamDock-PythonSDK" target="_blank" rel="noopener noreffer ">Python SDK</a> for Linux users!</p>
<h3 id="usb-details-1">USB details</h3>
<p>Similar architecture; USB hub with two HID devices hanging off it; probably one HID for reading the buttons and another for writing to the screen.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">❯ lsusb -vvv -t &gt; pre-deck
</span></span><span class="line"><span class="cl">❯ lsusb -vvv -t &gt; post-deck
</span></span><span class="line"><span class="cl">❯ diff pre-deck post-deck
</span></span><span class="line"><span class="cl">3a4,9
</span></span><span class="line"><span class="cl">&gt;     <span class="p">|</span>__ Port 003: Dev 019, If 0, <span class="nv">Class</span><span class="o">=</span>Human Interface Device, <span class="nv">Driver</span><span class="o">=</span>usbhid, 480M
</span></span><span class="line"><span class="cl">&gt;         ID 0300:3002
</span></span><span class="line"><span class="cl">&gt;         /sys/bus/usb/devices/1-3  /dev/bus/usb/001/019
</span></span><span class="line"><span class="cl">&gt;     <span class="p">|</span>__ Port 003: Dev 019, If 1, <span class="nv">Class</span><span class="o">=</span>Human Interface Device, <span class="nv">Driver</span><span class="o">=</span>usbhid, 480M
</span></span><span class="line"><span class="cl">&gt;         ID 0300:3002
</span></span><span class="line"><span class="cl">&gt;         /sys/bus/usb/devices/1-3  /dev/bus/usb/001/019
</span></span></code></pre></td></tr></table>
</div>
</div><p>And <code>dmesg</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">usb 1-3: new high-speed USB device number <span class="m">22</span> using xhci_hcd
</span></span><span class="line"><span class="cl">usb 1-3: New USB device found, <span class="nv">idVendor</span><span class="o">=</span>0300, <span class="nv">idProduct</span><span class="o">=</span>3002, <span class="nv">bcdDevice</span><span class="o">=</span> 0.02
</span></span><span class="line"><span class="cl">usb 1-3: New USB device strings: <span class="nv">Mfr</span><span class="o">=</span>1, <span class="nv">Product</span><span class="o">=</span>2, <span class="nv">SerialNumber</span><span class="o">=</span><span class="m">3</span>
</span></span><span class="line"><span class="cl">usb 1-3: Product: HOTSPOTEKUSB HID DEMO
</span></span><span class="line"><span class="cl">usb 1-3: Manufacturer: HOTSPOTEKUSB
</span></span><span class="line"><span class="cl">usb 1-3: SerialNumber: 0300D0781A4A
</span></span><span class="line"><span class="cl">on usb-0000:05:00.1-3/input0
</span></span><span class="line"><span class="cl">input: HOTSPOTEKUSB HOTSPOTEKUSB HID DEMO as /devices/pci0000:00/0000:00:01.2/0000:02:00.0/0000:03:08.0/0000:05:00.1/usb1/1-3/1-3:1.1/0003:0300:3002.00DE/input/input180
</span></span><span class="line"><span class="cl">on usb-0000:05:00.1-3/input1
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="generic-wifi-led-wall-clock">Generic WiFI LED Wall Clock</h2>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p><a href="https://www.aliexpress.us/item/3256807326722207.html?gatewayAdapt=glo2usa" target="_blank" rel="noopener noreffer ">non-affiliate link</a></p>
<p>I&rsquo;ve been looking for a &ldquo;Works with Home Assistant&rdquo; version of the <a href="https://www.amazon.com/Introducing-Echo-Wall-Clock---An-Echo-companion-to-see-timers-at-a-glance./dp/B07FQDMKFT" target="_blank" rel="noopener noreffer ">Echo Wall Clock</a> ever since Amazon discontinued it.</p>
<p>I was hoping this would be a simple ESP8266 or ESP32 module linked directly to the LEDs&hellip; but there&rsquo;s an anonymous intermediate microcontroller in there.</p>
<p>Assuming that the microcontroller can be removed easily and the various segments of addressable LEDs can be driven directly from an ESP8266 or ESP32, this could still be a viable base for a custom LED wall clock.</p>
<p><figure >

    
        
        

    

    <figcaption>
        
        <p>
            Why bother with a custom USB cable? Just use a standard USB-C jack for power!
            
                
                
        </p> 
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        <p>
            Lots of SMD neopixels and a partition/mask system to keep high contrast between the segments.
            
                
                
        </p> 
    </figcaption>
    
</figure>

</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            Kinda interesting to see how they spread the components out to not interfere with the partitions.
            
                
                
        </p> 
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        <p>
            PCB marking: YC-9108-WIFI-0807, Ver 1.6, 2024-6-8
            
                
                
        </p> 
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        <p>
            Markings have been sanded off. Why bother? What&#39;s the value in that?
            
                
                
        </p> 
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        <p>
            I assume this is i2c for the RTC module.
            
                
                
        </p> 
    </figcaption>
    
</figure>


<h2 id="mirabox-n4">Mirabox N4</h2>
<p>This was actually a late addition to the list.
<em>Technically</em> I didn&rsquo;t order it in 2024, but after learning about the Ajazz possibly being a Mirabox product, I wanted to see if there was anything interesting in the Mirabox product line so I found this for a reasonable price and held off publishing this post until it arrived.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p><a href="https://www.aliexpress.us/item/3256807963651419.html" target="_blank" rel="noopener noreffer ">non-affiliate link</a></p>
<p>The packaging is nondescript and minimal; the unit and a nice USB A -&gt; C cable is essentially all that&rsquo;s in the box.</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            Did they have to use foam for this? Cardboard would have been fine...
            
                
                
        </p> 
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        <p>
            The Mirabox logo on top is laser engraved which is a nice touch.
            
                
                
        </p> 
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        <p>
            No screws, just clips! And they&#39;re not even that hard to find or pry up!
            
                
                
        </p> 
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>As was the case with the other LCD modules, this looks like it&rsquo;s just USB 2.0 module hanging off a USB hub.
Conceivably, you could embed a tiny raspberry pi zero or other <em>small</em> computer with USB Host support inside this thing 🤔&hellip;</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            Really nice ofd them to label each FPC connector.
            
                
                
        </p> 
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>The two internal PCBs are marked very similarly to the <a href="#generic-usb-c-dock-w-lcd" rel="">USB-Dock</a> <em>and</em> the <a href="#ajazz-akp03e-stream-deck-clone" rel="">Stream Deck clone</a> which really does make me think that mirabox is the ODM for those products as well.</p>
<p>Markings:</p>
<blockquote>
<p>HSV293-N4-LCD</p>
<p>20240807</p>
<p>HSV293-N4-SW</p>
<p>202400711</p>
</blockquote>
<p>And the USB hub PCB in the base doesn&rsquo;t have a part number, just a date code.
I&rsquo;d bet that they started designing this product in spring of 2024 and they finished the simplest part - the USB hub - first.</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            As expected, the buttons and the lower display are really just different regions of the same LCD.
            
                
                
        </p> 
    </figcaption>
    
</figure>


<p>The dials are aluminum, which feels very premium for a device that&rsquo;s otherwise plastic.</p>
<figure >

    
        
        

    

    <figcaption>
        
        <p>
            That plastic insert almost looks 3d printed...
            
                
                
        </p> 
    </figcaption>
    
</figure>


<figure >

    
        
        

    

    <figcaption>
        
        <p>
            Interesting to see what network calls were made...
            
                
                
        </p> 
    </figcaption>
    
</figure>


]]></description></item></channel></rss>
<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Configuring additional ZwaveJS entities in Home Assistant over MQTT - karl</title><meta name=Description content="Karl's little corner of the internet"><meta property="og:url" content="https://karlquinsland.com/zwavejs-autodiscovery-additional-entities/"><meta property="og:site_name" content="karl"><meta property="og:title" content="Configuring additional ZwaveJS entities in Home Assistant over MQTT"><meta property="og:description" content="This is a super quick â€œbecause the official docs didnâ€™t make it super clear so hereâ€™s what ended up working for meâ€ post.
After some very disappointing WiFi connectivity issues, I settled on a Zwave based thermostat to replace the Venstar thermostat.
After installing the Honeywell TH6320 and connecting it to the ZwaveJS gateway, a new `climate`` entity appeared in Home Assistant. From there, I was able to see/control:"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-05-12T00:00:00+00:00"><meta property="article:modified_time" content="2022-05-12T00:00:00+00:00"><meta property="article:tag" content="Zwave"><meta property="article:tag" content="Home-Assistant"><meta property="og:image" content="https://karlquinsland.com/images/avatar.webp"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://karlquinsland.com/images/avatar.webp"><meta name=twitter:title content="Configuring additional ZwaveJS entities in Home Assistant over MQTT"><meta name=twitter:description content="This is a super quick â€œbecause the official docs didnâ€™t make it super clear so hereâ€™s what ended up working for meâ€ post.
After some very disappointing WiFi connectivity issues, I settled on a Zwave based thermostat to replace the Venstar thermostat.
After installing the Honeywell TH6320 and connecting it to the ZwaveJS gateway, a new `climate`` entity appeared in Home Assistant. From there, I was able to see/control:"><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://karlquinsland.com/zwavejs-autodiscovery-additional-entities/><link rel=prev href=https://karlquinsland.com/venstar-t7850-teardown-review/><link rel=next href=https://karlquinsland.com/omron-bp7000-evolv-teardown/><link rel=stylesheet href=/css/style.min.658eb25b73ad29ab864a36ed014516c5047802d1ff98d0080132d1abe1332f5b.css integrity="sha256-ZY6yW3OtKauGSjbtAUUWxQR4AtH/mNAIATLRq+EzL1s="><link rel=preload href=/lib/fontawesome-free/all.min.0df5a33710e433de1f5415b1d47e4130ca7466aee5b81955f1045c4844bbb3ed.css integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.0df5a33710e433de1f5415b1d47e4130ca7466aee5b81955f1045c4844bbb3ed.css integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0="></noscript><link rel=preload href=/lib/animate/animate.min.5fbaeb9f8e25d7e0143bae61d4b1802c16ce7390b96ceb2d498b0d96ff4c853f.css integrity="sha256-X7rrn44l1+AUO65h1LGALBbOc5C5bOstSYsNlv9MhT8=" as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/animate/animate.min.5fbaeb9f8e25d7e0143bae61d4b1802c16ce7390b96ceb2d498b0d96ff4c853f.css integrity="sha256-X7rrn44l1+AUO65h1LGALBbOc5C5bOstSYsNlv9MhT8="></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Configuring additional ZwaveJS entities in Home Assistant over MQTT","inLanguage":"en-us","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/karlquinsland.com\/zwavejs-autodiscovery-additional-entities\/"},"genre":"posts","keywords":"zwave, home assistant","wordcount":1641,"url":"https:\/\/karlquinsland.com\/zwavejs-autodiscovery-additional-entities\/","datePublished":"2022-05-12T00:00:00+00:00","dateModified":"2022-05-12T00:00:00+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"karl"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=karl>Karl</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/><i class="fas fa-blog"></i> Posts </a><a class=menu-item href=/resume/ title="Hire Me!"><i class="fas fa-briefcase"></i> RÃ©sumÃ© </a><a class=menu-item href=/tags/ title="Can you tell that I don't have a super consistent or clear taxonomy?"><i class="fas fa-tags"></i> Tags </a><a class=menu-item href=/contact/><i class="fas fa-address-book"></i> Contact </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i>
</span></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=karl>Karl</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts/ title><i class="fas fa-blog"></i>Posts</a><a class=menu-item href=/resume/ title="Hire Me!"><i class="fas fa-briefcase"></i>RÃ©sumÃ©</a><a class=menu-item href=/tags/ title="Can you tell that I don't have a super consistent or clear taxonomy?"><i class="fas fa-tags"></i>Tags</a><a class=menu-item href=/contact/ title><i class="fas fa-address-book"></i>Contact</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Configuring additional ZwaveJS entities in Home Assistant over MQTT</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>karl</a></span>&nbsp;<span class=post-category>included in <a href=/categories/guide/><i class="far fa-folder fa-fw" aria-hidden=true></i>Guide</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2022-05-12>2022-05-12</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;1641 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;8 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept=true><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li><a href=#exposing-idle-brightness-to-home-assistant-as-a-sensor>Exposing &lsquo;idle brightness&rsquo; to Home Assistant as a Sensor</a><ul><li><a href=#example-payload>Example payload</a></li></ul></li><li><a href=#ok-but-what-about-writing-to-the-thermostat>Ok, but what about writing to the thermostat?</a></li><li><a href=#more-automagic-more-better>More Automagic, More Better</a></li></ul></li></ul></nav></div></div><div class=content id=content><p>This is a super quick &ldquo;because the official docs didn&rsquo;t make it super clear so here&rsquo;s what ended up working for me&rdquo; post.</p><hr><p>After some <a href=/venstar-t7850-teardown-review/#an-update-on-wifi-connectivity rel>very disappointing WiFi connectivity issues</a>, I settled on a Zwave based thermostat to replace the Venstar thermostat.</p><p>After installing the Honeywell TH6320 and connecting it to the ZwaveJS gateway, a new `climate`` entity appeared in Home Assistant. From there, I was able to see/control:</p><ul><li>The current thermostat setpoint/mode</li><li>The current air temp and humidity</li><li>The current battery level / if the thermostat thought the battery was low</li></ul><p>I knew that it was possible to adjust the the screen backlight from the thermostat itself so I was a bit confused when there was no such configuration entity exposed in Home Assistant.</p><figure><img src=/zwavejs-autodiscovery-additional-entities/images/ha_01.webp alt="Note the `Idle_brightness` sensor. That's not part of the 'default' zwavejs2mqtt install."><figcaption><p>Note the `Idle_brightness` sensor. That's not part of the 'default' zwavejs2mqtt install.</p></figcaption></figure><p>After playing around with the ZwaveJS2MQTT web interface for bit, I discovered that it was possible to adjust the backlight brightness&mldr;and over 40 other settings under the <code>Configuration v4</code> section.</p><p>I can totally understand why only the &ldquo;core&rdquo; functionality would be automatically exposed to Home Assistant; most of the 40+ knobs are things that do not need to be set beyond the initial installation.</p><p>So, How do I go about getting ZwaveJS2MQTT to automatically tell Home Assistant about the current backlight level?</p><h2 id=exposing-idle-brightness-to-home-assistant-as-a-sensor>Exposing &lsquo;idle brightness&rsquo; to Home Assistant as a Sensor</h2><p>From the <code>Configuration v4</code> tab for the thermostat node, I found the input field <code>[4-112-0-39] Idle Brightness</code> which let me control the thermostat screen backlight level.
I don&rsquo;t know what the numbers mean, but they are important / uniquely identify <em>a specific setting</em>.</p><div class="details admonition note open"><div class="details-summary admonition-title"><i class="icon fas fa-pencil-alt fa-fw" aria-hidden=true></i>Note<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>If you are using this as a guide but for a <em>different</em> setting (perhaps you want to keep an eye on <code>[4-112-0-28] Minimum Cool Temperature</code>, for example) then you will want to substitute your parameter setting &lsquo;address&rsquo; as appropriate.</div></div></div><p>After some more experimentation and trying to grok <a href="https://zwave-js.github.io/zwavejs2mqtt/#/homeassistant/homeassistant-mqtt?id=add-new-component" target=_blank rel="noopener noreffer">documentation</a>, I figured out how to get ZwaveJS to advertise the current value for the backlight brightness as a sensor in Home Assistant.</p><figure><img src=/zwavejs-autodiscovery-additional-entities/images/zwjs2mqtt_01.webp alt="The 'HOME ASSISTANT' tab of my thermostats' page."><figcaption><p>The 'HOME ASSISTANT' tab of my thermostats' page.</p></figcaption></figure><p>Here&rsquo;s how to do it:</p><ul><li>Select the <code>node</code> in question from the <code>Control Panel</code> page on the ZwaveJS2MQTT web UI. In this case, you can see that my thermostat is node <code>4</code>. Yours will likely be different.</li><li>Select the <code>Home Assistant</code> tab from the left. You can see it selected in the above screenshot.</li><li>In the blank <code>Hass Device JSON</code> box, paste the JSON document that describes the sensor / entity you wish to expose to Home Assistant. I struggled for some time trying to figure out what the document should look like but was able to &lsquo;reverse engineer&rsquo; a working payload by studying the <code>sensor_humidity_air</code> entity that was automatically created.</li><li>Then click the <code>ADD</code> button that should have activated just above the <code>Hass Device JSON</code>. A new row should appear in the <code>Home Assistant - Devices table</code></li><li>Click the newly added row so the <code>Hass Device JSON</code> field is populated with the JSON document you have added.</li><li>Click the <code>UPDATE</code> button that should appear just above the <code>Hass Device JSON</code> label</li><li>Assuming no issues, this will send the MQTT message which tells Home Assistant about your new sensor. You may wish to use a MQTT broker inspection app to monitor the exact payload that is sent to the <code>homeassistant/...</code> topic as well as <code>tail -f home-assistant.log</code>. If Home Assistant gets the message, any validation errors will show up in the HA log.</li><li>Once you are satisfied with how the entity is presented in Home Assistant, click the <code>STORE</code> button just below the <code>Home Assistant - Devices</code> heading on the ZwaveJS2MQTT web UI.</li></ul><p>When all is said and done, this is what you should see:</p><figure><img src=/zwavejs-autodiscovery-additional-entities/images/zwjs2mqtt_02.webp><figcaption></figcaption></figure><h3 id=example-payload>Example payload</h3><p>Here is a (slightly edited) version of the JSON document I added via the <code>Hass Device JSON</code> entry.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;sensor&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;object_id&#34;</span><span class=p>:</span> <span class=s2>&#34;idle_brightness&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;discovery_payload&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;value_template&#34;</span><span class=p>:</span> <span class=s2>&#34;{{ value_json.value }}&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;state_topic&#34;</span><span class=p>:</span> <span class=s2>&#34;zwave/YourThermostat_NameHere/112/0/39&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;json_attributes_topic&#34;</span><span class=p>:</span> <span class=s2>&#34;zwave/YourThermostat_NameHere/112/0/39&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;device&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;identifiers&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;zwavejs2mqtt_0xdeadbeef_node4&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;manufacturer&#34;</span><span class=p>:</span> <span class=s2>&#34;Honeywell&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;model&#34;</span><span class=p>:</span> <span class=s2>&#34;T6 Pro Z-Wave Programmable Thermostat (TH6320ZW)&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;YourThermostat NameHere&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;sw_version&#34;</span><span class=p>:</span> <span class=s2>&#34;1.3&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;YourThermostat NameHere idle_brightness&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;unique_id&#34;</span><span class=p>:</span> <span class=s2>&#34;zwavejs2mqtt_0xdeadbeef_4-112-0-Idle_Brightness&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;entity_category&#34;</span><span class=p>:</span> <span class=s2>&#34;config&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;icon&#34;</span><span class=p>:</span> <span class=s2>&#34;mdi:brightness-percent&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;discoveryTopic&#34;</span><span class=p>:</span> <span class=s2>&#34;sensor/YourThermostat_NameHere/idle_brightness/config&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;values&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;112-0-39&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;persistent&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;ignoreDiscovery&#34;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;sensor_idle_brightness&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>I have replaced a few things in the example payload. You will want to retrieve the correct values for your payload from one of the automatically generated payloads. I used the <code>sensor_humidity_air</code> device as a starting point for my payload.</p><h2 id=ok-but-what-about-writing-to-the-thermostat>Ok, but what about writing to the thermostat?</h2><figure><img src=/zwavejs-autodiscovery-additional-entities/images/ha_02.webp alt="A basic 'helper' widget for use in Home Assistant Automations."><figcaption><p>A basic 'helper' widget for use in Home Assistant Automations.</p></figcaption></figure><p>Once the sensor exists in Home Assistant, you will probably want to use it in an automation.
Here is a simple automation that watches a basic number input widget and sets the backlight brightness for the thermostat based on what the widget is set to:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>alias</span><span class=p>:</span><span class=w> </span><span class=l>Sync thermostat brightness to input select</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=l>An Example automation.</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>trigger</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>platform</span><span class=p>:</span><span class=w> </span><span class=l>state</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>entity_id</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>sensor.yourthermostat_namehere_idle_brightness</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>physical</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>platform</span><span class=p>:</span><span class=w> </span><span class=l>state</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>entity_id</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>input_number.thermostat_backlight</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>virtual</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>condition</span><span class=p>:</span><span class=w> </span><span class=p>[]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>action</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>choose</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>conditions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>condition</span><span class=p>:</span><span class=w> </span><span class=l>trigger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>virtual</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>sequence</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>service</span><span class=p>:</span><span class=w> </span><span class=l>mqtt.publish</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>data</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>topic</span><span class=p>:</span><span class=w> </span><span class=l>zwave/YourThermostat_NameHere/112/0/39/set</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>payload_template</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{{trigger.to_state.state}}&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>conditions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>condition</span><span class=p>:</span><span class=w> </span><span class=l>trigger</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>physical</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>sequence</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>service</span><span class=p>:</span><span class=w> </span><span class=l>input_number.set_value</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>target</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>entity_id</span><span class=p>:</span><span class=w> </span><span class=l>input_number.thermostat_backlight</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>data_template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{{trigger.to_state.state | float}}&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>default</span><span class=p>:</span><span class=w> </span><span class=p>[]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>mode</span><span class=p>:</span><span class=w> </span><span class=l>single</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>max_exceeded</span><span class=p>:</span><span class=w> </span><span class=l>silent</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>This <em>works</em> but it&rsquo;s not <em>automagic</em>. We can do better!</p><h2 id=more-automagic-more-better>More Automagic, More Better</h2><p>The primary downside with the above automation is that the user (read: you) needs to create the <code>input_number</code> widget and then spend the time telling Home Assistant what to do when the value changes.</p><p>This isn&rsquo;t a particularly difficult task - only ~30 lines of yaml&mldr; but what if we didn&rsquo;t have to do that?</p><p>What if Home Assistant had a robust auto discovery mechanism that we could take advantage of to <em>automagically</em> set up a basic input widget that would transmit the necessary MQTT payload to adjust the backlight &mldr; automatically?</p><p>I have good news and bad news.</p><p>The good news is that we totally can do this. ðŸŽ‰</p><p>The bad news is that ZwaveJS2MQTT does not appear to support the <a href=https://www.home-assistant.io/integrations/input_select/ target=_blank rel="noopener noreffer"><code>input_select</code></a> type of entity that we&rsquo;ll need to pull this off. ðŸ‘Ž</p><p>I am not super familiar with the ZwaveJS2MQTT code base, but it looks like there is no validation on the JSON you enter under the <code>Hass Device JSON</code> field but there <em>is</em> some validation / filtering on the MQTT message that is sent for auto discovery. <a href=https://github.com/zwave-js/zwavejs2mqtt/blob/master/hass/configurations.ts#L6 target=_blank rel="noopener noreffer">ZwaveJS2MQTT does not seem to support <code>select</code> components via MQTT</a> so the payload that is sent to Home Assistant is incomplete and results in errors:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>â”‚ ERROR <span class=o>(</span>MainThread<span class=o>)</span> <span class=o>[</span>homeassistant.util.logging<span class=o>]</span> Exception in discovery_callback when dispatching <span class=s1>&#39;mqtt_discovery_updated_(&#39;</span><span class=k>select</span><span class=s1>&#39;, &#39;</span>YourThermostat NameHere idle_brightness â”‚
</span></span><span class=line><span class=cl>â”‚ Traceback <span class=o>(</span>most recent call last<span class=o>)</span>:
</span></span><span class=line><span class=cl>â”‚   File <span class=s2>&#34;/usr/src/homeassistant/homeassistant/components/mqtt/mixins.py&#34;</span>, line 724, in discovery_callback
</span></span><span class=line><span class=cl>â”‚     await self._discovery_update<span class=o>(</span>payload<span class=o>)</span>
</span></span><span class=line><span class=cl>â”‚   File <span class=s2>&#34;/usr/src/homeassistant/homeassistant/components/mqtt/mixins.py&#34;</span>, line 886, in discovery_update
</span></span><span class=line><span class=cl>â”‚     <span class=nv>config</span> <span class=o>=</span> self.config_schema<span class=o>()(</span>discovery_payload<span class=o>)</span>
</span></span><span class=line><span class=cl>â”‚   File <span class=s2>&#34;/usr/local/lib/python3.9/site-packages/voluptuous/validators.py&#34;</span>, line 232, in __call__
</span></span><span class=line><span class=cl>â”‚     <span class=k>return</span> self._exec<span class=o>((</span>Schema<span class=o>(</span>val<span class=o>)</span> <span class=k>for</span> val in self.validators<span class=o>)</span>, v<span class=o>)</span>
</span></span><span class=line><span class=cl>â”‚   File <span class=s2>&#34;/usr/local/lib/python3.9/site-packages/voluptuous/validators.py&#34;</span>, line 355, in _exec
</span></span><span class=line><span class=cl>â”‚     raise e <span class=k>if</span> self.msg is None <span class=k>else</span> AllInvalid<span class=o>(</span>self.msg, <span class=nv>path</span><span class=o>=</span>path<span class=o>)</span>
</span></span><span class=line><span class=cl>â”‚   File <span class=s2>&#34;/usr/local/lib/python3.9/site-packages/voluptuous/validators.py&#34;</span>, line 351, in _exec
</span></span><span class=line><span class=cl>â”‚     <span class=nv>v</span> <span class=o>=</span> func<span class=o>(</span>v<span class=o>)</span>
</span></span><span class=line><span class=cl>â”‚   File <span class=s2>&#34;/usr/local/lib/python3.9/site-packages/voluptuous/schema_builder.py&#34;</span>, line 272, in __call__
</span></span><span class=line><span class=cl>â”‚     <span class=k>return</span> self._compiled<span class=o>([]</span>, data<span class=o>)</span>
</span></span><span class=line><span class=cl>â”‚   File <span class=s2>&#34;/usr/local/lib/python3.9/site-packages/voluptuous/schema_builder.py&#34;</span>, line 818, in validate_callable
</span></span><span class=line><span class=cl>â”‚     <span class=k>return</span> schema<span class=o>(</span>data<span class=o>)</span>
</span></span><span class=line><span class=cl>â”‚   File <span class=s2>&#34;/usr/local/lib/python3.9/site-packages/voluptuous/schema_builder.py&#34;</span>, line 272, in __call__
</span></span><span class=line><span class=cl>â”‚     <span class=k>return</span> self._compiled<span class=o>([]</span>, data<span class=o>)</span>
</span></span><span class=line><span class=cl>â”‚   File <span class=s2>&#34;/usr/local/lib/python3.9/site-packages/voluptuous/schema_builder.py&#34;</span>, line 595, in validate_dict
</span></span><span class=line><span class=cl>â”‚     <span class=k>return</span> base_validate<span class=o>(</span>path, iteritems<span class=o>(</span>data<span class=o>)</span>, out<span class=o>)</span>
</span></span><span class=line><span class=cl>â”‚   File <span class=s2>&#34;/usr/local/lib/python3.9/site-packages/voluptuous/schema_builder.py&#34;</span>, line 433, in validate_mapping
</span></span><span class=line><span class=cl>â”‚     raise er.MultipleInvalid<span class=o>(</span>errors<span class=o>)</span>
</span></span><span class=line><span class=cl>â”‚ voluptuous.error.MultipleInvalid: required key not provided @ data<span class=o>[</span><span class=s1>&#39;options&#39;</span><span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><p>While it would be nice if ZwaveJS2MQTT would support more device types, we have a pretty simple fix: use another device to publish a valid configuration payload.</p><p>And as it turns out, it&rsquo;s <em>trivial</em> to get Home Assistant to publish an arbitrary payload to an arbitrary topic when it starts up.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>alias</span><span class=p>:</span><span class=w> </span><span class=l>Autoconfigure Thermostat Backlight select</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=p>&gt;-</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>  On HA start up, publish MQTT payload so HA auto-discovers the input_select to
</span></span></span><span class=line><span class=cl><span class=sd>  automate thermostat backlight brightness</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>trigger</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>platform</span><span class=p>:</span><span class=w> </span><span class=l>homeassistant</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>event</span><span class=p>:</span><span class=w> </span><span class=l>start</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>condition</span><span class=p>:</span><span class=w> </span><span class=p>[]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>action</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>service</span><span class=p>:</span><span class=w> </span><span class=l>mqtt.publish</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>data</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>topic</span><span class=p>:</span><span class=w> </span><span class=l>homeassistant/select/YourThermostat_NameHere/idle_brightness/config</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>payload</span><span class=p>:</span><span class=w> </span><span class=p>&gt;-</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>        {&#34;options&#34;:[&#34;0&#34;,&#34;1&#34;,&#34;2&#34;,&#34;3&#34;,&#34;4&#34;,&#34;5&#34;],&#34;name&#34;:&#34;MainThermostat idle_brightness&#34;,&#34;state_topic&#34;:&#34;zwave/YourThermostat_NameHere/112/0/39&#34;,&#34;value_template&#34;:&#34;{{&#39;{{value_json.value}}&#39;}}&#34;,&#34;command_topic&#34;:&#34;zwave/YourThermostat_NameHere/112/0/39/set&#34;,&#34;command_template&#34;:&#34;{{&#39;{{value}}&#39;}}&#34;,&#34;unique_id&#34;:&#34;zwavejs2mqtt_0xdeadbeef_4-112-0-Idle_Brightness_Select&#34;,&#34;device&#34;:{&#34;identifiers&#34;:[&#34;zwavejs2mqtt_0xdeadbeef_node4&#34;],&#34;manufacturer&#34;:&#34;Honeywell&#34;,&#34;model&#34;:&#34;T6ProZ-WaveProgrammableThermostat(TH6320ZW)&#34;,&#34;name&#34;:&#34;MainThermostat&#34;,&#34;sw_version&#34;:&#34;1.3&#34;},&#34;entity_category&#34;:&#34;config&#34;,&#34;icon&#34;:&#34;mdi:brightness-percent&#34;}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>mode</span><span class=p>:</span><span class=w> </span><span class=l>single</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class="details admonition important open"><div class="details-summary admonition-title"><i class="icon fas fa-pencil-alt fa-fw" aria-hidden=true></i>Notice<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content><p>If you look carefully, you will notice two things:</p><ul><li>The json payload has been escaped and turned into a string</li><li>The templates inside the string are <a href=https://community.home-assistant.io/t/how-can-i-use-escape-characters-while-templating/135324 target=_blank rel="noopener noreffer"><em>further</em> escaped</a> by wrapping them in <code>{{ '</code> and <code>'}}</code>.</li></ul></div></div></div><p>Here is a pretty formatted JSON document:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;options&#34;</span><span class=p>:[</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;2&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;3&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;4&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;5&#34;</span>
</span></span><span class=line><span class=cl>   <span class=p>],</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;name&#34;</span><span class=p>:</span><span class=s2>&#34;YourThermostat NameHere idle_brightness&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;state_topic&#34;</span><span class=p>:</span><span class=s2>&#34;zwave/YourThermostat_NameHere/112/0/39&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;value_template&#34;</span><span class=p>:</span><span class=s2>&#34;{{ &#39;{{value_json.value}}&#39; }}&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;command_topic&#34;</span><span class=p>:</span><span class=s2>&#34;zwave/YourThermostat_NameHere/112/0/39/set&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;command_template&#34;</span><span class=p>:</span><span class=s2>&#34;{{ &#39;{{value}}&#39; }}&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;unique_id&#34;</span><span class=p>:</span><span class=s2>&#34;zwavejs2mqtt_0xdeadbeef_4-112-0-Idle_Brightness_Select&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;device&#34;</span><span class=p>:{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;identifiers&#34;</span><span class=p>:[</span>
</span></span><span class=line><span class=cl>         <span class=s2>&#34;zwavejs2mqtt_0xdeadbeef_node4&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;manufacturer&#34;</span><span class=p>:</span><span class=s2>&#34;Honeywell&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;model&#34;</span><span class=p>:</span><span class=s2>&#34;T6 Pro Z-Wave Programmable Thermostat (TH6320ZW)&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;name&#34;</span><span class=p>:</span><span class=s2>&#34;YourThermostat NameHere&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;sw_version&#34;</span><span class=p>:</span><span class=s2>&#34;1.3&#34;</span>
</span></span><span class=line><span class=cl>   <span class=p>},</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;entity_category&#34;</span><span class=p>:</span><span class=s2>&#34;config&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>   <span class=nt>&#34;icon&#34;</span><span class=p>:</span><span class=s2>&#34;mdi:brightness-percent&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Once the automation is created, save it. You can test your work by clicking &ldquo;run actions&rdquo; and monitoring the home assistant log file.</p><p>When the payload is properly escaped, you should see a new entity added to the Device page:</p><figure><img src=/zwavejs-autodiscovery-additional-entities/images/ha_03.webp alt="Automatically created!"><figcaption><p>Automatically created!</p></figcaption></figure><p>When you select a brightness value from the drop down, the backlight brightness should change.
That&rsquo;s how you get a &rsquo;non standard&rsquo; thermostat configuration value to automatically show up on the correct device page.</p><p>You now no longer need the example automation from <a href=#ok-but-what-about-writing-to-the-thermostat rel>above</a>. ðŸ˜Ž.</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2022-05-12</span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/zwavejs-autodiscovery-additional-entities/index.md target=_blank>Read Markdown</a></span></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/zwave/>Zwave</a>,&nbsp;<a href=/tags/home-assistant/>Home-Assistant</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/venstar-t7850-teardown-review/ class=prev rel=prev title="Quick look inside Venstar T7850 - One of the only 'no-cloud' WiFi Thermostats that plays nice with Home Assistant"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Quick look inside Venstar T7850 - One of the only 'no-cloud' WiFi Thermostats that plays nice with Home Assistant</a>
<a href=/omron-bp7000-evolv-teardown/ class=next rel=next title="Quick look inside the OMRON Evolv BP7000 Blood Pressure cuff">Quick look inside the OMRON Evolv BP7000 Blood Pressure cuff<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Â¯\_(ãƒ„)_/Â¯</div><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.152.2">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.3.0"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2019 - 2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>karl</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=/lib/katex/katex.min.76e39bd605d45b2d1944123c66608b0c8bb9baeb70720b212571531c7cf9bc2a.css integrity="sha256-duOb1gXUWy0ZRBI8ZmCLDIu5uutwcgshJXFTHHz5vCo="><script type=text/javascript src=/lib/autocomplete/autocomplete.min.ae2da1bd62c6469ee27770ad1cddf2e8296d8a7f6d85b091463e5200c5e320af.js integrity="sha256-ri2hvWLGRp7id3CtHN3y6Cltin9thbCRRj5SAMXjIK8="></script><script type=text/javascript src=/lib/lunr/lunr.min.08a93c0120364b01159db3c287f39b2180bb740334472bda0675bd3f18981676.js integrity="sha256-CKk8ASA2SwEVnbPCh/ObIYC7dAM0RyvaBnW9PxiYFnY="></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.3d9120fa621da6d613c1698b7014ec6bdf4620366e8f2b7b547059f4b6f6272b.js integrity="sha256-PZEg+mIdptYTwWmLcBTsa99GIDZujyt7VHBZ9Lb2Jys="></script><script type=text/javascript src=/lib/clipboard/clipboard.min.e17a1d816e13c0826e0ed7febfabc3277f45571234bde0bf9120829a7169edc9.js integrity="sha256-4XodgW4TwIJuDtf+v6vDJ39FVxI0veC/kSCCmnFp7ck="></script><script type=text/javascript src=/lib/katex/katex.min.eb18207487161674e717087c317db14ac1a62dadaecccb802499ce173bfeb739.js integrity="sha256-6xggdIcWFnTnFwh8MX2xSsGmLa2uzMuAJJnOFzv+tzk="></script><script type=text/javascript src=/lib/katex/contrib/auto-render.min.cb7f4ca60ed5dc3e258415f8c7a3b46d4a93578a52adf83011f18a7f190e7602.js integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI="></script><script type=text/javascript src=/lib/katex/contrib/copy-tex.min.52ce78fab4860d24ef22128a52ce24ca01368a9034457a565a1d3fccbab0ddbb.js integrity="sha256-Us54+rSGDSTvIhKKUs4kygE2ipA0RXpWWh0/zLqw3bs="></script><script type=text/javascript src=/lib/katex/contrib/mhchem.min.5c0a121a8b490afc85860a522347aeb34fb508c6b23044e5d29f6b2194227b51.js integrity="sha256-XAoSGotJCvyFhgpSI0eus0+1CMayMETl0p9rIZQie1E="></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:10},comment:{},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"}}</script><script type=text/javascript src=/js/theme.min.612a51a43205bbcf3b4af348dc2e8aa60f77f4fe5535ebc57f13054b61607d6c.js integrity="sha256-YSpRpDIFu887SvNI3C6Kpg939P5VNevFfxMFS2FgfWw="></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-3WZ55XG701",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=G-3WZ55XG701" async></script></body></html>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>Two-Minute-Teardown - series - karl</title><link>https://karlquinsland.com/series/two-minute-teardown/</link><description>Two-Minute-Teardown - series - karl</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sat, 01 Feb 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://karlquinsland.com/series/two-minute-teardown/" rel="self" type="application/rss+xml"/><item><title>#TwoMinuteTeardown: Home Assistant Voice - Preview Edition</title><link>https://karlquinsland.com/home-assistant-voice-pe-teardown/</link><pubDate>Sat, 01 Feb 2025 00:00:00 +0000</pubDate><author>Author</author><guid>https://karlquinsland.com/home-assistant-voice-pe-teardown/</guid><description><![CDATA[<h1 id="home-assistant-voice-preview-edition-teardown">Home Assistant Voice: Preview Edition teardown</h1>
<p>This is a quick <a href="/tags/two-minute-teardown/" rel="">#TwoMinuteTeardown</a> post for the recently released <a href="https://www.home-assistant.io/voice-pe/" target="_blank" rel="noopener noreffer">Home Assistant Voice Node - Preview edition</a>.</p>
<p>Normally, I&rsquo;d be doing a full teardown, but this is a little different; the Home Assistant team has done a <em>lot</em> of the work out in the open.
With just a quick Google, you can find official:</p>
<ul>
<li>teardown instructions <a href="https://voice-pe.home-assistant.io/guides/disassemble/" target="_blank" rel="noopener noreffer">here</a>.</li>
<li>source code <a href="https://github.com/esphome/home-assistant-voice-pe" target="_blank" rel="noopener noreffer">here</a>.</li>
<li>3D printable case <a href="https://www.printables.com/model/1110526-home-assistant-voice-preview-edition-enclosure" target="_blank" rel="noopener noreffer">files</a>.</li>
<li>Instructions for adding custom devices <a href="https://voice-pe.home-assistant.io/guides/grove_port/" target="_blank" rel="noopener noreffer">here</a>.</li>
</ul>
<p>I am grateful for such a well-documented and open project.
Truly, by hackers for hackers!</p>
<h2 id="teardown">Teardown</h2>
<p>See the official instructions if you can&rsquo;t figure it out.</p>
<p>There&rsquo;s not much to the device, really.
The top half hosts the physical buttons and the microphones.
The thin, metal-looking piece in the top right is the antenna.</p>
<p>In the bottom right, there&rsquo;s a small switch that appears to mux between the main application processor (ESP32) and the audio processor.</p>
<p>I wonder weather this is &ldquo;leftover&rdquo; from development and they haven&rsquo;t gotten around to simplifying the BOM yet or if this is intentionally populated for users to re-program the audio processor.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>All of the &ldquo;fun&rdquo; stuff is on the bottom half.</p>
<p>Immediately, you notice the PCB has multiple <em>populated</em> pin headers for hacking. Bonus, they&rsquo;re all labeled!</p>
<p>The layout and BOM is about what you&rsquo;d expect for a ~$50 single-purpose device.</p>
<p>Where possible, I&rsquo;ve <a href="#ics" rel="">identified</a> the big ICs.</p>
<figure >

    
        
        

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<h3 id="wishful-thinking">wishful thinking</h3>
<p>In a word: Ethernet.</p>
<p>Most of the ESP32 product line does not have support for ethernet via <a href="https://en.wikipedia.org/wiki/Media-independent_interface#RMII" target="_blank" rel="noopener noreffer">RMII</a> (unfortunately) but there is always SPI based ethernet.</p>
<p>There are a few areas where the PCB is bare/empty and with a few tweaks to the layout, it would have been possible to also expose SPI headers next to the <a href="https://wiki.seeedstudio.com/Grove-I2C_Hub/" target="_blank" rel="noopener noreffer">grove connector</a>.</p>
<p>Assuming there&rsquo;s a spare SPI peripheral to use, SPI based ethernet would have latency and throughput as good as or better than WiFi.</p>
<p>It would have been a nice option for those of us who prefer the reliability of wired connections.</p>
<p>Oh well.</p>
<h2 id="ics">ICs</h2>
<p>This is just the big ones that were going to be easy-ish to positively identify.
I skipped a few of the super small ICs that had a few characters (at most!) of identification on them.</p>
<p>Two flash chips, one for the ESP32 and one for the &ldquo;ai&rdquo; chip which is maybe doing detection and is almost certainly doing some other DSP stuff.
TI parts for the audio codec and a few miscellaneous bits as well.</p>
<h3 id="zbit-semiconductor-zb25vq128">zbit semiconductor ZB25VQ128</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">AN2414
</span></span><span class="line"><span class="cl">25VQ128DSJG
</span></span><span class="line"><span class="cl">P3S952
</span></span></code></pre></td></tr></table>
</div>
</div><p><a href="https://linux-chenxing.org/pioneer3/sv50pd/ZB25VQ128.pdf" target="_blank" rel="noopener noreffer">This</a> is a clone of a super common winbond nor flash chip with the same part number.</p>
<h3 id="zbit-semiconductor-zb25vq32">zbit semiconductor ZB25VQ32</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">KN2444
</span></span><span class="line"><span class="cl">25VQ32DSJG
</span></span><span class="line"><span class="cl">EQ4537
</span></span></code></pre></td></tr></table>
</div>
</div><p><a href="https://semic-boutique.com/wp-content/uploads/2016/05/ZB25VQ32.pdf" target="_blank" rel="noopener noreffer">Same</a> as above, but smaller.</p>
<h3 id="ti-tlv320aic3204">TI TLV320AIC3204</h3>
<p><a href="https://www.ti.com/product/TLV320AIC3204" target="_blank" rel="noopener noreffer">This</a> is the audio codec.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">AIC
</span></span><span class="line"><span class="cl">3204
</span></span><span class="line"><span class="cl">TI 48I
</span></span><span class="line"><span class="cl">A69Y G4
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ti-sn74lvc125a">TI SN74LVC125A</h3>
<p><a href="https://www.ti.com/product/SN74LVC125A" target="_blank" rel="noopener noreffer">This</a> is a pretty common buffer IC and I don&rsquo;t know for sure what it&rsquo;s being used for.
I am 99% certain that the LEDs under the rotary encoder are neopixels and those can be driven directly from the ESP32.
The only other thing that comes to mind is a &ldquo;switch&rdquo; to physically cut power to the microphones when the user has engaged the mute switch.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">LC125A
</span></span><span class="line"><span class="cl">TI44K
</span></span><span class="line"><span class="cl">C237
</span></span><span class="line"><span class="cl">9F
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="xmos-xu316">XMOS XU316</h3>
<p>The <a href="https://www.xmos.com/download/XU316-1024-QF60A-xcore_ai-Datasheet%2826%29.pdf" target="_blank" rel="noopener noreffer">XU316-1024-QF60A</a> is an interesting chip.
The product name and datasheet suggest that it&rsquo;s instrumental in &ldquo;ai&rdquo; workloads ðŸ™„ but the datasheet is a bit more concrete:</p>
<blockquote>
<p>The xcore.ai series is a comprehensive range of 32-bit multicore microcontrollers that brings the low latency and timing determinism of the xCORE architecture to mainstream embedded applications.
Unlike conventional microcontrollers, xCORE multicore microcontrollers execute multiple real-time tasks simultaneously and communicate between tasks using a high speed network.
Because xCORE multicore microcontrollers are completely deterministic when executing from internal memory, you can write software to implement functions that traditionally require dedicated hardware.</p></blockquote>
<p>This is doing real time audio processing - presumably to cancel background noise/echo - and might also be doing wake word detection.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">XMOS
</span></span><span class="line"><span class="cl">V16A0
</span></span><span class="line"><span class="cl">GT2446P2
</span></span><span class="line"><span class="cl">TMCY48.00
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="espressif-esp32-s3">Espressif ESP32-S3</h3>
<p>This chip needs no introduction!</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">ESP32-S3
</span></span><span class="line"><span class="cl">242024
</span></span><span class="line"><span class="cl">R8MRK668000
</span></span><span class="line"><span class="cl">UC00MBE423
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="the-little-guys">The little guys</h3>
<p>All the ICs that are too small to have full/meaningful part numbers.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">FE
</span></span><span class="line"><span class="cl">NZ
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">f9
</span></span><span class="line"><span class="cl">GkA
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">CEDTI
</span></span></code></pre></td></tr></table>
</div>
</div><p>Given the proximity to both the speaker connector and the <a href="#ti-tlv320aic3204" rel="">audio codec</a>, I am guessing this is an audio amplifier, probably also from TI.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">TI 45
</span></span><span class="line"><span class="cl">AYK
</span></span></code></pre></td></tr></table>
</div>
</div>]]></description></item></channel></rss>
<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>PoE powered Stack Light - karl</title><meta name=Description content="AKA a real-life 'unread' indicator"><meta property="og:url" content="https://karlquinsland.com/poe-stack-light/"><meta property="og:site_name" content="karl"><meta property="og:title" content="PoE powered Stack Light"><meta property="og:description" content="AKA a real-life 'unread' indicator"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-02-28T00:00:00+00:00"><meta property="article:modified_time" content="2021-02-28T00:00:00+00:00"><meta property="article:tag" content="Home-Assistant"><meta property="article:tag" content="MQTT"><meta property="article:tag" content="Esphome"><meta property="article:tag" content="Has:download"><meta property="og:image" content="https://karlquinsland.com/poe-stack-light/images/complete/02_all_on.webp"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://karlquinsland.com/poe-stack-light/images/complete/02_all_on.webp"><meta name=twitter:title content="PoE powered Stack Light"><meta name=twitter:description content="AKA a real-life 'unread' indicator"><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://karlquinsland.com/poe-stack-light/><link rel=prev href=https://karlquinsland.com/unbrick-rievtech-plc-failed-firmware-update/><link rel=next href=https://karlquinsland.com/treatlife-ds03-tasmota-autoconfig-with-homeassistant/><link rel=stylesheet href=/css/style.min.658eb25b73ad29ab864a36ed014516c5047802d1ff98d0080132d1abe1332f5b.css integrity="sha256-ZY6yW3OtKauGSjbtAUUWxQR4AtH/mNAIATLRq+EzL1s="><link rel=preload href=/lib/fontawesome-free/all.min.0df5a33710e433de1f5415b1d47e4130ca7466aee5b81955f1045c4844bbb3ed.css integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.0df5a33710e433de1f5415b1d47e4130ca7466aee5b81955f1045c4844bbb3ed.css integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0="></noscript><link rel=preload href=/lib/animate/animate.min.5fbaeb9f8e25d7e0143bae61d4b1802c16ce7390b96ceb2d498b0d96ff4c853f.css integrity="sha256-X7rrn44l1+AUO65h1LGALBbOc5C5bOstSYsNlv9MhT8=" as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/animate/animate.min.5fbaeb9f8e25d7e0143bae61d4b1802c16ce7390b96ceb2d498b0d96ff4c853f.css integrity="sha256-X7rrn44l1+AUO65h1LGALBbOc5C5bOstSYsNlv9MhT8="></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"PoE powered Stack Light","inLanguage":"en-us","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/karlquinsland.com\/poe-stack-light\/"},"genre":"posts","keywords":"home assistant, MQTT, ESPHome, has:download","wordcount":2232,"url":"https:\/\/karlquinsland.com\/poe-stack-light\/","datePublished":"2021-02-28T00:00:00+00:00","dateModified":"2021-02-28T00:00:00+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"karl"},"description":"AKA a real-life 'unread' indicator"}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=karl>Karl</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/><i class="fas fa-blog"></i> Posts </a><a class=menu-item href=/resume/ title="Hire Me!"><i class="fas fa-briefcase"></i> RÃ©sumÃ© </a><a class=menu-item href=/tags/ title="Can you tell that I don't have a super consistent or clear taxonomy?"><i class="fas fa-tags"></i> Tags </a><a class=menu-item href=/contact/><i class="fas fa-address-book"></i> Contact </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i>
</span></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=karl>Karl</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts/ title><i class="fas fa-blog"></i>Posts</a><a class=menu-item href=/resume/ title="Hire Me!"><i class="fas fa-briefcase"></i>RÃ©sumÃ©</a><a class=menu-item href=/tags/ title="Can you tell that I don't have a super consistent or clear taxonomy?"><i class="fas fa-tags"></i>Tags</a><a class=menu-item href=/contact/ title><i class="fas fa-address-book"></i>Contact</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">PoE powered Stack Light</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>karl</a></span>&nbsp;<span class=post-category>included in <a href=/categories/home-lab/><i class="far fa-folder fa-fw" aria-hidden=true></i>Home-Lab</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2021-02-28>2021-02-28</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;2232 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;11 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept=true><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li><a href=#home-assistant>Home Assistant</a></li><li><a href=#bom>BOM</a><ul><li><a href=#stack-light>Stack light</a></li><li><a href=#esp32-module>ESP32 Module</a></li><li><a href=#pcb>PCB</a></li><li><a href=#printed-parts>Printed parts</a></li></ul></li><li><a href=#assemble>Assemble</a><ul><li><a href=#pcb-1>PCB</a></li></ul></li><li><a href=#everything-else>Everything else</a></li><li><a href=#files>Files</a></li></ul></li></ul></nav></div></div><div class=content id=content><figure><img src=/poe-stack-light/images/complete/02_all_on.webp alt="Picture showing assembled light attached to enclosure from the front. All 5 lights are lit."><figcaption><p>The lights are much brighter than they appear in this picture; had to intentionally darken the image to prevent camera from blowing out the colors.</p></figcaption></figure><p><a href=https://en.wikipedia.org/wiki/Stack_light target=_blank rel="noopener noreffer">Stack/signal lights</a> are <em>everywhere</em> in industrial applications for good reason: they&rsquo;re a compact and relatively information-dense indicator system. They always seemed like the kind of indicator that only people with expensive machines needed. Until I found that they can be had for just under $6/light from Ali Express, that is.</p><p>I don&rsquo;t have any giant industrial machines to attach one to, but I do have a non-trivial number of containers/servers/networked-devices running and they all emit various notifications, usually through email. Who wouldn&rsquo;t mind a novel way to move those notifications beyond email/push notifications into the physical world ðŸ¤”?</p><ul><li>ðŸŸ¢ => Everything is nominal</li><li>ðŸŸ  => Check your email; a <code>WARN</code> level event has occurred</li><li>ðŸ”´ => A <code>WARN</code> or <code>ERROR</code> level condition has occurred; something (ISP down?) is preventing delivery of notifications so check the logs/dashboards directly</li><li>ðŸ”µ => A new <code>INFO</code> level message available in Home Assistant</li><li>âšª => Not sure; either a &ldquo;A HIGH priority task is past due&rdquo; or a &lsquo;modifier&rsquo; for above status</li></ul><p>While waiting for the light to arrive from China, I started to design something to drive it.
It was immediately obvious that an ESP32 module would be <strong>ideal</strong> to run the show, and just for the fun of it, I decided to make the entire thing (optionally) controlled and powered over Ethernet.</p><h2 id=home-assistant>Home Assistant</h2><p>It wouldn&rsquo;t be an ESP32 powered project w/o the the <em>fantastic</em> <a href=https://esphome.io/ target=_blank rel="noopener noreffer">ESPHome</a> framework! With ESPHome comes trivial Home Assistant integration; each individual light / channel on the stack light is automatically configured via MQTT a a light:</p><figure><img src=/poe-stack-light/images/home-assistant.webp alt="Screenshot showing the stack light automatically configured in Home Assistant."><figcaption><p>Stack light is controlled via MQTT making it easy to control from Home Assistant or any other program that can speak MQTT.</p></figcaption></figure><p>A slightly modified version of the ESPHome config that I use to build the firmware for the light is attached at the end of this post.</p><p>Unfortunately, the one Home Assistant integration that I had in mind is currently not feasible!
I wanted to light the blue light when there is any new/unread Home Assistant <a href=https://www.home-assistant.io/integrations/persistent_notification/ target=_blank rel="noopener noreffer">persistent notifications</a>;
a real life &ldquo;unread&rdquo; badge of sorts.</p><p>There is no way to get the list / count of active notifications unless you&rsquo;re a <a href=https://github.com/home-assistant/core/blob/41b45c7f78f9937520b38126cedf228da7507d7d/homeassistant/components/persistent_notification/__init__.py#L203 target=_blank rel="noopener noreffer">websocket client</a>, however.</p><p>Using the <a href=https://github.com/home-assistant/core/blob/41b45c7f78f9937520b38126cedf228da7507d7d/homeassistant/components/persistent_notification/__init__.py#L30 target=_blank rel="noopener noreffer"><code>persistent_notifications_updated</code></a> event as a trigger won&rsquo;t work because the event payload lacks useful data; I can&rsquo;t figure out the number of notifications or their state&mldr; just that either notification has been created or dismissed.
If I wanted the blue light on any time a notification was either created or destroyed, I could use this trigger. But the light is no longer a useful indicator; it would be on the first time a notification was created or destroyed and then it would never be off.</p><p>Manually trying to <a href=https://community.home-assistant.io/t/dismiss-of-a-persistent-notification-as-trigger-for-automations/135621/5 target=_blank rel="noopener noreffer">keep track of the number of notification created/dismissed actions</a> just feels like a hacky workaround that could easily get out of sync, too.</p><p>Oh well ðŸ˜”.</p><h2 id=bom>BOM</h2><p>I&rsquo;ll cover the individual 3D printed and electronic components below. Beyond them, you&rsquo;ll need some additional hardware:</p><ul><li>4x <a href=https://www.mcmaster.com/catalog/91290A113 target=_blank rel="noopener noreffer">m3x8mm</a> screws</li><li>4x <a href=https://www.mcmaster.com/catalog/91274A115 target=_blank rel="noopener noreffer">m4x8mm</a> screws</li><li>4x <a href=https://www.mcmaster.com/catalog/91274A117 target=_blank rel="noopener noreffer">m4x10mm</a> screws</li><li>6x <a href="https://www.kjmagnetics.com/proddetail.asp?prod=BC41" target=_blank rel="noopener noreffer">Neodymium magnets</a> sized 20mm x 6mm x 2mm. These are optional and are leftover magnets from this <a href="https://www.google.com/search?client=firefox-b-1-d&amp;q=prusa+mk3+enclosure+2" target=_blank rel="noopener noreffer">build</a></li><li>10mm diameter <a href="https://www.amazon.com/s?k=10mm+cabinet+door+pad" target=_blank rel="noopener noreffer">anti-slip pads</a>. Thees are optional but will keep the base from sliding around.</li></ul><p>I&rsquo;ve linked to the screws that I used, but any similar ones should work. Strong glue could also work, but is not recommended.</p><p>The m3 screws are for attaching the PCB to the printed part (in yellow, below)
The shorter m4 screws are for attaching the base (yellow) to the lid (dark blue) and the longer screws are for attaching the stack light to the lid.</p><figure><img src=/poe-stack-light/images/assemble/01_prep.webp alt="Picture showing some of the components and tools used in assembly."><figcaption><p>About to start melting threads into the 3D printed parts.</p></figcaption></figure><h3 id=stack-light>Stack light</h3><p>Looking quickly through Ali Express, it seems that the lights come in a few different styles, but all appear to be modular in construction.
Regardless of lamp style, they all appear to come in 2-5 lamp variants and some have configuration switches that allow for customizing the behavior per lamp.</p><p>The ESPHome code and PCB are designed to accommodate up to 6 colors but will work with less.</p><p>No matter which style and colors you select, make sure you get one with a <strong>positive <a href=https://en.wikipedia.org/wiki/Anode target=_blank rel="noopener noreffer">anode</a></strong> rated for <strong>12V DC</strong>.</p><p>The exact lamp that I used is <a href=https://www.aliexpress.com/item/1005001391165850.html target=_blank rel="noopener noreffer">here</a>.</p><h3 id=esp32-module>ESP32 Module</h3><p>I chose to use the <a href=https://www.aliexpress.com/item/1005001739834076.html target=_blank rel="noopener noreffer">WirelessTag WT32-eth01</a> module for the onboard Ethernet circuitry at a relatively cheap price: about $10/module. Bonus: it&rsquo;s got a breadboard friendly footprint <em>and</em> castellated pads!</p><p>You do not need to use Ethernet for control <em>or</em> power; the ESPHome configuration below can be easily modified to use the WiFi.</p><p>In any case, you will need a dedicated UART programmer for the module as there is no built-in USB port on the WT32-eth01.</p><h3 id=pcb>PCB</h3><p>Nothing much to see here; just a simple board to consolidate connections for what would otherwise be a mess of wires.</p><p>Since I was already using Ethernet for the data, may as well use it for the power, too.
Designing my own PoE circuitry was not in scope for this project, so I went with another off-the-shelf <a href=https://www.aliexpress.com/item/32620368747.html target=_blank rel="noopener noreffer">module</a>. I ordered the <code>12V2A-Full 24W</code> version, but the others are likely to also have an identical internal PCB layout which should fit in the 3D printed parts. Make sure to get one that supplies the 12V that the stack light will need!</p><p>The PCB does not care <em>where</em> the 12V DC supply comes from.
It wouldn&rsquo;t be difficult to modify the enclosure to accommodate a <a href=https://www.aliexpress.com/item/1005001668143510.html target=_blank rel="noopener noreffer">USB-C Power Delivery module</a> or even just a standard barrel jack / LED power supply.</p><p>Like the PoE module, I use an off the shelf DC to DC converter <a href=https://www.aliexpress.com/item/32833398811.html target=_blank rel="noopener noreffer">module</a> to step the 12V down from the PoE dongle to 5V which the ESP32 module requires. That link is to a whole-sale lot of 10 converters. You can order the same module in quantities of one from similar listings. I buy them in bulk because it&rsquo;s more expensive to design and solder my own on each board that I build&mldr;</p><p>My testing isn&rsquo;t super through, but I see the total power draw (measured from the PoE supplying equipment) reaching about 4.5W when all lights are on and about 2W at at idle.</p><p>The ESP32 just drives some <a href=https://lcsc.com/product-detail/MOSFET_Diodes-Incorporated-DMN1019USN-7_C145103.html target=_blank rel="noopener noreffer">N-Channel MOSFETS</a> to switch the individual lights on/off.
They&rsquo;re the only surface mount (SOT-23-4) component; everything else can be done with through hole components. The board is designed for up to 6 colors/lights, but populate only as many MOSFETS as you need.</p><p>All of the screw terminals are optional; I had several spares left over from a different project, but soldering wires directly to the PCB would work as well.</p><p>The 6 pin screw terminal is LCSC part <a href=https://lcsc.com/product-detail/Screw-terminal_JILN-JL301-50007U02_C409139.html target=_blank rel="noopener noreffer"><code>C409139</code></a></p><p>The 2 pin screw terminal is LCSC part <a href=https://lcsc.com/product-detail/Screw-terminal_Ningbo-Kangnex-Elec-WJ129V-5-0-2P_C8463.html target=_blank rel="noopener noreffer"><code>C8463</code></a></p><p>The source and gerber files from EasyEDA are below. Upload them to your favorite PCB prototyping service or try your hand at making your own.</p><h3 id=printed-parts>Printed parts</h3><p>There are two parts: a <code>lid</code> and a <code>plate</code>. The electronics are attached to the plate and the stack light is attached to the lid. In the photos associated with this post, the <code>lid</code> is dark blue and the <code>plate</code> is yellow.</p><p>The plate has features for several attachment methods:</p><ul><li>magnets; meant for horizontal surfaces</li><li>3M command strip; probably wont be enough to do wall/ceilings, but should work in lieu of magnets on horizontal surfaces</li><li>4 circular indents (<code>10mm</code> diameter) included for anti-slip pads</li><li>drywall screw/slot mounting for walls/ceilings</li></ul><figure><img src=/poe-stack-light/images/assemble/base_mounting_options.webp alt="Picture annotated to call out specific design features in the base for a variety of mounting options."><figcaption><p>I wasn't sure where I'd want to install this, so there are a few options for attaching the base to surfaces.</p></figcaption></figure><p>Pause the print job at the correct layer if you intend to embed magnets:</p><figure><img src=/poe-stack-light/images/slicer.webp alt="Screenshot showing 3D printed parts arranged on slicing software with annotation pointing out when to insert optional magnets."><figcaption><p>Insert your magnets before the layer covering thee 6 cavities is printed.</p></figcaption></figure><p>Both the <code>lid</code> and <code>base</code> are easy to print; material and color are up to you, as is layer height and quality settings. The <code>stl</code> and <code>step</code> files for both are at the end of this post.
Should you want to make your own enclosure from scratch, I have also included the <code>step</code> files for the PoE dongle and PCB below.</p><h2 id=assemble>Assemble</h2><p>Assembly is relatively straightforward; its mostly integrating a few components into a simple 3d printed enclosure.</p><h3 id=pcb-1>PCB</h3><p>Solder the electronic components to the PCB. If omitting screw terminals for the stack light wires, do not solder them to the PCB yet!</p><p>I created the castellated pad footprint for the ESP32 module by hand and, in the version of the PCB pictured, didn&rsquo;t get the pads as close as they should be so there are some ugly solder blobs to compensate. The pads are correctly placed on the most recent PCB revision.</p><p>I have included two programming headers on the PCB to flash your firmware; one at <code>2.54mm</code> pitch and the other at <code>1.0mm</code> pitch, the latter of which is intended for use with <a href=https://www.aliexpress.com/item/4001122992446.html target=_blank rel="noopener noreffer">this</a> programmer.</p><p>There is a solder bridge labeled <code>EXT 3v3</code>; short this out if you intend to use the programmer to power the ESP32 module. Leave it alone if you plan to use external DC to power the device during programming.</p><p>I suggest programming the module <em>now</em> to verify that you&rsquo;ve built the PCB correctly and that your stack light works as expected.
Once you&rsquo;ve confirmed the electronics and software all work together, proceed to final assembly.</p><h2 id=everything-else>Everything else</h2><p>The various holes designed to receive screw threads are intentionally undersized. If you&rsquo;re not using self-tapping screws, you&rsquo;ll find it MUCH EASER to insert a <em>hot</em> screw for the first time.</p><p>With the screw on the end of the driver, hold the tip of the screw/threads under a flame for 5-10 seconds and then quickly rotate the screw into the plastic using a bit of extra &lsquo;pushing&rsquo; force.
Once the screw is fully inserted, allow it to fully cool (~5min) so the softened plastic has a chance to solidify around the screw threads.</p><p>The screws that hold the base plate to the body of the enclosure are meant to sit flush. Ensure that you screw them in fully before the plastic cools!</p><figure><img src=/poe-stack-light/images/assemble/00_flush_screws.webp alt="Picture showing assembly detail; the base plate is secured to the enclosure with screws."><figcaption><p>If the screws protrude even a fraction of a millimeter, the light can wobble and the magnetic attachment is weakened.</p></figcaption></figure><p>While waiting for the screws to cool, cut the Ethernet and power leads from the PoE dongle down to size. Desolder the leads from the dongle, trim to be as short as possible and re-solder.</p><p>The less &lsquo;slack&rsquo; cable in the enclosure, the easier it will be to finish assembly!</p><figure><img src=/poe-stack-light/images/assemble/03_wire.webp alt="Picture showing all components secured to the base and wired together."><figcaption><p>I cut a few inches off the Ethernet cable and power leads so everything fits in the enclosure better.</p></figcaption></figure><p>After the screws have cooled, ensure that the PCB sits flush against the mounts.</p><figure><img src=/poe-stack-light/images/assemble/02_pcb_attached.webp alt="Picture showing assembly detail; the PCB should be attached to the base plate with screws and should be flush against the mounting posts."><figcaption><p>PCB should be flush against the mounting posts.</p></figcaption></figure><p>With all wires connected, lift the PoE dongle off of the base plate slightly and align the RJ45 jack with the square hole in the enclosure.</p><p>Make sure the side of the base plate opposite the side with the RJ45 jack is securely mounts into the body of the enclosure!</p><p>Gently press the remaining side of the base plate into the enclosure. As the base plate gets closer to flush with the body, the RJ45 jack should slowly come into alignment with the wall.</p><figure><img src=/poe-stack-light/images/assemble/04_close.webp alt="Picture showing assembly detail; the base plate acts like a lever to carefully line the PoE jack up with the enclosure body."><figcaption><p>Use the plate as a lever to carefully push, then hold, the PoE dongle in place.</p></figcaption></figure><p>When the base blate is completely installed into the body, the RJ45 jack should be flush with the external wall of the enclosure.</p><figure><img src=/poe-stack-light/images/complete/00_plugged_in.webp alt="Picture showing assembled light attached to enclosure, focus is on the RJ45 port in the rear."><figcaption><p>RJ45 jack should be flush to the outer wall of the enclosure.</p></figcaption></figure><p>Attach the base plate to the enclosure body with the 4 screws, attach silicon feet or a 3M command strip and then you&rsquo;re done!</p><figure><img src=/poe-stack-light/images/complete/01_all_off.webp alt="Picture showing assembled light attached to enclosure from the front. No individual light is powered up, they all have the same translucent white color."><figcaption><p>Translucent white lenses for much less ambiguity than the stack lights with colored lenses.</p></figcaption></figure><h2 id=files>Files</h2><p>All files below are licensed under the <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank rel="noopener noreffer">Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0)</a> license unless otherwise explicitly noted.</p><p><strong>None of the files below may be used for commercial purposes</strong></p><ul><li><figure><a target=_blank href=https://karlquinsland.com/poe-stack-light/images/complete/01_all_off.webp><img style=width:auto;height:auto src=/poe-stack-light/images/complete/01_all_off_hu_e92ce5d23fd92aa3.webp width=300 height=533></a><figcaption><small>Translucent white lenses for much less ambiguity than the stack lights with colored lenses.</small></figcaption></figure></li><li><figure><a target=_blank href=https://karlquinsland.com/poe-stack-light/images/assemble/base_mounting_options.webp><img style=width:auto;height:auto src=/poe-stack-light/images/assemble/base_mounting_options_hu_a3253439158c016.webp width=300 height=219></a><figcaption><small>I wasn't sure where I'd want to install this, so there are a few options for attaching the base to surfaces.</small></figcaption></figure></li><li><figure><a target=_blank href=https://karlquinsland.com/poe-stack-light/images/assemble/04_close.webp><img style=width:auto;height:auto src=/poe-stack-light/images/assemble/04_close_hu_aa36b0ad19cdcfba.webp width=300 height=207></a><figcaption><small>Use the plate as a lever to carefully push, then hold, the PoE dongle in place.</small></figcaption></figure></li><li><figure><a target=_blank href=https://karlquinsland.com/poe-stack-light/images/complete/02_all_on.webp><img style=width:auto;height:auto src=/poe-stack-light/images/complete/02_all_on_hu_8e5449600b54615d.webp width=300 height=533></a><figcaption><small>The lights are much brighter than they appear in this picture; had to intentionally darken the image to prevent camera from blowing out the colors.</small></figcaption></figure></li><li><a target=_blank href=https://karlquinsland.com/poe-stack-light/files/easy_eda_gerber.zip><i class="far fa-file-"></i>
files/easy_eda_gerber.zip:<br><small>sha1: d7686b0ad88a1686a5a11cb009632b53ca474c75</small></a></li><li><a target=_blank href=https://karlquinsland.com/poe-stack-light/files/easy_eda_source.zip><i class="far fa-file-"></i>
files/easy_eda_source.zip:<br><small>sha1: e05a00cdca9af94dd0e8d1d8f3aa998b75c14a08</small></a></li><li><a target=_blank href=https://karlquinsland.com/poe-stack-light/files/enclosure-lid-m1v2.stl><i class="far fa-file-code"></i>
files/enclosure-lid-m1v2.stl:
<small style="font-family:lucida console,monospace">stl</small> <small>file</small><br><small>sha1: 3870a674d9cf08bf26e3607e42ee766e9816ac6c</small></a></li><li><a target=_blank href=https://karlquinsland.com/poe-stack-light/files/enclosure-plate-m1v2.stl><i class="far fa-file-code"></i>
files/enclosure-plate-m1v2.stl:
<small style="font-family:lucida console,monospace">stl</small> <small>file</small><br><small>sha1: 8f90b54be2a798cf87bc6ca4fc118b82669e0668</small></a></li><li><a target=_blank href=https://karlquinsland.com/poe-stack-light/files/esphome_config.yaml><i class="far fa-file-code"></i>
files/esphome_config.yaml:
<small style="font-family:lucida console,monospace">yaml</small> <small>file</small></a></li><li><a target=_blank href=https://karlquinsland.com/poe-stack-light/files/pcb.step><i class="far fa-file-code"></i>
files/pcb.step:
<small style="font-family:lucida console,monospace">step</small> <small>file</small><br><small>sha1: e212f3cd3d90a639e6518b7d11bc5cc20df09b67</small></a></li><li><a target=_blank href=https://karlquinsland.com/poe-stack-light/files/poe-dongle.step><i class="far fa-file-code"></i>
files/poe-dongle.step:
<small style="font-family:lucida console,monospace">step</small> <small>file</small><br><small>sha1: a698c249d89f2ab2c981427df49620cb09ce5f66</small></a></li><li><a target=_blank href=https://karlquinsland.com/poe-stack-light/files/stack-light-base.step><i class="far fa-file-code"></i>
files/stack-light-base.step:
<small style="font-family:lucida console,monospace">step</small> <small>file</small><br><small>sha1: 3c3d0d6162a985b4f09d0f9a58fdacb3f08beb78</small></a></li><li><figure><a target=_blank href=https://karlquinsland.com/poe-stack-light/images/assemble/00_flush_screws.webp><img style=width:auto;height:auto src=/poe-stack-light/images/assemble/00_flush_screws_hu_8a67e63d8e85e360.webp width=300 height=174></a><figcaption><small>If the screws protrude even a fraction of a millimeter, the light can wobble and the magnetic attachment is weakened.</small></figcaption></figure></li><li><figure><a target=_blank href=https://karlquinsland.com/poe-stack-light/images/home-assistant.webp><img style=width:auto;height:auto src=/poe-stack-light/images/home-assistant_hu_c6e2aa3cf748a2f5.webp width=300 height=620></a><figcaption><small>Stack light is controlled via MQTT making it easy to control from Home Assistant or any other program that can speak MQTT.</small></figcaption></figure></li><li><figure><a target=_blank href=https://karlquinsland.com/poe-stack-light/images/assemble/02_pcb_attached.webp><img style=width:auto;height:auto src=/poe-stack-light/images/assemble/02_pcb_attached_hu_3e9a5b61fcd5c532.webp width=300 height=196></a><figcaption><small>PCB should be flush against the mounting posts.</small></figcaption></figure></li><li><figure><a target=_blank href=https://karlquinsland.com/poe-stack-light/images/complete/00_plugged_in.webp><img style=width:auto;height:auto src=/poe-stack-light/images/complete/00_plugged_in_hu_cc235c148dd65c8b.webp width=300 height=237></a><figcaption><small>RJ45 jack should be flush to the outer wall of the enclosure.</small></figcaption></figure></li><li><figure><a target=_blank href=https://karlquinsland.com/poe-stack-light/images/assemble/01_prep.webp><img style=width:auto;height:auto src=/poe-stack-light/images/assemble/01_prep_hu_c89954fb3b1103a9.webp width=300 height=284></a><figcaption><small>About to start melting threads into the 3D printed parts.</small></figcaption></figure></li><li><figure><a target=_blank href=https://karlquinsland.com/poe-stack-light/images/slicer.webp><img style=width:auto;height:auto src=/poe-stack-light/images/slicer_hu_3d4a60d58cfddf79.webp width=300 height=233></a><figcaption><small>Insert your magnets before the layer covering thee 6 cavities is printed.</small></figcaption></figure></li><li><figure><a target=_blank href=https://karlquinsland.com/poe-stack-light/images/assemble/03_wire.webp><img style=width:auto;height:auto src=/poe-stack-light/images/assemble/03_wire_hu_a3fe1f939e73c502.webp width=300 height=186></a><figcaption><small>I cut a few inches off the Ethernet cable and power leads so everything fits in the enclosure better.</small></figcaption></figure></li></ul></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2021-02-28</span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/poe-stack-light/index.md target=_blank>Read Markdown</a></span></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/home-assistant/>Home-Assistant</a>,&nbsp;<a href=/tags/mqtt/>MQTT</a>,&nbsp;<a href=/tags/esphome/>Esphome</a>,&nbsp;<a href></a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/unbrick-rievtech-plc-failed-firmware-update/ class=prev rel=prev title="Unbrick a rievtech PLC after failed firmware upgrade"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Unbrick a rievtech PLC after failed firmware upgrade</a>
<a href=/treatlife-ds03-tasmota-autoconfig-with-homeassistant/ class=next rel=next title="Fixing Home Assistant discovery with Tasmota on the Treatlife DS03">Fixing Home Assistant discovery with Tasmota on the Treatlife DS03<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Â¯\_(ãƒ„)_/Â¯</div><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.152.2">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.3.0"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2019 - 2026</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>karl</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=/lib/katex/katex.min.76e39bd605d45b2d1944123c66608b0c8bb9baeb70720b212571531c7cf9bc2a.css integrity="sha256-duOb1gXUWy0ZRBI8ZmCLDIu5uutwcgshJXFTHHz5vCo="><script type=text/javascript src=/lib/autocomplete/autocomplete.min.ae2da1bd62c6469ee27770ad1cddf2e8296d8a7f6d85b091463e5200c5e320af.js integrity="sha256-ri2hvWLGRp7id3CtHN3y6Cltin9thbCRRj5SAMXjIK8="></script><script type=text/javascript src=/lib/lunr/lunr.min.08a93c0120364b01159db3c287f39b2180bb740334472bda0675bd3f18981676.js integrity="sha256-CKk8ASA2SwEVnbPCh/ObIYC7dAM0RyvaBnW9PxiYFnY="></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.3d9120fa621da6d613c1698b7014ec6bdf4620366e8f2b7b547059f4b6f6272b.js integrity="sha256-PZEg+mIdptYTwWmLcBTsa99GIDZujyt7VHBZ9Lb2Jys="></script><script type=text/javascript src=/lib/clipboard/clipboard.min.e17a1d816e13c0826e0ed7febfabc3277f45571234bde0bf9120829a7169edc9.js integrity="sha256-4XodgW4TwIJuDtf+v6vDJ39FVxI0veC/kSCCmnFp7ck="></script><script type=text/javascript src=/lib/katex/katex.min.eb18207487161674e717087c317db14ac1a62dadaecccb802499ce173bfeb739.js integrity="sha256-6xggdIcWFnTnFwh8MX2xSsGmLa2uzMuAJJnOFzv+tzk="></script><script type=text/javascript src=/lib/katex/contrib/auto-render.min.cb7f4ca60ed5dc3e258415f8c7a3b46d4a93578a52adf83011f18a7f190e7602.js integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI="></script><script type=text/javascript src=/lib/katex/contrib/copy-tex.min.52ce78fab4860d24ef22128a52ce24ca01368a9034457a565a1d3fccbab0ddbb.js integrity="sha256-Us54+rSGDSTvIhKKUs4kygE2ipA0RXpWWh0/zLqw3bs="></script><script type=text/javascript src=/lib/katex/contrib/mhchem.min.5c0a121a8b490afc85860a522347aeb34fb508c6b23044e5d29f6b2194227b51.js integrity="sha256-XAoSGotJCvyFhgpSI0eus0+1CMayMETl0p9rIZQie1E="></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:10},comment:{},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"}}</script><script type=text/javascript src=/js/theme.min.612a51a43205bbcf3b4af348dc2e8aa60f77f4fe5535ebc57f13054b61607d6c.js integrity="sha256-YSpRpDIFu887SvNI3C6Kpg939P5VNevFfxMFS2FgfWw="></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-3WZ55XG701",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=G-3WZ55XG701" async></script></body></html>
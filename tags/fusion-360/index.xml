<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>fusion-360 - Tag - karl</title><link>https://karlquinsland.com/tags/fusion-360/</link><description>fusion-360 - Tag - karl</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sat, 15 Oct 2022 00:00:00 +0000</lastBuildDate><atom:link href="https://karlquinsland.com/tags/fusion-360/" rel="self" type="application/rss+xml"/><item><title>I made a thing: GPS/PPS clock source for ntpd</title><link>https://karlquinsland.com/yet-another-gps-pps-opnsense/</link><pubDate>Sat, 15 Oct 2022 00:00:00 +0000</pubDate><author>Author</author><guid>https://karlquinsland.com/yet-another-gps-pps-opnsense/</guid><description><![CDATA[<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw"></i>Tip<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>This is just a &lsquo;pointer&rsquo; post.</p>
<p>All the details are in the <a href="https://github.com/kquinsland/yet-another-gps-pps-opnsense" target="_blank" rel="noopener noreffer"><code>kquinsland/yet-another-gps-pps-opnsense</code> repo</a> on github.</p>
</div>
        </div>
    </div>
<hr>
<p>For the longest time, I had a dedicated raspberry pi with a GPS module acting as the <code>ntp</code> server for my home network. I chose to use a dedicated host for this because my router - at the time - did not have a serial port that I could leverage.</p>
<p>Recently, the miroSD card on the ntp pi died and I decided to leverage the serial port in my  current router rather than re-build the operating system on the ntp host.</p>
<p>It didn&rsquo;t take that much time to but together a bare-bones schematic in KiCad.
One LCSC order, one mouser order and about a week later, I had a basic RS232 &lt;-&gt; TTL converter for use with a cheap GPS module</p>
<figure >

    
        
    

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>After a bit more testing, I was convinced I hadn&rsquo;t made any egregious mistakes and the new module didn&rsquo;t pose a significant threat/risk to my production router.</p>
<figure >

    
        
    

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


]]></description></item><item><title>I made a thing: Yet another 3d printed speaker</title><link>https://karlquinsland.com/3d-printed-subwoofer-and-arylic-amp-enclosure/</link><pubDate>Wed, 31 Aug 2022 00:00:00 +0000</pubDate><author>Author</author><guid>https://karlquinsland.com/3d-printed-subwoofer-and-arylic-amp-enclosure/</guid><description><![CDATA[<!-- markdownlint-disable-file MD002 -->
<h1 id="background">Background</h1>
<p>Long story made <strong><em>very</em></strong> short: the amplifier inside my ancient 2.1 desktop speakers died and I couldn&rsquo;t find anything &ldquo;off the shelf&rdquo; that would serve as a suitable replacement <em>and</em> integrate well with Home Assistant.</p>
<p>So if you can&rsquo;t buy it, you have to build it!
And as it turns out, there&rsquo;s a whole community of audiophiles that have published designs on all the usual places you&rsquo;d find free designs for makers.
Similarly, there&rsquo;s a few companies that seems to specialize in audio electronics aimed <em>specifically at</em> people that are building their own speaker systems and just want someone else to handle the electronics and software.</p>
<p>This post will cover the design tweaks I made to an existing subwoofer assembly and an original amplifier electronics/enclosure design.</p>
<h2 id="the-components">The components</h2>
<p>There are two assemblies in this build: the subwoofer and the receiver/power-electronics enclosure.</p>
<p>The subwoofer is a remix of the amazing <a href="https://www.printables.com/model/84521-skeleton-waveguide-subwoofer-speaker-fusion-360-ar" target="_blank" rel="noopener noreffer"><code>Skeleton Waveguide Subwoofer Speaker</code></a> by <a href="https://www.printables.com/social/107245-zx82net/about" target="_blank" rel="noopener noreffer"><code>zx82net</code></a> which is a remix of <a href="https://www.printables.com/model/190762-hexibox-series-tang-band-w3-1876s-microsub" target="_blank" rel="noopener noreffer"><code>&quot;HexiBox&quot; Tang Band W3-1876S Subwoofer Enclosure</code></a>
by <a href="https://www.printables.com/social/264072-hexibase/about" target="_blank" rel="noopener noreffer"><code>hexibase</code></a>.</p>
<p>As for the drive electronics, I elected to use an <a href="https://www.arylic.com/products/up2stream-amp-2-1-amp-board" target="_blank" rel="noopener noreffer">Up2Stream Amp 2.1 - Multiroom Wireless 2.1 Amplifier Board</a>.
This appears to be based on a MediaTek based module module from <a href="https://www.linkplay.com/" target="_blank" rel="noopener noreffer"><code>LinkPlay</code></a>.</p>
<p>I could do a whole <em>series</em> of posts based on the firmware alone but for now I&rsquo;ll just say that it is 1) trivial to root and 2) <strong>should not be exposed directly to the internet for any reason whatsoever.</strong></p>
<p>I&rsquo;m not equipped to verify any of the claims made by the original subwoofer designer so I can only offer my subjective take; this subwoofer offers more wubz at greater distances and that&rsquo;s <em>before</em> I add +10db to the bass via the equalizer on the amp!</p>
<h2 id="tweaks">Tweaks</h2>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        The green elements are meant to be printed in TPU or another gasket like material. The cable channel runs from the RCA jack enclosure in the rear (pink color), under the gasket material to the main speaker cavity.
        
            
        
        </p> 
    </figcaption>
    
</figure>


<h3 id="wiring">Wiring</h3>
<ul>
<li>There is now an integrated channel for standard 16 AWG speaker wire that runs from the main cavity, through each baffle, to the exterior.
<ul>
<li>This cable channel also increases rigidity which aids in printing and assembly.</li>
</ul>
</li>
<li>The rear of the subwoofer body features some attachment points for a simple enclosure for speaker hookups.
<ul>
<li>I am using RCA jacks but the enclosure could be easily modified to work with any similar connector.</li>
<li>The enclosure mounts directly over the cable channel so all wires are protected/hidden.</li>
</ul>
</li>
</ul>
<h3 id="assembly">Assembly</h3>
<p>You no longer need to use goopy adhesives to seal the panels to the body! The sub body and panels have been modified to accommodate a thin 3d printed sheet of TPU or similar material to act as a gasket.</p>
<p>There is also a subtle channel cut into the sub body which is meant for gasket cord as a fall back.</p>
<p><figure >

    
        
    

    

    <figcaption>
        
        <p>
        The dark blue represents the path that gasket cord material should be laid down.
        
            
        
        </p> 
    </figcaption>
    
</figure>


<figure >

    
        
    

    

    <figcaption>
        
        <p>
        When properly joined, there will be a slight interference between the panel and the gasket material; this ensures a fantastic seal.
        
            
        
        </p> 
    </figcaption>
    
</figure>

</p>
<h3 id="mounting">Mounting</h3>
<ul>
<li>The sides of the subwoofer feature a 100x100mm <a href="https://en.wikipedia.org/wiki/Flat_Display_Mounting_Interface" target="_blank" rel="noopener noreffer">VESA/FDMI</a> mounting pattern.
<ul>
<li>When printing with the holes facing the print bed, support material all but entirely obscures their existence.</li>
</ul>
</li>
</ul>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        The support material hides the hole almost perfectly. If the image brightness wasn&#39;t turned up, you&#39;d never notice :D
        
            
        
        </p> 
    </figcaption>
    
</figure>


<h1 id="build">Build</h1>
<div class="details admonition info open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-info-circle fa-fw"></i>Info<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">This is an abridged assembly guide and Bill of Materials. I have included only what&rsquo;s different/new/specific to this build. Consult the various build guides and BOMs for the original subwoofer so you understand what <em>else</em> is required.</div>
        </div>
    </div>
<h2 id="bom">BOM</h2>
<h3 id="subwoofer">Subwoofer</h3>
<p>Very little about the subwoofer BOM has changed from the original design.</p>
<ul>
<li>
<p><strong>Optional</strong>: <a href="https://www.amazon.com/gp/product/B00QVB6QPU/" target="_blank" rel="noopener noreffer">(1 mm) Buna-N O-Ring Cord Stock, 70A Durometer</a></p>
<ul>
<li>You will not need this if you&rsquo;re printing TPU gaskets or using some glue / caulk.</li>
<li>You will want some superglue or similar to help secure the gasket cord as you insert it into the channels.</li>
</ul>
</li>
<li>
<p>16-Gauge Speaker Wire Cable, ~18 inches/40 cm.</p>
<ul>
<li>The cable channel was specifically designed for 16 AWG speaker wire with the dimensions 6mm x 3mm. Any wire can work but if there&rsquo;s a gap between the wire jacket and the channel walls, you&rsquo;ll need to fill the gap / seal the channel.</li>
<li>18 inches will allow for some relative comfort during assembly. You can get away with less but it will make some things a bit harder than needed.</li>
</ul>
</li>
<li>
<p>28+ <code>M4x 12mm</code> screws.</p>
<ul>
<li>The original design didn&rsquo;t include any specific screws so I explicitly chose <a href="https://www.mcmaster.com/90666A115/" target="_blank" rel="noopener noreffer">McMaster # 90666A115</a>.</li>
<li>You will need at least 6 screws to secure the speaker to the sub and 11 to properly secure each panel to the subwoofer body.</li>
<li>If you choose to install the electronics enclosure at the rear of the sub, an additional 4 screws will be needed.</li>
</ul>
</li>
<li>
<p>RCA jack: there many different types out there but the parts are meant to be used with <a href="https://www.aliexpress.com/item/2255799906959194.html" target="_blank" rel="noopener noreffer">these jacks</a>.</p>
</li>
</ul>
<h3 id="amplifier-enclosure">Amplifier enclosure</h3>
<ul>
<li>The heart of the build is the <a href="https://www.aliexpress.com/item/2255801111428335.html" target="_blank" rel="noopener noreffer">Up2stream Amp 2.1</a> module.
<ul>
<li>The AliExpress listing has a few versions. I was not planning on using the IR remote and I didn&rsquo;t want an external PSU so I chose to order <em>just</em> the board.</li>
</ul>
</li>
</ul>
<p>Power Supply:</p>
<ul>
<li>The amplifier enclosure has room for a 24V 4.5A MeanWell <a href="https://www.aliexpress.com/item/3256803302407060.html" target="_blank" rel="noopener noreffer">LRS-100</a></li>
<li>To connect the DC output of the LRS-100, you&rsquo;ll need a <a href="https://www.amazon.com/gp/product/B0B37H6R56/" target="_blank" rel="noopener noreffer">female 3.96MM 2 pin</a> connector to mate with the DC in on the amplifier.</li>
</ul>
<p>Panel mount connectors:</p>
<ul>
<li>
<p>RCA jacks: I used the same part number from above, just ordered a few different colors for the R/L/S channels.</p>
</li>
<li>
<p>Powercon True. Rather than a traditional IEC style or simple DC barrel jack + external PSU, I opted for a <a href="https://en.wikipedia.org/wiki/Skookum" target="_blank" rel="noopener noreffer">Skookum</a> power connector. Like with the RCA jacks, there are many different parts from several manufacturers that will probably work but I specifically used <a href="https://www.aliexpress.com/item/2251832762646533.html" target="_blank" rel="noopener noreffer">this set from Ali Express</a>.</p>
</li>
<li>
<p>RJ45: There are likely several that will work, but I explicitly used <a href="https://www.aliexpress.com/item/2255799916665398.html" target="_blank" rel="noopener noreffer">this part from Ali Express</a>.</p>
</li>
<li>
<p>USB2.0: There are likely several that will work, but I explicitly used <a href="https://www.aliexpress.com/item/2255799916028028.html" target="_blank" rel="noopener noreffer">this part from Ali Express</a>.</p>
</li>
<li>
<p>USB extension cable: You can find all sorts of adapters in every conceivable orientation on Ali Express from stores like <a href="https://www.aliexpress.com/item/2255801102773472.html" target="_blank" rel="noopener noreffer">this</a>. For this particular project, you will need a 15 cm flat flex cable (<code>FFC</code>) and 2x of the &ldquo;straight&rdquo; USB male connectors.</p>
</li>
</ul>
<p>Screws:</p>
<ul>
<li>
<p>The amp enclosure uses 4x of the same McMaster #90666A115 for external mounting but any M4 screw could work here.</p>
</li>
<li>
<p>6x <code>M3x8mm</code> screws to hold the amplifier PCB to the internal midplate and PSU to the case. Specifically <a href="https://www.mcmaster.com/91290A113/" target="_blank" rel="noopener noreffer">McMaster #91290A113</a>.</p>
</li>
<li>
<p>4x <code>M4x50</code> screws to secure the lid. Specifically <a href="https://www.mcmaster.com/91292A140/" target="_blank" rel="noopener noreffer">McMaster #91292A140</a>.</p>
</li>
</ul>
<p>And it all fits together inside an enclosure like so:</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        The amp enclosure as seen from the front corner.
        
            
        
        </p> 
    </figcaption>
    
</figure>


<figure >

    
        
    

    

    <figcaption>
        
        <p>
        The amp enclosure as seen from the rear corner.
        
            
        
        </p> 
    </figcaption>
    
</figure>


<h2 id="procedure">Procedure</h2>
<p>To give you an idea of how things go together:</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        Viewed from the rear corner, the PCB (purple) sits on top of a midplate (green, highlighted) which sits on top of the power supply (also purple, bottom).
        
            
        
        </p> 
    </figcaption>
    
</figure>


<figure >

    
        
    

    

    <figcaption>
        
        <p>
        To make printing easier, the midplate is actually two components joined together by the two screws furthest from the knobs.
        
            
        
        </p> 
    </figcaption>
    
</figure>


<h3 id="print">Print</h3>
<p>Just a few things to note:</p>
<ul>
<li>The suggested/ideal print orientation should be fairly obvious.</li>
<li>Tolerances are reasonably tight, you&rsquo;ll need ~ .15mm tolerance.
<ul>
<li>Layer height, material, speed settings are up to you. All that matters is that you can achieve the ~.15mm tolerance.</li>
</ul>
</li>
</ul>
<div class="details admonition warning open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-exclamation-triangle fa-fw"></i>This will take a while!<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>With respect to the subwoofer skeleton and panels, at least.</p>
<p>Essentially, the more mass in the parts, the more energy will be required to make them rattle/flex/vibrate.
The less this happens, the less &ldquo;extra&rdquo; noise will be emitted by your subwoofer.
Following along with the original instructions for printing, I chose about 35% infill and 3 perimeters for the subwoofer skeleton. Using a .6mm nozzle and some other well tuned slicing settings, I was able to print the entire skeleton in about 40 hours using just over 1 kg of filament. I would plan on at least 80 if using a smaller nozzle with a finer layer height!</p>
</div>
        </div>
    </div>
<h4 id="prep-screw-holes--flashing">Prep screw holes &amp; flashing</h4>
<div class="details admonition info open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-info-circle fa-fw"></i>Intentionally undersized holes<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">Almost all screw holes on this build are intentionally undersized.
As a general preparation step, <strong><em>carefully</em></strong> drive the appropriate screw into each hole and then let it sit!</div>
        </div>
    </div>
<p>In the CAD model, almost all holes meant to receive a screw are intentionally undersized by about .3mm.
besides the general &lsquo;it&rsquo;s easier to expand the hole to the correct size than it is to shrink it&rsquo; reason, this is done for one key reason; it <strong>eliminates the need for dedicated screw thread hardware</strong>.</p>
<p>By intentionally undersigning the hole, you can guarantee there will be a ton of friction generated when inserting the screws for the first time.
The excess friction <em>will</em> soften the plastic in the vicinity of the screw threads which allows the plastic to form threads around the screw.</p>
<p>This is not without drawbacks, though <strong>so proper procedure is <em>critical</em> for making this work properly!</strong></p>
<p>You must take every precaution to ensure that:</p>
<ul>
<li>The screw is driven into the hole in a directly perpendicular direction.
<ul>
<li>As the plastic heats up, it becomes easier to knock the screw out of alignment and begin driving it at an angle.</li>
</ul>
</li>
<li>A constant (slow!) velocity should be used to drive the screw.
<ul>
<li>This can be done with hand tools but will result in a pretty tough arm workout! Consider using a power drill with a low speed / constant torque option!</li>
</ul>
</li>
<li>The threads of the screw will displace some plastic. The excess molten plastic is called <a href="https://en.wikipedia.org/wiki/Flash_%28manufacturing%29" target="_blank" rel="noopener noreffer">flashing</a> and it it almost guarantees that you&rsquo;ll need to do some post processing / cleanup of the screw holes.</li>
<li>The molten plastic forms screw threads more or less instantly&hellip; but they won&rsquo;t <em>stay formed</em> until the excess heat has dissipated and the material has solidified.
<ul>
<li>Do not remove any screws from the body until they are cool to the touch! This can take <em>several minutes</em>!</li>
</ul>
</li>
</ul>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        All 11(!) of the m4 screws driven into the sub body waiting for the plastic to set
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>After all 11 screws had cooled and the threads had formed, the screws were removed.
Nearly every one of the holes had some (small) build up of material:</p>
<figure >

    
        
    

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>Use a straight edge blade or scrape tool to remove the flashing bits.</p>
<figure >

    
        
    

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>In some cases, there may be some additional material that builds up on the screw threads themselves.
Simply use a different screw for final assembly or use scrape tool or flame to remove the excess material from the threads:</p>
<figure >

    
        
    

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>After the flashing is removed from around screw holes you should still be able to see threads within the hole but shouldn&rsquo;t be able to see/feel any protrusions <em>from</em> the hole:</p>
<figure >

    
        
    

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>Where possible, I have made the screw holes much deeper than strictly necessary.
As the screw drives deeper, the tip will push molten plastic into this &ldquo;well&rdquo;.</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        The extra depth on the screw hole gives the molten plastic somewhere to go.
        
            
        
        </p> 
    </figcaption>
    
</figure>


<h3 id="subwoofer-skeleton">Subwoofer Skeleton</h3>
<h4 id="gaskets">Gaskets</h4>
<p>Begin by driving the screws into the side panels and speaker driver then attach the gaskets.</p>
<p><figure >

    
        
    

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<figure >

    
        
    

    

    <figcaption>
        
        
    </figcaption>
    
</figure>

</p>
<div class="details admonition info open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-info-circle fa-fw"></i>Info<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">You do not need to press the gasket all the way up against the component; it will be compressed between the two components during final assembly.</div>
        </div>
    </div>
<div class="details admonition warning open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-exclamation-triangle fa-fw"></i>Secure the gasketed components to the body carefully<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">Rotate each screw a few turns before moving to the next one. Do this <a href="https://www.tyreplex.com/news/how-to-tighten-lug-nuts-on-a-car-the-criss-cross-pattern/" target="_blank" rel="noopener noreffer">in an alternating pattern similar to how you would tighten Lug Nuts on a car</a>. Failure to do so will likely result in the gasket being rotated out of place internally!</div>
        </div>
    </div>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        Be mindful of the gasket as you secure the panel to the subwoofer body. Too much torque/clamping force can cause the gasket to distort.
        
            
        
        </p> 
    </figcaption>
    
</figure>


<h4 id="speaker-wire">Speaker wire</h4>
<p>Solder ~14 inches speaker wire to the RCA jack then install in the housing.
Don&rsquo;t forget to use heat shrink tubing or similar to insulate/protect the electrical connections!</p>
<p>Pass the housing assembly through the speaker hole and the attach the driver and then housing to the back of the subwoofer.</p>
<figure >

    
        
    

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>Firmly press the speaker wire into the the cable channel and push any slack wire into the RCA jack housing.</p>
<div class="details admonition info open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-info-circle fa-fw"></i>Info<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">There should be - at most - a few inches / 15cm of slack wire. Any more than this and you&rsquo;ll run out of room inside the small housing!</div>
        </div>
    </div>
<p>Once the speaker and jack housing are attached to the subwoofer body, simply line up and then attach the panels with the gaskets.</p>
<p>Now is a good time to test that your soldering / connections are working!</p>
<p>If you elected to use the gasket cord material, you would need to spend a non-trivial amount of time carefully cutting and routing segments of the material to fit inside the channel.
You will almost certainly want to use superglue or similar to help you hold the material into the channel!</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        The speaker wire should press-fit into the cable channel more or less sealing it completely.
        
            
        
        </p> 
    </figcaption>
    
</figure>


<h3 id="amp">Amp</h3>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw"></i>Tip<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">Just like with the subwoofer components, you&rsquo;ll want to <a href="#prep-screw-holes--flashing" rel="">&ldquo;pre-thread&rdquo;</a> the various holes.</div>
        </div>
    </div>
<h4 id="prep">Prep</h4>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        Notice the holes on the left that have been &#34;rightsized&#34; during threading and the holes on the top right that are relatively deformed still.
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>For the various panel mounted jacks, there are small interior cavities designed to capture the nut.
This cavity is actually <em>oversized</em> in the CAD model but due to various printer/slicing factors it is almost certainly going to be a <strong>tight fit</strong>!</p>
<p>Align the nut with the cavity and then use the screw to pull the nut into the hole then tighten the screw all the way to pull the nuts into place:</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        After the screw has pulled the nut into place, it should stay put.
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>After the various holes have been prepared and the nuts have been fitted, you are ready for final assembly</p>
<h4 id="assemble">Assemble</h4>
<p>First, combine both parts of the midplate with the amp board. Set aside.</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        Pro tip: print the MAC addresses of a network device somewhere on the device... Also, don&#39;t put unique device IDs onto the internet!
        
            
        
        </p> 
    </figcaption>
    
</figure>


<h5 id="power">Power</h5>
<p>Solder mains wires to the Powercon receptacle and terminate with crimp connectors.
Secure the Powercon receptacle to the rear of the enclosure and then attach to the screw terminals on the PSU.</p>
<p>Lower the PSU into the enclosure and secure it with the two screws in opposite corners.
Start with the screw closest to the Powercon connector:</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        Room inside the enclosure is intentionally tight so do as much wiring/connecting as possible before you start securing things to the enclosure.
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>Then add the seconds screw in the opposite corner:</p>
<figure >

    
        
    

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>Take this opportunity to power up and confirm that the polarity and voltage is correct!</p>
<figure >

    
        
    

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<h5 id="amp-pcb">Amp PCB</h5>
<p>Push the three rotary encoders through the holes in the enclosure and then lower the midplate/PCB on top of the PSU.
Route the DC wires up and around to the DC plug on the PCB.</p>
<figure >

    
        
    

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>Install the RCA jacks and route wires as needed to the PCB.</p>
<figure >

    
        
    

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>Then connect both the USB and RJ54 jacks on the amp module to their respective panel mount jacks.
I forgot to get a picture of the USB cable but it works more or less the exact same way the ethernet cable does:</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        A 6 inch patch cable was quicker but a custom length cable would almost certainly look better. Good thing this will soon be hidden away!
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>Either remove the BT/WiFi antenna or secure it to the inside of the enclosure just above the LEDs (not pictured here).</p>
<p>And before attaching the lid, attach the knobs:</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        Don&#39;t forget the washer/nut!
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>And just like that, the complete sub and amp.</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        Subwoofer and amp enclosure mounted to the leg of my desk. Please ignore the mess of wires in the background!
        
            
        
        </p> 
    </figcaption>
    
</figure>


<h1 id="files-and-licenses">Files and licenses</h1>
<p>All the 3d printable files associated with this post are available from my <a href="https://www.printables.com/social/8405-rainb0w_wheez3/about" target="_blank" rel="noopener noreffer">printables.com</a> page:</p>
<ul>
<li>
<p><a href="https://www.printables.com/model/273285-modified-skeleton-waveguide-subwoofer-speaker" target="_blank" rel="noopener noreffer">Modified Skeleton Waveguide Subwoofer Speaker</a></p>
</li>
<li>
<p><a href="https://www.printables.com/model/273302-arylic-up2stream-amp-21-enclosure" target="_blank" rel="noopener noreffer">Arylic Up2Stream Amp 2.1 enclosure</a></p>
</li>
</ul>
<p>On that page, you will find a list of files like:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">‚ùØ tree
</span></span><span class="line"><span class="cl">.
</span></span><span class="line"><span class="cl">‚îú‚îÄ‚îÄ amp-enclosure
</span></span><span class="line"><span class="cl">‚îÇ¬†¬† ‚îú‚îÄ‚îÄ amp-box-lid.step
</span></span><span class="line"><span class="cl">‚îÇ¬†¬† ‚îú‚îÄ‚îÄ amp-midplate-1.step
</span></span><span class="line"><span class="cl">‚îÇ¬†¬† ‚îú‚îÄ‚îÄ amp-midplate-2.step
</span></span><span class="line"><span class="cl">‚îÇ¬†¬† ‚îú‚îÄ‚îÄ amp-pcb.step
</span></span><span class="line"><span class="cl">‚îÇ¬†¬† ‚îî‚îÄ‚îÄ amp-shell.step
</span></span><span class="line"><span class="cl">‚îî‚îÄ‚îÄ sub
</span></span><span class="line"><span class="cl">    ‚îú‚îÄ‚îÄ gasket-bottom.step
</span></span><span class="line"><span class="cl">    ‚îú‚îÄ‚îÄ gasket-speaker.step
</span></span><span class="line"><span class="cl">    ‚îú‚îÄ‚îÄ gasket-top.step
</span></span><span class="line"><span class="cl">    ‚îú‚îÄ‚îÄ main-body.step
</span></span><span class="line"><span class="cl">    ‚îú‚îÄ‚îÄ panel-bottom.step
</span></span><span class="line"><span class="cl">    ‚îú‚îÄ‚îÄ panel-top.step
</span></span><span class="line"><span class="cl">    ‚îú‚îÄ‚îÄ rca-enclosure.step
</span></span><span class="line"><span class="cl">    ‚îî‚îÄ‚îÄ sub-components v28.f3z
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>All photos used in this post are mine and are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener noreffer">CC BY-NC-SA 4.0</a>.</p>
</li>
<li>
<p>Everything within the <code>amp-enclosure</code> is my original work. These files are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener noreffer">CC BY-NC-SA 4.0</a>.</p>
</li>
<li>
<p>Everything in the <code>sub</code> directory is based off of the fusion360 file from <a href="https://www.printables.com/social/107245-zx82net/about" target="_blank" rel="noopener noreffer">zx82net</a> which  is licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener noreffer">CC BY-NC-SA 4.0</a>. Likewise, my modifications fall under the same license.</p>
<ul>
<li>My modifications in &lsquo;source&rsquo; formate are contained in the <code>sub-components v28.f3z</code> archive but to make printing easier, individual components are exported as STEP files.</li>
</ul>
</li>
</ul>
<h2 id="supporting-files">Supporting files</h2>
<p>In building the various parts in the <code>amp-enclosure</code> directory, I relied on the following additional models:</p>
<ul>
<li>
<p><a href="https://grabcad.com/library/tang-band-w3-1876s-3-subwoofer-1" target="_blank" rel="noopener noreffer">Tang Band W3-1876S 3&quot; Subwoofer</a> by <a href="https://grabcad.com/george.todd-1" target="_blank" rel="noopener noreffer">George Todd</a></p>
</li>
<li>
<p><a href="https://grabcad.com/library/fonte-chaveada-bivolt-24vcc-4a-100w-1" target="_blank" rel="noopener noreffer">Fonte Chaveada Bivolt 24Vcc 4A 100W</a> by <a href="https://grabcad.com/eliandro.baseggio--1" target="_blank" rel="noopener noreffer">Eliandro Baseggio </a></p>
</li>
</ul>
]]></description></item><item><title>Enhanced Home Assistant Switch Plate (HASP)</title><link>https://karlquinsland.com/enhanced-homeassistantswitchplate/</link><pubDate>Thu, 01 Oct 2020 00:00:00 +0000</pubDate><author>Author</author><guid>https://karlquinsland.com/enhanced-homeassistantswitchplate/</guid><description><![CDATA[<p>The <a href="https://github.com/aderusha/HASwitchPlate/" target="_blank" rel="noopener noreffer">HASwitchPlate</a> project by <code>aderusha</code> is brilliant. He&rsquo;s managed to arrange some relatively cheap commodity hardware into a package that conveniently fits into a prime location for interacting with Home Automation - the light switch. The entire package sips power off of the already present mains wiring and connects to any MQTT broker via the esp8266 chip. As the HASP was designed to be used with Home Assistant, the humble 2.4 inch LCD transforms into an accessible control surface for an incredibly powerful home automation platform!</p>
<h2 id="modifications">Modifications</h2>
<p>First, a brief word about indemnification:</p>
<blockquote>
<p>All instructions and information on this page is purely for informational purposes.</p>
<p>The original HASP and my modifications come with neither an expressed or implied warranty. By constructing your own, you assume all risk.</p>
</blockquote>
<h3 id="software">Software</h3>
<p>The few software modifications I&rsquo;ve made to the HASP project are relatively small and don&rsquo;t implement anything significant or new; they are &lsquo;quality of life&rsquo; improvements that target small portions of the code.</p>
<p>I strongly believe that the hardest part of using a given piece automation technology should be taking it out of the box. To wit, Home Assistant has robust - <a href="https://community.home-assistant.io/t/ability-to-set-entity-icon-through-mqtt-discovery/224538" target="_blank" rel="noopener noreffer">but not perfect</a> - support for <a href="Https://www.home-assistant.io/docs/mqtt/discovery/" target="_blank" rel="noopener noreffer">automatic device discovery and configuration via MQTT</a>. Once a device has connected to the MQTT broker, it simply publishes a document detailing how HA should interface with the device. It&rsquo;s a wonderful experience to see a new device connect to the network for the first time and just a few seconds later the new device is registered in HA, waiting for you to start integrating it into automations ü§©ü§§.</p>
<p>While there are quite a few sensors/stateful-attributes in the original HASP code, none of them automatically present themselves to Home Assistant üòî. I set about fixing that to the best of my abilities. Unfortunately, the LCD backlight is the only peripheral that could be &lsquo;upgraded&rsquo; to automatic configuration without making a ton of changes to the original code base.</p>
<p>All of the hardware modifications detailed below automatically configure themselves with Home Assistant.</p>
<p>The original HASP code base uses allocates too little memory for storing MQTT credentials. Any username or password longer than 31 bytes/characters would be <strong>silently</strong> truncated on save. Despite the &lsquo;credentials saved, rebooting&rsquo; message, the next screen was always a &lsquo;failure to connect&rsquo; message. Frustrating! The pull request to address this is <a href="https://github.com/aderusha/HASwitchPlate/pull/117" target="_blank" rel="noopener noreffer">here</a>.</p>
<h3 id="hardware">Hardware</h3>
<p>The HASP does support dimming the LCD, but it has no awareness of ambient light levels. This makes it rather difficult to deploy a HASP in any &rsquo;light sensitive&rsquo; location like a bedroom or media room without another device to cue Home Assistant and lower the LCD brightness. Workable, but too high friction to be ideal.</p>
<p>Light Dependent Resistors - <a href="https://en.wikipedia.org/wiki/Photoresistor" target="_blank" rel="noopener noreffer">LDR</a> for short - are a very cheap and compact way to get an approximate light level. Fortunately, the analogue pin is broken out on the <a href="https://github.com/aderusha/HASwitchPlate/tree/master/PCB" target="_blank" rel="noopener noreffer">PCB</a> so a simple <a href="https://en.wikipedia.org/wiki/Voltage_divider#Resistive_divider" target="_blank" rel="noopener noreffer">resistive divider</a> and a few lines of code are all that&rsquo;s needed to get a a number that linearly correlates to the level of light hitting the face plate.</p>
<p>It just so happens that there is <em>just enough</em> room to fit a LDR beneath the surface of the decor plate and out of the way of the LCD. As (not) shown in the picture above, there is no way to tell that the LDR is embedded beneath the surface.</p>
<p>The range of values from the LDR isn&rsquo;t great, but they are adequate enough to reliably detect if the HASP is in a darkened room.</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        ignore the spikes just before noon, those are due to to testing with a flash light
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>While researching potential ways to measure the ambient brightness, I stumbled across the <a href="https://shop.homeseer.com/products/z-wave-dimmer-switch" target="_blank" rel="noopener noreffer">HomeSeer HS-WD200+</a> which features a rather novel way to convey additional information to a user; seven RGB leds üòç. It&rsquo;s a brilliant use of such a simple and ubiquitous technology that I&rsquo;m not really sure why every smart switch doesn&rsquo;t do this!</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        HomeSeer&#39;s WS200 has a delightful innovation... RGB LEDs!
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>With <em>zero</em> room to spare, four LEDs can fit into a small cavity between the LCD and decor plate surface. Like with the LDR, there is no visual &rsquo;tell&rsquo; that there are LEDs beneath the surface&hellip; unless they&rsquo;re on, of course.</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        Ignore the dirt on the switch. Notice how you can&#39;t tell there&#39;s an LDR beneath the surface
        
            
        
        </p> 
    </figcaption>
    
</figure>


<h4 id="the-enclosure">The enclosure</h4>
<p>Without consuming more than 1 <a href="https://diy.stackexchange.com/questions/11654/what-does-1-gang-2-gang-and-so-forth-mean-when-talking-about-electrical-bo" target="_blank" rel="noopener noreffer">gang</a>, the only realistic way to get the wires for the new components to the HASP PCB is to go around the edge of the LCD&rsquo;s PCB. This is accomplished with two small &lsquo;channels&rsquo; that slightly protrude in the vertical directions from the lip around the LCD and into the box that encloses the electronics.</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        Section analysis from f360 showing small channels around the LCD for wires to LDR and LEDs
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>Additionally, I found that the original printed parts do not properly fit in the <a href="https://www.amazon.com/Thomas-Betts-B232A-UPC-Carlon-Bulk/dp/B000GAWYZ8/" target="_blank" rel="noopener noreffer">two gang electrical box</a> where I intended to deploy the HASP.</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        The only way to fit the HASP in my 2-gang electric boxes is to cut out a small section
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>In total, the modifications required to accommodate the LDR and LED tape are relatively small, but <a href="https://github.com/aderusha/HASwitchPlate/issues/116" target="_blank" rel="noopener noreffer">I had to re-create the model from scratch</a> so several things are likely a bit different from the original model. It should be relatively easy to port the modifications to the other multi-gang configurations that the original HASP supports.</p>
<p>The <code>.step</code> and <code>.f3z</code> files are available should you want to make the necessary modifications to other switch plate configurations.
The <code>.stl</code> and <code>.3mf</code> files are available for easy printing.</p>
<p>All files available <a href="#files" rel="">below</a> and on <a href="https://github.com/kquinsland/HASwitchPlate/tree/master/3D_Printable_Models/enhanced-HASP" target="_blank" rel="noopener noreffer">github</a>.</p>
<h2 id="assembly">Assembly</h2>
<p>The steps below are meant to be followed between the original steps <a href="https://github.com/aderusha/HASwitchPlate/blob/master/Documentation/03_Electronics_Assembly.md" target="_blank" rel="noopener noreffer"><code>03_Electronics_Assembly</code></a> and <a href="https://github.com/aderusha/HASwitchPlate/blob/master/Documentation/04_Project_Enclosure.md" target="_blank" rel="noopener noreffer"><code>04_Project_Enclosure</code></a>.</p>
<p>In short, you&rsquo;ll want to assemble and test the HASP PCB as in the original instructions, but use the steps below as a substitute for the enclosure assembly process.</p>
<h3 id="additional-materials">Additional Materials</h3>
<p>In addition to everything in the original BOM, you&rsquo;ll need:</p>
<ul>
<li>
<p>A LDR. Be aware that LDRs come in many different shapes and sizes and have different resistance values. Space is rather tight, so the form factor matters a lot more than the resistance values or band of light that the LDR responds to. If you use a different LDR, you may need to adjust the resistor value to better match your LDR. You can get 50 of the exact model GL5516 that I used for less than $2 <a href="https://s.click.aliexpress.com/e/_dUjV8Rn" target="_blank" rel="noopener noreffer">here</a>.</p>
</li>
<li>
<p>A 10KŒ© resistor to form a simple resistive divider with the LDR. This will better map the the full range of the LDR to the 0-1 volt range that the ESP8266 ADC uses. Space is rather limited so the smaller the resistor, the better; no need for anything larger than 1/4 Watt. You can get a 10-pack of 10KŒ© resistors <a href="https://rover.ebay.com/rover/1/711-53200-19255-0/1?mpre=https%3A%2F%2Fwww.ebay.com%2Fitm%2F10-Pcs-1-8-Watt-1-Metal-Film-Resistor-Choose-you-own-values-USA-SELLER%2F302971259661&amp;campid=5338745533&amp;toolid=10001&amp;customid=" target="_blank" rel="noopener noreffer">here</a></p>
</li>
<li>
<p>WS2812B LED tape <strong>featuring the 3535SMD package</strong>. The &lsquo;regular size&rsquo; LED package <em>will <strong>not</strong> fit</em> so make sure you use the smaller <code>3535SMD</code> package! Beyond that, aim for LED tape that is no wider than ~8mm and has highest density possible. After quite some searching, the best that I could find is 8mm wide tape with a density of 144 LEDs per meter. Unfortunately, they don&rsquo;t sell LEDs 4 at a time, so you can pick up 1 meter of the exact LEDs I used <a href="https://rover.ebay.com/rover/1/711-53200-19255-0/1?mpre=https%3A%2F%2Fwww.ebay.com%2Fitm%2FNarrow-DC-5V-WS2812B-Led-Strip-Individually-Addressable-WS2812-Led-pixel-Light%2F254647279915%3Fhash%3Ditem3b4a29212b%3Ag%3A9D8AAOSwIZ5fBTn7&amp;campid=5338745533&amp;toolid=10001&amp;customid=pixel_tape" target="_blank" rel="noopener noreffer">here</a>.</p>
</li>
<li>
<p>Several centimeters of very fine gauge wire. Ideally, multiple colors so you can keep organized but this is not required. Again, space is rather tight, so AWG 28 or 30 is ideal. Much bigger than that and you&rsquo;ll likely have issues fitting everything together. You can get a 1m length of multiple colors <a href="https://rover.ebay.com/rover/1/711-53200-19255-0/1?mpre=https%3A%2F%2Fwww.ebay.com%2Fitm%2FNarrow-DC-5V-WS2812B-Led-Strip-Individually-Addressable-WS2812-Led-pixel-Light%2F254647279915%3Fhash%3Ditem3b4a29212b%3Ag%3A9D8AAOSwIZ5fBTn7&amp;campid=5338745533&amp;toolid=10001" target="_blank" rel="noopener noreffer">here</a>.</p>
</li>
<li>
<p>HeatShrink Tubing (HST). The exact diameter needed will depend on how compact your soldering is and the size of resistor used. Multiple colors will help keep things organized, but that&rsquo;s not required. I suggest a kit so you can get the  perfect diameter  and length. You can get a kit <a href="https://rover.ebay.com/rover/1/711-53200-19255-0/1?mpre=https%3A%2F%2Fwww.ebay.com%2Fitm%2F360pcs-2-1-Heat-Shrink-Tube-Tubing-Sleeving-Wrap-Wire-cable-Insulated-Assorted%2F224122863249%3Fhash%3Ditem342ec37e91%3Ag%3AMbcAAOSwXGhfPCNK&amp;campid=5338745533&amp;toolid=10001" target="_blank" rel="noopener noreffer">here</a>.</p>
</li>
<li>
<p>Standard 2.54mm pin headers. You can get a set of male and female headers <a href="https://rover.ebay.com/rover/1/711-53200-19255-0/1?mpre=https%3A%2F%2Fwww.ebay.com%2Fitm%2F10pcs-Male-Header-1x40-2-54mm-40-Pin-PCB-Through-Hole-Arduino-and-Pi%2F223105297271%3Fepid%3D28022683725%26hash%3Ditem33f21cab77%3Ag%3A~X8AAOSwvFpbdZWA&amp;campid=5338745533&amp;toolid=10001" target="_blank" rel="noopener noreffer">here</a>.</p>
</li>
</ul>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        All the components needed for assembly
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p><strong>Note</strong>: Where possible, I&rsquo;ve used commission links. The links don&rsquo;t raise the price of any item, they simply let the retailer know that I&rsquo;m the reason for your business. In return, I get a small cut of your purchase as a &rsquo;thanks&rsquo; from the retailer. If you&rsquo;re not comfortable with that, you can use a URL unwinding service to get the &lsquo;raw&rsquo; product link and drop the attribution/commission part.</p>
<h3 id="brass-inserts">Brass inserts</h3>
<p>The original instructions suggest using glue to secure the brass inserts to the face plate, but I suggest using either a lighter or a very fine tip soldering iron to heat up the brass insert. A hot insert will melt the surrounding plastic which will make for a much stronger joint.  The modified version of the HASP face plate used in this guide intentionally features holes slightly too small for the brass inserts so glue won&rsquo;t be enough.</p>
<p>Fully insert the 20mm screw into the brass insert, use pliers to grasp the screw and apply heat with a lighter for a few seconds and then insert into the face plate. Make sure that the screw is <strong>completely</strong> inserted into the insert so that molten plastic can&rsquo;t flow into the insert. If molten plastic enters and cools on the threads, it will be rather difficult to later screw things together!</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        Molten plastic can&#39;t flow into a filled insert
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>As the inserts cool, you&rsquo;ll have a few seconds to make adjustments to their orientation before they become fixed. Make sure that each screw is vertical and cool to the touch before moving on to the wiring harness.</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        screws make it easy to perform final alignment on inserts and act as a heatsink
        
            
        
        </p> 
    </figcaption>
    
</figure>


<h3 id="wire-harness">Wire Harness</h3>
<p>There are only six wires for the two components and the LED tape is the only component where polarity matters. A table mapping each pin on the HASP PCB to each component lead is below.</p>
<table>
<thead>
<tr>
<th>HASP PCB Pin</th>
<th>Component</th>
</tr>
</thead>
<tbody>
<tr>
<td>GND</td>
<td>LED Tape, 10KŒ© resistor</td>
</tr>
<tr>
<td>+5V</td>
<td>LED Tape VCC in</td>
</tr>
<tr>
<td>+3.3V</td>
<td>LDR</td>
</tr>
<tr>
<td>A0</td>
<td>LDR &amp; 10KŒ© resistor junction</td>
</tr>
<tr>
<td>D0</td>
<td>N/A</td>
</tr>
<tr>
<td>D1</td>
<td>LED Tape CLK/DTA  in</td>
</tr>
<tr>
<td>D2</td>
<td>N/A</td>
</tr>
<tr>
<td>DBG</td>
<td>N/A</td>
</tr>
</tbody>
</table>
<p>You are <strong>strongly</strong> encouraged to test / check your work after each step with a simple multimeter. Complete assembly involves irreversible steps, like shrinking HST. If you make a mistake, it&rsquo;s best to catch it before &lsquo;finalizing&rsquo; things as you&rsquo;re almost certainly going to have to destroy the component and or wiring harness to repair it.</p>
<p>Additionally, you can flash my <a href="https://github.com/kquinsland/HASwitchPlate" target="_blank" rel="noopener noreffer">modified HASP firmware</a> to a fully assembled HASP device and use that as a testing device. On boot up, the modified firmware briefly flashes each LED in sequence. About every 10 seconds after boot, the LDR value will be read and published to MQTT. Cover the LDR with your hand and check your MQTT broker or HA to confirm that the value changes significantly between exposed and covered states.</p>
<h5 id="ldr">LDR</h5>
<p>Fit the LDR into the face plate and position the leads in the channel under and to the top of the LCD PCB. Then trim the excess length off of the LDR leads so that they extend &lsquo;beyond&rsquo; the LCD by about 8mm or so.</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        LDR under the LCD w/ trimmed leads...
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>Remove the LDR from the face plate and straighten the leads out. Lay the LDR, resistor, and wire out as shown below. Use this time to cut the HST down to size so everything but the leg of the LDR that joins the resistor can be covered. <strong>Note:</strong> the leads on the resistor have also been trimmed down to ~15mm to better fit.</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        rough layout of LDR harness
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>It&rsquo;s probably going to be easiest to start with the &lsquo;supply&rsquo; wire which runs directly from the HASP PCB&rsquo;s +3.3v pin to the LDR. As space is exceedingly tight, there is no room for overly large solder joints. Carefully wrap the wire around the lead and apply just enough solder to make good electrical contact. Once the supply wire has been soldered to the LDR, affix the HST so the entirety of the lead and solder joint are protected.</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        strip ~1cm off the end of the wire, wrap around the lead, then solder
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>Repeat the same procedure with the lead of the resistor that will go directly to the ground. Affix the HST after the solder joint has cooled.</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        No room for mechanically strong solder joints
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>Use the same &lsquo;wrap&rsquo; technique with the remaining leads from the LDR and the resistor. Apply just enough solder for good electrical contact between the signal wire and the two leads of the LDR and resistor.</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        same wrapping technique, just with two leads this time
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>After the solder joint cools, cover the entire LDR/Resistor assembly in HST so there is no exposed wire or component lead.</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        get everything nicely protected behind HST
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>Set the LDR component aside for now and move on to the LED tape.</p>
<h5 id="leds">LEDs</h5>
<p>If you&rsquo;ve not already trimmed the LED tape to fit in the face plate, do so now. Leave yourself as much room as needed to solder on the one side where you&rsquo;ll need to feed power and data in.</p>
<p>The LED tape has incredibly small pads so take your time on this. You have about 5 cubic millimeters <em>total</em> for the three solder joints on the LED tape. Solder just enough for electrical contact, there will be no significant mechanical stress. <strong>Note:</strong> The arrows printed on the strip point in the direction of data flow; combined with the off-center placement of the LED packages, there is only one way to properly install the LED tape in  the decor plate.</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        know which way the LED tape wires will need to point to make it into the &#39;channel&#39; prior to soldering
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>After soldering the power, signal and ground wires, flatten them and gently shape them so they align and flow into the channel on the face plate in a manner similar to the LDR. For a bit of mechanical robustness, consider braiding the wires together.</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        twist the wires together for a more compact and robust cable
        
            
        
        </p> 
    </figcaption>
    
</figure>


<h5 id="pin-header">Pin Header</h5>
<p>After soldering wires onto the two components, all that&rsquo;s left is soldering the wires to the correct pins on the pin header.</p>
<p>One at a time, carefully take the pins out of the plastic &lsquo;frame&rsquo;. This is to prevent the heat from the soldering and HST steps from melting the plastic. Consider marking the pin with the location of the &lsquo;frame&rsquo; so you don&rsquo;t take up too much room with the solder joint. You will need the &lsquo;business end&rsquo; of the pin to make good contact with the socket on the HASP board; this is quite difficult if most of the pin can&rsquo;t be slid through the &lsquo;frame&rsquo; because of an excessively large solder joint!</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        remove the pin from the plastic &#39;frame&#39; and carefully solder the wires to the pins
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>Make sure that HST is on the wire(s) <em>before</em> soldering! After the solder joint cools, slip the HST over the solder joint and apply heat until the joint is covered. Repeat this process for the remaining pins. There will be three &lsquo;unused&rsquo; pins that you can just ignore.</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        A few pins are not needed
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>When all the wires have been soldered and covered,  you&rsquo;ll have something that looks like this:</p>
<figure >

    
        
    

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>Double check electrical connections and then combine the PCB, enclosure, plate and harness. Carefully align the &lsquo;channels&rsquo; for LDR and LED wires:</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        Align and ensure no pinched wires!
        
            
        
        </p> 
    </figcaption>
    
</figure>


<h3 id="printing">Printing</h3>
<p>In the electrical boxes there&rsquo;s absolutely no room to spare, so all parts are designed to fit together with <strong>very</strong> tight clearances. Print as slow as you need to in order too achieve very good dimensional accuracy. Like with the brass inserts, the various screw holes are intentionally undersized for better thread engagement.</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        The obvious orientation is the best, no supports needed
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>The HASP does run a bit warm, but not any warmer than other smart switches with similar form-factor. PLA will likely be fine unless you in tend to deploy the HASP in a particularly hot location.</p>
<h4 id="thermals">Thermals</h4>
<p>In testing, the parts of the HASP ran ~20¬∫ above ambient. Most of that heat comes from the small AC-&gt;DC converter and the LCD. Surprisingly, the ESP8266 does not emit that much heat. Overall, nothing particularly alarming, especially when the HASP is deployed into a larger multi-gang electrical box with with plenty of air to radiate heat into. Apologies in advance for the mixed ¬∫C/¬∫F units.</p>
<p><figure >

    
        
    

    

    <figcaption>
        
        <p>
        HASP removed from electrical box, heat from the AC-DC converter radiating through the enclosure
        
            
        
        </p> 
    </figcaption>
    
</figure>


<figure >

    
        
    

    

    <figcaption>
        
        <p>
        similar to first picture, parts inside enclosure radiate heat through the enclosure, bringing it to about 20 degrees above ambient temperature
        
            
        
        </p> 
    </figcaption>
    
</figure>


<figure >

    
        
    

    

    <figcaption>
        
        <p>
        there are clear hot-spots on the enclosure that match up with the location of the ESP and the AC-DC converter
        
            
        
        </p> 
    </figcaption>
    
</figure>


<figure >

    
        
    

    

    <figcaption>
        
        <p>
        Less heat is radiated through the front of the HASP; the LCD backlight and embedded LEDs are clearly the warmest components
        
            
        
        </p> 
    </figcaption>
    
</figure>

</p>
<p>The tiny PNP transistor that toggles the LCD power is the hottest component, by far. Everything else has a relatively consistent temperature:</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        PNP Transistor is clearly warmest internal component, ESP8266 cooler than expected
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>When installed in wall, the HASP is radiating heat into the electrical box and through neighboring switches:</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        a little bit of ambient heat radiating through the gap between LCD and switch as well as through the switch
        
            
        
        </p> 
    </figcaption>
    
</figure>


<h2 id="future-work">Future work</h2>
<p>I did accomplish my two main goals:</p>
<ol>
<li>Ambient light sensor for more responsive backlight control</li>
<li>HomeSeer-like LEDs for additional information display</li>
</ol>
<p>However, there&rsquo;s a few aspects of the HASP that i&rsquo;d like to further improve:</p>
<ul>
<li>
<p>Increased automatic configuration w/ the HASP. There&rsquo;s still a non-trivial amount of work required to set up a HASP with Home Assistant. The HASP device has many different attributes that could be exposed to Home Assistant automatically. E.G.: The HASP will periodically check for a firmware update; the HASP should configure Home Assistant with a <a href="https://www.home-assistant.io/integrations/binary_sensor.mqtt/#configuration" target="_blank" rel="noopener noreffer"><code>binary_sensor</code></a> that indicates if there&rsquo;s a firmware update available.</p>
</li>
<li>
<p>Some of the automations that live in Home Assistant to manage button presses / update screen content could  probably be re-factored down to a few generic scripts and services.</p>
</li>
<li>
<p>The display uses a <a href="https://forum.digikey.com/t/resistive-touch-vs-capacitive-touch-whats-the-difference/1063" target="_blank" rel="noopener noreffer">resistive matrix</a> to detect touch events. Resistive screens, while cheap, are a bit finnicky and inferior to the more consistent and precise capacitive touch screen tech. If Nextion ever makes a capacitive version of the NX3224T024, then it would be an instant upgrade!</p>
</li>
<li>
<p>Similarly, the viewing angle on the LCD is&hellip; not great. The HASP, like most light switches, is at a convenient height for hands&hellip; not eyes. If you&rsquo;re standing relatively close to the HASP, you&rsquo;ll be looking down at the screen with quite a steep angle. Depending on the current screen brightness and colors, this may result in a washed out and illegible screen.</p>
</li>
<li>
<p>Better LED diffusion. There&rsquo;s not a lot of space for light pipes or similar, but I would like to find a better way of diffusing the LEDs. Or even to fit a masking layer between the LEDs and the plate, so the effect would be akin to a back-lit silhouette.</p>
</li>
<li>
<p>Effects for the LEDs. Right now, the LEDs only support on/off/brightness commands. Their ability to passively indicate information would be enhanced if Home Assistant could send &rsquo;effect&rsquo; commands, too. E.G.: Rather than HA having to send a constant stream of color/brightness commands to fade between blue, green, yellow, purple, simply send a <code>fade(2s) blue, green, yellow, purple</code> command.</p>
</li>
<li>
<p>There&rsquo;s plenty of spare room on the HASP PCB for the 10KŒ© resistor. This would simplify the creation of the wiring harness. I&rsquo;ve been meaning to learn KiKad, this might be a very gentle way to start learning it. ü§î</p>
</li>
<li>
<p>Enclose the LED tape 100% inside the HASP. This version works well and the small &lsquo;hole&rsquo; in the enclosure. I don&rsquo;t think there&rsquo;s any safety concern w/ the current design, but I&rsquo;d still like to have the low voltage stuff 100% blocked off from thee electrical box&hellip;</p>
</li>
</ul>
<h2 id="files">Files</h2>
<p>For archive / posterity, all source files are included here. Unless otherwise explicitly stated otherwise, all files below are licensed as <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener noreffer">Creative Commons Attribution-NonCommercial-ShareAlike</a> (CC BY-NC-SA).</p>
<ul>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/CAD-channel-profile.jpg">
                    
                </a>
                
                <figcaption>
                    <small>Section analysis from f360 showing small channels around the LCD for wires to LDR and LEDs</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/electric-box-clearance.jpg">
                    
                </a>
                
                <figcaption>
                    <small>The only way to fit the HASP in my 2-gang electric boxes is to cut out a small section</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/assembly/00.prep-electronics.jpg">
                    
                </a>
                
                <figcaption>
                    <small>All the components needed for assembly</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/assembly/01.prep-brass-inserts.jpg">
                    
                </a>
                
                <figcaption>
                    <small>Molten plastic can&#39;t flow into a filled insert</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/assembly/02.inserts-cooling.jpg">
                    
                </a>
                
                <figcaption>
                    <small>screws make it easy to perform final alignment on inserts and act as a heatsink</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/assembly/03.ldr-position.jpg">
                    
                </a>
                
                <figcaption>
                    <small>LDR under the LCD w/ trimmed leads...</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/assembly/04.wire-harness.jpg">
                    
                </a>
                
                <figcaption>
                    <small>rough layout of LDR harness</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/assembly/05.ldr-wire-wrap.jpg">
                    
                </a>
                
                <figcaption>
                    <small>strip ~1cm off the end of the wire, wrap around the lead, then solder</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/assembly/06.ldr-ground.jpg">
                    
                </a>
                
                <figcaption>
                    <small>No room for mechanically strong solder joints</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/assembly/07.ldr-signal.jpg">
                    
                </a>
                
                <figcaption>
                    <small>same wrapping technique, just with two leads this time</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/assembly/08.hst.jpg">
                    
                </a>
                
                <figcaption>
                    <small>get everything nicely protected behind HST</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/assembly/09.wire-alignment.jpg">
                    
                </a>
                
                <figcaption>
                    <small>know which way the LED tape wires will need to point to make it into the &#39;channel&#39; prior to soldering</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/assembly/10.twisted-cable.jpg">
                    
                </a>
                
                <figcaption>
                    <small>twist the wires together for a more compact and robust cable</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/assembly/11.process.jpg">
                    
                </a>
                
                <figcaption>
                    <small>remove the pin from the plastic &#39;frame&#39; and carefully solder the wires to the pins</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/assembly/12.unused-pins.jpg">
                    
                </a>
                
                <figcaption>
                    <small>A few pins are not needed</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/assembly/13.harness-finished.jpg">
                    
                </a>
                
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/assembly/14.finished.jpg">
                    
                </a>
                
                <figcaption>
                    <small>Align and ensure no pinched wires!</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/installed.jpg">
                    
                </a>
                
                <figcaption>
                    <small>If the LEDs weren&#39;t on, you&#39;d never know they were there üòä</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/ldr-graph.jpg">
                    
                </a>
                
                <figcaption>
                    <small>ignore the spikes just before noon, those are due to to testing with a flash light</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/models/box.step">
                <i class="far fa-file-code"></i>
                models/box.step:
                
                <small style="font-family:'Lucida Console', monospace">step</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/models/box.stl">
                <i class="far fa-file-code"></i>
                models/box.stl:
                
                <small style="font-family:'Lucida Console', monospace">stl</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/models/combined.3mf">
                <i class="far fa-file-archive"></i>
                models/combined.3mf:
                
                <small style="font-family:'Lucida Console', monospace">3mf</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/models/combined.step">
                <i class="far fa-file-code"></i>
                models/combined.step:
                
                <small style="font-family:'Lucida Console', monospace">step</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/models/enhanced-HASP.f3z">
                <i class="far fa-file-"></i>
                models/enhanced-HASP.f3z:
                
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/models/plate.step">
                <i class="far fa-file-code"></i>
                models/plate.step:
                
                <small style="font-family:'Lucida Console', monospace">step</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/models/plate.stl">
                <i class="far fa-file-code"></i>
                models/plate.stl:
                
                <small style="font-family:'Lucida Console', monospace">stl</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/prototype-leds.jpg">
                    
                </a>
                
                <figcaption>
                    <small>Ignore the dirt on the switch. Notice how you can&#39;t tell there&#39;s an LDR beneath the surface</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/suggested-print.jpg">
                    
                </a>
                
                <figcaption>
                    <small>The obvious orientation is the best, no supports needed</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/thermals/01.removed-side-rear.png">
                    
                </a>
                
                <figcaption>
                    <small>HASP removed from electrical box, heat from the AC-DC converter radiating through the enclosure</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/thermals/02.removed-top-side.png">
                    
                </a>
                
                <figcaption>
                    <small>similar to first picture, parts inside enclosure radiate heat through the enclosure, bringing it to about 20 degrees above ambient temperature</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/thermals/03.removed-rear-side.png">
                    
                </a>
                
                <figcaption>
                    <small>there are clear hot-spots on the enclosure that match up with the location of the ESP and the AC-DC converter</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/thermals/04.front-leds-on.png">
                    
                </a>
                
                <figcaption>
                    <small>Less heat is radiated through the front of the HASP; the LCD backlight and embedded LEDs are clearly the warmest components</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/thermals/05.internals.png">
                    
                </a>
                
                <figcaption>
                    <small>PNP Transistor is clearly warmest internal component, ESP8266 cooler than expected</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/thermals/06.installed-markup.jpg">
                    
                </a>
                
                <figcaption>
                    <small>a little bit of ambient heat radiating through the gap between LCD and switch as well as through the switch</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/enhanced-homeassistantswitchplate/images/HS-WD200-Modes.jpg">
                    
                </a>
                
                <figcaption>
                    <small>HomeSeer&#39;s WS200 has a delightful innovation... RGB LEDs!</small>
                </figcaption>
                
            </figure>

        
    </li>
    
</ul>

]]></description></item><item><title>Adding an airborne particulate mater sensor to WS3 Weather Station</title><link>https://karlquinsland.com/ws3-weather-station-pm25-sensor/</link><pubDate>Thu, 27 Aug 2020 00:00:00 +0000</pubDate><author>Author</author><guid>https://karlquinsland.com/ws3-weather-station-pm25-sensor/</guid><description><![CDATA[<p>A while back, I <a href="https://github.com/kquinsland/ws3-to-esphome-bridge/" target="_blank" rel="noopener noreffer">posted a small bit of code</a> that could decode the data from the ubiquitous WS3 Weather Station and make it accessible to the amazing <a href="https://www.home-assistant.io/" target="_blank" rel="noopener noreffer">HomeAssistant</a> via the wonderful <a href="https://esphome.io/" target="_blank" rel="noopener noreffer">ESPHome</a> project. Since then, my weather station has been dutifully collecting data that&rsquo;s been invaluable for augmenting automation that deals with indoor climate.</p>
<p>As the numerous wild fires in California rage on, <a href="https://www.forbes.com/sites/ericmack/2020/08/21/wildfire-smoke-blankets-the-west-as-california-records-worlds-worst-air-quality/" target="_blank" rel="noopener noreffer">the air quality has gone from bad to dangerous</a>. Knowing that outside was warmer, but less humid, was no longer enough to make a smart decision about weather or not to open the windows for some cost-effective cooling. I now need HomeAssistant to be aware of how clean the outside air was before making the decision to pipe in outdoor air.</p>
<p>This post covers two things:</p>
<ul>
<li>A small update to the existing WS3 -&gt; ESPHome -&gt; HomeAssistant bridge code to take advantage of the WS3s&rsquo; support for the ubiquitous <code>PMS5003T</code> sensor.</li>
<li>A simple 3d-printable enclosure for deploying the particulate matter sensor outdoors</li>
</ul>
<p>When deployed, it looks like this:</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        Excuse the awkward camera angle; sensor is deployed in an awkward to photograph location.
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>Please ignore the awkward camera angle as the sensor is deployed in a location where there&rsquo;s not quite enough room for proper camera placement.</p>
<p>And results in graphs that look like this:</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        Smoke particles are between .4Œºm to .7Œºm in size... which explains the elevated red line relative to other particle sizes.
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>A simplified copy of this post appears on <a href="https://www.thingiverse.com/thing:4581351" target="_blank" rel="noopener noreffer">thingiverse</a> and <a href="https://www.prusaprinters.org/prints/39560-outdoor-enclosure-for-pms5003-particulate-matter-s" target="_blank" rel="noopener noreffer">prusaprinters</a>.</p>
<h2 id="the-enclosure">The enclosure</h2>
<p>As of writing, there&rsquo;s <a href="https://www.thingiverse.com/thing:4044492" target="_blank" rel="noopener noreffer">one existing enclosure</a> for the sensor on thingiverse. Unfortunately, the enclosure does not appear to have any design features for mounting to a pole nor does it have any bug-proofing design elements. I took this opportunity to design my own that could be easily mounted, features a slanted &lsquo;roof&rsquo; to prevent standing moisture ingress and could use standard size tobacco pipe filters to keep all but the tiniest of insects/particles out.</p>
<p>The sensor uses a small fan to draw ambient air past an infrared laser. As airborne particles cross the laser beam, they reflect a certain amount of light which can be correlated with the size of the particle. This data can then be turned into fairly accurate counts of how many particles of a given size are in the sampled air. The enclosure is a basic box with two circular air channels pointed downwards to prevent moisture ingress. The intake and exhaust ports are at staggered heights and pointed in opposite directions and to minimize the chance of recirculating the same air.</p>
<p>The lower port is the intake which connects to a few small holes on the front of the sensor and the exhaust port is the raised port which connects directly to the exhaust fan. If you could remove the first few mm from the front, it would look something like this:</p>
<figure >

    
        
    

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>From the side, you can see the two air channels and the few mm of room in the back for wiring. The sensor sits on a &lsquo;pedestal&rsquo; to keep it elevated away from any moisture that may collect on the bottom of the enclosure.</p>
<p>The base plate/pedestal are secured to the &lsquo;body&rsquo; with two M3 screws. I used <code>10mm</code> as that&rsquo;s what I had on hand, but screws between 6-12mm should work as well. The holes are sized for a M3, but any similar sized screw will work. Use a lighter or similar to heat the screw as you drive it into the plastic to create your own threads if using a larger/longer screw.</p>
<p>Besides the &lsquo;pedestal&rsquo; there are a few contact surfaces that hold on to the sensor with a friction fit. The &lsquo;ceiling&rsquo; is a few mm thick and shouldn&rsquo;t permit much moisture ingress but an optional slanted roof component can be printed as an extra precaution.</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        Upper and lower chambers for exhaust and intake.
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>While designing the enclosure, I used this <a href="https://grabcad.com/library/pms5003-2" target="_blank" rel="noopener noreffer"><code>PMS5003</code> model</a> from Leclercq Gregory. &#x1f64f;</p>
<h3 id="printing">Printing</h3>
<p>This is a functional part with only three small surfaces that require reasonably tight precision to properly hold onto the sensor. The <code>SPEED</code> setting with a <code>.2mm</code> layer height and a reasonable 20% infill gave me part that works and feels water tight. The walls and ceiling need to keep water out so dipping below 15% infill or otherwise using settings that wont give solid layer adhesion is not advised. I printed using ABS for durability, but PLA will probably work if you can deploy into a shaded environment.</p>
<p>The shroud and the base are not optional, the triangle shaped block is intended to turn the flat roof of the shroud into a slanted roof so water can&rsquo;t collect. It is optional but shown below.</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        No raft/support when printed in this orientation.
        
            
        
        </p> 
    </figcaption>
    
</figure>


<h2 id="assemble">Assemble</h2>
<p>Briefly:</p>
<ul>
<li>collect materials</li>
<li>press-fit the PM2.5 sensor into the enclosure</li>
<li>make a wire that can interface the PM2.5 sensor to the WS3 board via RJ11</li>
<li>seal everything up</li>
<li>glue on mesh screens and angled roof</li>
<li>plug into WS3</li>
<li>flash ESPHome onto</li>
</ul>
<h3 id="bill-of-materials">Bill of Materials</h3>
<p>More or less everything that is needed for assembly is pictured below.</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        More or less everything needed to assemble.
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>Components:</p>
<ul>
<li>
<p><a href="https://www.aliexpress.com/item/32921725022.html" target="_blank" rel="noopener noreffer">WS3 Weather Station</a> - Essential / Foundational</p>
</li>
<li>
<p><a href="https://rover.ebay.com/rover/1/711-53200-19255-0/1?mpre=https%3A%2F%2Fwww.ebay.com%2Fitm%2FDigital-Universal-Particle-Concentration-Laser-Sensor-PMS5003-PM1-0-PM2-5-PM10%2F254616699639&amp;campid=5338734064&amp;toolid=10001&amp;customid=" target="_blank" rel="noopener noreffer">ST5003T PM2.5 Sensor</a> - Essential / Foundational</p>
</li>
<li>
<p><a href="https://rover.ebay.com/rover/1/711-53200-19255-0/1?mpre=https%3A%2F%2Fwww.ebay.com%2Fitm%2FTTGO-Wemos-MINI-D1-ESP32-WiFi-Bluetooth-Wemos-D1-Mini-ESP8266-ESP-32-Module%2F183413480551&amp;campid=5338734064&amp;toolid=10001&amp;customid=" target="_blank" rel="noopener noreffer">ESP32 Device</a> - A link to the ESP32 based device that I use but any ESP platform with a spare GPIO that can be used as a UART will work.</p>
</li>
<li>
<p><a href="https://rover.ebay.com/rover/1/711-53200-19255-0/1?mpre=https%3A%2F%2Fwww.ebay.com%2Fitm%2F25-Stainless-Steel-Smoking-Pipe-Screens-3-4-19mm-Tobacco-HOOKAH-FILTER-Heavy%2F183969079809&amp;campid=5338734064&amp;toolid=10001&amp;customid=" target="_blank" rel="noopener noreffer">3/4 inch tobacco pipe screens</a> - For bug/critter proofing the enclosure. Strongly suggested for outdoor deployments.</p>
</li>
<li>
<p><a href="https://www.mcmaster.com/91292A113/" target="_blank" rel="noopener noreffer">2x M3 x 10mm screws</a> - Optional. The base can be glued to the shroud or any similar screw will work</p>
</li>
</ul>
<p><strong>Note</strong>: Where possible, I&rsquo;ve used referral links. The links don&rsquo;t raise the price of any item, they simply let the retailer know that I sent you and, in return, I get a small cut of your purchase. If you&rsquo;re not comfortable with that, you can use a URL unwinding service to get the &lsquo;raw&rsquo; product link and drop the attribution/commission part.</p>
<p>General bits:</p>
<ul>
<li>Superglue</li>
<li>Waterproofing caulk/sealant</li>
<li>Drill/Screwdriver</li>
<li>Driver bit for the screws</li>
</ul>
<p>The stepped drill bit in the above picture is not a requirement if you assemble things in the correct oder. The cable egress hole is sized for a &rsquo;typical&rsquo; 3 pair <a href="https://en.wikipedia.org/wiki/Registered_jack#RJ11,_RJ14,_RJ25_wiring" target="_blank" rel="noopener noreffer">RJ11 cable</a> plus a tiny bit of wiggle room. I needed a working cable to test the code while the parts were printing so the hole in the printed base needed to be enlarged slightly to fit the head of the cable.</p>
<h3 id="wiring">Wiring</h3>
<p>There&rsquo;s no ready-made cable out there that&rsquo;ll join the two devices so one must be made. Fortunately, there&rsquo;s only 6 wires to deal with&hellip; 4 of them are distinct.</p>
<p>Sacrifice the cable that comes with the PM2.5 sensor and the RJ11 cable by cutting them in half and solder the correct wires together. The <em>color</em> of the wires that come in both the RJ11 cable and the PM2.5 cable are likely going to differ from the ones I used so I&rsquo;ve left those details out and provided a table showing which pins are to be joined together:</p>
<table>
<thead>
<tr>
<th>Pin #</th>
<th>PM2.5 Sensor Pin</th>
<th>WS3 Pin</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>VCC</td>
<td>5V</td>
</tr>
<tr>
<td>2</td>
<td>GND</td>
<td>GND</td>
</tr>
<tr>
<td>3</td>
<td>SET</td>
<td>ENABLE</td>
</tr>
<tr>
<td>4</td>
<td>RX</td>
<td>RX</td>
</tr>
<tr>
<td>5</td>
<td>TX</td>
<td>GND</td>
</tr>
<tr>
<td>6</td>
<td>RESET</td>
<td>5V</td>
</tr>
<tr>
<td>7</td>
<td>NC</td>
<td></td>
</tr>
<tr>
<td>8</td>
<td>NC</td>
<td></td>
</tr>
</tbody>
</table>
<p>For reference, Pin 1 on both the WS3 and PM2.5 Sensor:</p>
<figure >

    
        
    

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<figure >

    
        
    

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<p>With the wiring done, the sensor just needs to be stuffed into the enclosure. Don&rsquo;t forget to thread the RJ11 cable through the hole in the base plate <em>BEFORE</em> soldering it to the cable for the PM2.5 sensor&hellip; otherwise you&rsquo;ll need that stepped drill bit! üôÉ</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        Sensor has been press-fit into the enclosure and wire fed through the base plate.
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>To finish, secure the base with screws and a bit of water-proofing caulk for good measure:</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        I suggest waiting until the end to glue on the optional roof and waiting until just before that to glue on the optional mesh screens.
        
            
        
        </p> 
    </figcaption>
    
</figure>


<h2 id="the-code">The code</h2>
<p>Setting up and using ESPHome is outside the scope of this post but there are several <a href="https://esphome.io/guides/getting_started_hassio.html" target="_blank" rel="noopener noreffer">good guides</a> out there. Once you have that set up, <a href="https://esphome.io/custom/custom_component.html" target="_blank" rel="noopener noreffer">include</a> the <code>ws3.h</code> file and set up your custom sensor as shown below. A working example and more detail is over on the
<a href="https://github.com/kquinsland/ws3-to-esphome-bridge/" target="_blank" rel="noopener noreffer">github repo</a>.</p>
<p>It&rsquo;ll look like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">uart</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l">uart_bus</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="c"># At this time, ESP does not Transmit anything to the WS3</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">tx_pin</span><span class="p">:</span><span class="w"> </span><span class="l">GPIO16</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">rx_pin</span><span class="p">:</span><span class="w"> </span><span class="l">GPIO17</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">baud_rate</span><span class="p">:</span><span class="w"> </span><span class="m">2400</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">sensor</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l">custom</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">lambda</span><span class="p">:</span><span class="w"> </span><span class="p">|-</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">      auto ws3 = new WS3(id(uart_bus));
</span></span></span><span class="line"><span class="cl"><span class="sd">      App.register_component(ws3);
</span></span></span><span class="line"><span class="cl"><span class="sd">      return {
</span></span></span><span class="line"><span class="cl"><span class="sd">        ws3-&gt;temperature_sensor, 
</span></span></span><span class="line"><span class="cl"><span class="sd">        ws3-&gt;pressure_sensor, 
</span></span></span><span class="line"><span class="cl"><span class="sd">        ws3-&gt;humidity_sensor, 
</span></span></span><span class="line"><span class="cl"><span class="sd">        ws3-&gt;wind_speed_current_sensor,
</span></span></span><span class="line"><span class="cl"><span class="sd">        ws3-&gt;wind_speed_peak_5m_sensor,
</span></span></span><span class="line"><span class="cl"><span class="sd">        ws3-&gt;wind_direction_sensor,
</span></span></span><span class="line"><span class="cl"><span class="sd">        ws3-&gt;rain_fall_1h_sensor, 
</span></span></span><span class="line"><span class="cl"><span class="sd">        ws3-&gt;rain_fall_24h_sensor,
</span></span></span><span class="line"><span class="cl"><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">        ws3-&gt;particles_03um,
</span></span></span><span class="line"><span class="cl"><span class="sd">        ws3-&gt;particles_05um,
</span></span></span><span class="line"><span class="cl"><span class="sd">        ws3-&gt;particles_10um,
</span></span></span><span class="line"><span class="cl"><span class="sd">        ws3-&gt;particles_25um,
</span></span></span><span class="line"><span class="cl"><span class="sd">        ws3-&gt;particles_50um,
</span></span></span><span class="line"><span class="cl"><span class="sd">        ws3-&gt;particles_100um,
</span></span></span><span class="line"><span class="cl"><span class="sd">      };</span><span class="w">      
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>With that, check the logs from your instance of ESPHome and you should see something like this:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[D][ws3:157]: pkt_read_ok!
</span></span><span class="line"><span class="cl">[D][WS3:410]: VALID! Packet: [c000s000g000t093r000p000h35b09880,050,080,088,502,056,065,*18
</span></span><span class="line"><span class="cl">], Checksum: [18] chksum: [18]
</span></span><span class="line"><span class="cl">[E][WS3:342]: Validating: [c000s000g000t093r000p000h35b09880,050,080,088,502,056,065]
</span></span></code></pre></td></tr></table>
</div>
</div><p>indicating that the WS3 has detected the PM2.5 sensor and is reporting it&rsquo;s readings in addition to the temperature/wind data. Then just check your HomeAssistant install for the data.</p>
<h2 id="files">Files</h2>
<p>For archive / posterity, all source files are included here. All files are licensed as <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener noreffer">Creative Commons Attribution-NonCommercial-ShareAlike</a> (CC BY-NC-SA).</p>
<ul>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/ws3-weather-station-pm25-sensor/images/02.assemble.jpg">
                    
                </a>
                
                <figcaption>
                    <small>Sensor has been press-fit into the enclosure and wire fed through the base plate.</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/ws3-weather-station-pm25-sensor/images/03.glue.jpg">
                    
                </a>
                
                <figcaption>
                    <small>I suggest waiting until the end to glue on the optional roof and waiting until just before that to glue on the optional mesh screens.</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/ws3-weather-station-pm25-sensor/images/example_dashboard.jpg">
                    
                </a>
                
                <figcaption>
                    <small>Smoke particles are between .4Œºm to .7Œºm in size... which explains the elevated red line relative to other particle sizes.</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/ws3-weather-station-pm25-sensor/images/04.installed.jpg">
                    
                </a>
                
                <figcaption>
                    <small>Excuse the awkward camera angle; sensor is deployed in an awkward to photograph location.</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/ws3-weather-station-pm25-sensor/models/BASE.step">
                <i class="far fa-file-code"></i>
                models/BASE.step:
                
                <small style="font-family:'Lucida Console', monospace">step</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/ws3-weather-station-pm25-sensor/models/BODY.step">
                <i class="far fa-file-code"></i>
                models/BODY.step:
                
                <small style="font-family:'Lucida Console', monospace">step</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/ws3-weather-station-pm25-sensor/models/LID.step">
                <i class="far fa-file-code"></i>
                models/LID.step:
                
                <small style="font-family:'Lucida Console', monospace">step</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/ws3-weather-station-pm25-sensor/models/base.stl">
                <i class="far fa-file-code"></i>
                models/base.stl:
                
                <small style="font-family:'Lucida Console', monospace">stl</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/ws3-weather-station-pm25-sensor/models/body.stl">
                <i class="far fa-file-code"></i>
                models/body.stl:
                
                <small style="font-family:'Lucida Console', monospace">stl</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/ws3-weather-station-pm25-sensor/models/combined.3mf">
                <i class="far fa-file-archive"></i>
                models/combined.3mf:
                
                <small style="font-family:'Lucida Console', monospace">3mf</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/ws3-weather-station-pm25-sensor/models/lid.stl">
                <i class="far fa-file-code"></i>
                models/lid.stl:
                
                <small style="font-family:'Lucida Console', monospace">stl</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/ws3-weather-station-pm25-sensor/images/pin_out/PM2.5_Pins.jpg">
                    
                </a>
                
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/ws3-weather-station-pm25-sensor/images/pin_out/WS3_Pins.jpg">
                    
                </a>
                
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/ws3-weather-station-pm25-sensor/images/01.collect.jpg">
                    
                </a>
                
                <figcaption>
                    <small>More or less everything needed to assemble.</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/ws3-weather-station-pm25-sensor/images/suggested_print_orientation.jpg">
                    
                </a>
                
                <figcaption>
                    <small>No raft/support when printed in this orientation.</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/ws3-weather-station-pm25-sensor/images/f360_air_channels.jpg">
                    
                </a>
                
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/ws3-weather-station-pm25-sensor/images/f360_side_profile.jpg">
                    
                </a>
                
                <figcaption>
                    <small>Upper and lower chambers for exhaust and intake.</small>
                </figcaption>
                
            </figure>

        
    </li>
    
</ul>

]]></description></item><item><title>home lab: simple printable cable org</title><link>https://karlquinsland.com/home-lab-simple-printable-cable-org/</link><pubDate>Sat, 18 Jul 2020 00:00:00 +0000</pubDate><author>Author</author><guid>https://karlquinsland.com/home-lab-simple-printable-cable-org/</guid><description><![CDATA[<p>Quick / another &ldquo;i made a thing!&rdquo; post.</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        Picture showing designed parts deployed as intended (please ignore the lingering dust! üí®)
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>I needed some horizontal / vertical cable rings for cat5 and power cables. I would have used the excellent <a href="https://www.thingiverse.com/thing:3315960" target="_blank" rel="noopener noreffer">1U Rackmount Cable Management Rings</a> by <a href="https://www.thingiverse.com/boulwarek/about" target="_blank" rel="noopener noreffer">boulwarek</a> except the hole spacing didn&rsquo;t work for my application. I needed cable rings for the &lsquo;front-to-back&rsquo; braces which have distinct dimensions:</p>
<ul>
<li>holes needed to be spaced <code>10.85mm</code> apart</li>
<li>distance between center of screw is <code>20.0mm</code></li>
</ul>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        Screenshot from Fusion360 showing dimensions between screw holes
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>I made the rings slightly smaller as the horizontal / vertical runs I needed rings for do not carry more than a few cables.</p>
<p>A similar copy of this post is on <a href="https://www.thingiverse.com/thing:4546078" target="_blank" rel="noopener noreffer">thingiverse</a> and <a href="https://www.prusaprinters.org/prints/36851-server-rack-cable-org" target="_blank" rel="noopener noreffer">prusaprinters</a> page.</p>
<h2 id="printing">Printing</h2>
<p>Theses are &lsquo;function&rsquo; parts, so the cheapest material and fastest settings work. No support material needed and minimal bridging with the suggested print orientation shown below.</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        Screenshot showing suggested print bed arrangement
        
            
        
        </p> 
    </figcaption>
    
</figure>


<h2 id="files">Files</h2>
<p>For archive / posterity, all source files are included here. All files are licensed as <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener noreffer">Creative Commons Attribution-NonCommercial-ShareAlike</a> (CC BY-NC-SA).</p>
<ul>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/home-lab-simple-printable-cable-org/images/hole-dimensions.jpg">
                    
                </a>
                
                <figcaption>
                    <small>Screenshot from Fusion360 showing dimensions between screw holes</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/home-lab-simple-printable-cable-org/images/horizontal-model.jpg">
                    
                </a>
                
                <figcaption>
                    <small>Picture showing the CAD model for horizontal variant</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/home-lab-simple-printable-cable-org/images/installed.jpg">
                    
                </a>
                
                <figcaption>
                    <small>Picture showing designed parts deployed as intended (please ignore the lingering dust! üí®)</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/home-lab-simple-printable-cable-org/models/combined.3mf">
                <i class="far fa-file-archive"></i>
                models/combined.3mf:
                
                <small style="font-family:'Lucida Console', monospace">3mf</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/home-lab-simple-printable-cable-org/models/horizontal.f3d">
                <i class="far fa-file-"></i>
                models/horizontal.f3d:
                
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/home-lab-simple-printable-cable-org/models/horizontal.stl">
                <i class="far fa-file-code"></i>
                Horizontal STL:
                
                <small style="font-family:'Lucida Console', monospace">stl</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/home-lab-simple-printable-cable-org/models/vertical.f3d">
                <i class="far fa-file-"></i>
                models/vertical.f3d:
                
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/home-lab-simple-printable-cable-org/models/vertical.stl">
                <i class="far fa-file-code"></i>
                Vertical STL:
                
                <small style="font-family:'Lucida Console', monospace">stl</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/home-lab-simple-printable-cable-org/images/suggested_print_orientation.jpg">
                    
                </a>
                
                <figcaption>
                    <small>Screenshot showing suggested print bed arrangement</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/home-lab-simple-printable-cable-org/images/vertical-model.jpg">
                    
                </a>
                
                <figcaption>
                    <small>Picture showing the CAD model for vertical variant</small>
                </figcaption>
                
            </figure>

        
    </li>
    
</ul>

]]></description></item><item><title>electronics lab: enhanced psu</title><link>https://karlquinsland.com/electronics-lab-enhanced-bench-psu/</link><pubDate>Thu, 09 Jul 2020 00:00:00 +0000</pubDate><author>Author</author><guid>https://karlquinsland.com/electronics-lab-enhanced-bench-psu/</guid><description><![CDATA[<p>While doing the PoE related testing for <a href="https://karlquinsland.com/poe-at-a-distance-ruined-my-cat5-speeds/" rel="">this</a> incident, it occurred to me that I never got around to sharing the files for a small modification to the popular RD6006 PSU.</p>
<p>While drafting this post, I discovered that there appears to be a newer version of the RD6006: the 6012. As far as I can tell, they&rsquo;re in the same &lsquo;family&rsquo; and have the same dimensions so the CAD and related model files below <em>should</em> work w/ the RD6012 just as they do w/ the 6006, but i can only &lsquo;guarantee&rsquo; that the CAD and related model files below will work with the <a href="https://hackaday.com/tag/riden-rd6006/" target="_blank" rel="noopener noreffer">RD6006</a>.</p>
<p>A version of this post appears on <a href="https://www.prusaprinters.org/prints/36338-poe-and-qc30-adapter-for-rd6006-psu" target="_blank" rel="noopener noreffer">prusaprinters</a> and <a href="https://www.thingiverse.com/thing:4536551" target="_blank" rel="noopener noreffer">thingiverse</a></p>
<h2 id="what">What</h2>
<p>A small enclosure for a PoE injector and QC 3.0 charger designed to sit on top of the RD6012 PSU &lsquo;kit&rsquo; sold all over aliexpress and banggood.</p>
<p>Assembled, it looks like this:</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        As seen on AliExpress
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>The RD6006 is incredibly versatile, but can only supply power for about 85% of the devices that make their way onto my &lsquo;healing&rsquo; bench. I wasn&rsquo;t keen on taking up more valuable space with a device dedicated to PoE injection so finding a way to mod one into the PSU seemed like a good idea. Similarly, adding a versatile USB port seemed like a no-brainer as my <a href="http://www.miniware.com.cn/product/ts80-soldering-iron-more/" target="_blank" rel="noopener noreffer">favorite soldering iron</a> is powered via QuickCharge 3.</p>
<p>Three useful bench tools, one footprint, one consumed power outlet. What&rsquo;s not to love?</p>
<h2 id="printing">Printing:</h2>
<p>There are two components for this build:</p>
<ul>
<li>the &lsquo;plate&rsquo; which rests on the top of the PSU case and has small &lsquo;fences&rsquo; to fix the circuit boards in place. It&rsquo;s the &lsquo;salmon&rsquo; colored component</li>
<li>the &rsquo;lid&rsquo; is the (mostly) transparent yellow component which holds the auxiliary power supplies (pink components) in place and keeps all voltages away from people.</li>
</ul>
<figure >

    
        
    

    

    <figcaption>
        
            <h4>Colorized Components</h4>
        
        <p>
        Relevant components, colored in F360
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>I used black PETG, but any material and at least 10% infill should be fine. Tune the layer height to taste.</p>
<p>The &lsquo;plate&rsquo; does not need any supports nor does the lid if printed in the suggested print orientation shown below &#x1f447;. I printed with settings optimized for speed so there was minimal sagging, but nothing substantial. What little there was didn&rsquo;t interfere with clearance of any other internal component and was completely hidden.</p>
<p>If you&rsquo;re not comfortable with bridging long distances, you can optionally enforce support material from the build plate to the top of the lid <strong>or</strong> flip the lid upside down and use supports for the four feet where the screws go. Because any sagging would be hidden inside,</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        suggested print orientation
        
            
        
        </p> 
    </figcaption>
    
</figure>


<h2 id="components">Components</h2>
<p>In addition to the miscellaneous wire and crimp connectors, there are two components used in this design:</p>
<ul>
<li><a href="https://www.aliexpress.com/item/33019891423.html" target="_blank" rel="noopener noreffer">PoE injector</a></li>
<li><a href="https://www.amazon.com/gp/product/B07Y9HP4KM/" target="_blank" rel="noopener noreffer">QC 3.0 Charger</a></li>
</ul>
<h2 id="assembly">Assembly</h2>
<p>I don&rsquo;t have any pictures from the assembly &#x1f61e;, but it&rsquo;s not particularly difficult to figure out from the attached pictures. In general, the steps to take are:</p>
<ol start="0">
<li>Print everything and clean up the parts as needed</li>
<li>de-shell the PoE injector and QC3 charger. A plastic pry-tool or a few flat-head screwdrivers will help here!</li>
<li>desolder the existing mains connections from both modules and solder on new ones. The new ones don&rsquo;t need to be long, just a bit longer than the leads that came on the module PCBs!</li>
<li>disconnect power from the assembled PSU and remove the case cover</li>
<li>place the &lsquo;plate&rsquo; onto the top of the PSU and use a pencil to mark all 5 holes on the cover</li>
<li>remove the plate, drill out all 5 holes and use a file to smooth down any sharp edges on the big hole as that&rsquo;s where the mains wires will go. A burr poking through insulation means the case may become energized @ mains voltages! &#x1f4a5; &#x1f480;</li>
<li>crimp connectors onto wires and attach to the mains supply <strong>after</strong> the switch and fuse!</li>
<li>place the &lsquo;plate&rsquo; back onto the PSU cover</li>
<li>run the wires through the new hole in the top of the PSU case and through the hole in the &lsquo;plate&rsquo;</li>
<li>add the PoE injector and QC3 module to the plate</li>
<li>join the mains leads to the module leads. I used <a href="https://www.amazon.com/Wago-221-413-LEVER-NUTS-Conductor-Connectors/dp/B06XGYXVXR/" target="_blank" rel="noopener noreffer">Wago</a> connectors, but simple wirenuts or a screw terminal block will work.</li>
<li>Use M3 screws to secure the lid to the plate and the PSU. I intentionally drilled the holes slightly too small so the screws would thread against the case. Not ideal, but works absolutely fine for something that&rsquo;s not load-bearing or going to be repeatedly re-screwed.</li>
<li>re-connect the IEC power connector and power on</li>
<li>monitor for sounds and smells that indicate you screwed up. begin testing PoE and USB port for proper power.</li>
</ol>
<p>Just prior to seating the &rsquo;lid&rsquo; you should have something like this:</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        components seated and wired
        
            
        
        </p> 
    </figcaption>
    
</figure>


<p>When all said and done, you&rsquo;ll get this:</p>
<figure >

    
        
    

    

    <figcaption>
        
        <p>
        everything assembled and powered up
        
            
        
        </p> 
    </figcaption>
    
</figure>


<h2 id="files">Files</h2>
<p>The f360 file is&hellip; a mess. I&rsquo;m not going to share it here. Contact me if you really want it. The <code>stl</code> and <code>3mf</code> files are below, though. As you can tell from the initials and date, this project was &lsquo;completed&rsquo; awhile ago.</p>
<p>For archive / posterity, all source files are included here. All files are licensed as <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener noreffer">Creative Commons Attribution-NonCommercial-ShareAlike</a> (CC BY-NC-SA).</p>
<ul>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/electronics-lab-enhanced-bench-psu/images/modded-assembled.jpg">
                    
                </a>
                
                <figcaption>
                    <small>everything assembled and powered up</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/electronics-lab-enhanced-bench-psu/images/plate_and_lid.jpg">
                    
                </a>
                
                <figcaption>
                    <small>Relevant components, colored in F360</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/electronics-lab-enhanced-bench-psu/models/combined.3mf">
                <i class="far fa-file-archive"></i>
                models/combined.3mf:
                
                <small style="font-family:'Lucida Console', monospace">3mf</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/electronics-lab-enhanced-bench-psu/models/lid.stl">
                <i class="far fa-file-code"></i>
                models/lid.stl:
                
                <small style="font-family:'Lucida Console', monospace">stl</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/electronics-lab-enhanced-bench-psu/models/plate.stl">
                <i class="far fa-file-code"></i>
                models/plate.stl:
                
                <small style="font-family:'Lucida Console', monospace">stl</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/electronics-lab-enhanced-bench-psu/images/cover-and-screws-off.jpg">
                    
                </a>
                
                <figcaption>
                    <small>components seated and wired</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/electronics-lab-enhanced-bench-psu/images/print_orientation.jpg">
                    
                </a>
                
                <figcaption>
                    <small>suggested print orientation</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/electronics-lab-enhanced-bench-psu/images/rd6012-assembled.jpg">
                    
                </a>
                
                <figcaption>
                    <small>As seen on AliExpress</small>
                </figcaption>
                
            </figure>

        
    </li>
    
</ul>

]]></description></item><item><title>home lab: mini 'universal' patch panel</title><link>https://karlquinsland.com/home-lab-keystone-bracket/</link><pubDate>Sun, 05 Jul 2020 00:00:00 +0000</pubDate><author>Author</author><guid>https://karlquinsland.com/home-lab-keystone-bracket/</guid><description><![CDATA[<p>This is another brief &ldquo;i made a thing!&rdquo; posts.</p>
<h2 id="version-2">Version 2</h2>
<p><strong>Update 2020-12-12:</strong> I outgrew version 1! I needed a few more ports and didn&rsquo;t have much time&hellip; so I just scaled the part up to double the number of jacks. The links below and the thingiverse and prusaprinters links have been updated w/ the new STL files. Printing and attachment works exactly the same as with the 1x8 version. Rather than include the Fusion360 source, I have included a standard STEP file.</p>
<figure >

    
        
    

    

    <figcaption>
        
        
    </figcaption>
    
</figure>


<figure >

    
        
    

    

    <figcaption>
        
        <p>
        Yes, I do need to re-do the cable runs; they&#39;re a mess
        
            
        
        </p> 
    </figcaption>
    
</figure>


<h2 id="what">What</h2>
<p>Taking the side / rear of my rack off every time I needed to change which host(s) were connected to the monitor was starting to get old. Only recently did I realize that you can fit more than just RJ45 jacks in a <a href="https://en.wikipedia.org/wiki/Keystone_module" target="_blank" rel="noopener noreffer">Keystone Jack</a>. A few measurements, a quick search through thingiverse and some CAD time later, this is the result.</p>
<p>The model is tailored to my specific rack, but should be easily adoptable to any other dimensions. Import the Fusion360 model and then edit the first sketch in the timeline as needed and adjust the <code>pattern on line</code> step to adjust the number of keystone jacks.</p>
<p>Of course, you can always just glue the print to whichever surface you need it mounted on as there&rsquo;s plenty of broad/flat surface for adhesive if the two built-in screw holes won&rsquo;t work!</p>
<p>As is, the model has:</p>
<ul>
<li>8 jacks</li>
<li><code>178.5mm</code> from &rsquo;edge&rsquo; to &rsquo;edge&rsquo; between the two screw holes</li>
<li><code>6.5mm</code> diameter for the holes as my rack uses M6 screws.</li>
</ul>
<p>Note: After printing the model you see in the pictures below, I added a small cutout which should make it easier to depress the clip on the &lsquo;male&rsquo; end of a keystone device from the &lsquo;user facing&rsquo; side as you&rsquo;d typically find on a proper patch panel</p>
<p>All in all, I&rsquo;m quite happy with how it turned out: 8 jacks is more than enough for current and (projected!) future use. The only obvious improvement would be moving the numbers from the bottom to the top where there&rsquo;s more room. As it is now, the perimeters around the numbers look a bit weird as they merge w/ the bottom edge that are flush w/ the rack and the top edges that are flush w/ the jacks.</p>
<p>Many thanks to <a href="https://www.thingiverse.com/belfers/about" target="_blank" rel="noopener noreffer"><code>belfers</code></a> for the <a href="https://www.thingiverse.com/thing:3150524" target="_blank" rel="noopener noreffer">Keystone model</a>.</p>
<p>The details are on the <a href="https://www.thingiverse.com/thing:4536257" target="_blank" rel="noopener noreffer">thingiverse</a> and <a href="https://www.prusaprinters.org/prints/36325-8-port-keystone-patch-panel" target="_blank" rel="noopener noreffer">prusaprinters</a> page.</p>
<h2 id="printing">Printing:</h2>
<p>Any material and at least 10% infill should be fine.
No supports if you use the suggested print orientation shown in picture below.
Tolerances on the jacks are somewhat tight so printing at a more accurate setting is probably going to be a good idea.</p>
<h2 id="files">Files</h2>
<p>For archive / posterity, all source files are included here. All files are licensed as <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener noreffer">Creative Commons Attribution-NonCommercial-ShareAlike</a> (CC BY-NC-SA).</p>
<ul>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/home-lab-keystone-bracket/images/rear-installed.jpg">
                    
                </a>
                
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/home-lab-keystone-bracket/images/front-installed.jpg">
                    
                </a>
                
                
            </figure>

        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/home-lab-keystone-bracket/models/v1_keystone-bracket.3mf">
                <i class="far fa-file-archive"></i>
                models/v1_keystone-bracket.3mf:
                
                <small style="font-family:'Lucida Console', monospace">3mf</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/home-lab-keystone-bracket/models/v1_keystone-bracket.f3z">
                <i class="far fa-file-archive"></i>
                models/v1_keystone-bracket.f3z:
                
                <small style="font-family:'Lucida Console', monospace">f3z</small> <small>file</small>
                
                
                <br>
                <small>Fusion360 Archive</small>
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/home-lab-keystone-bracket/models/v1_keystone-bracket.stl">
                <i class="far fa-file-code"></i>
                models/v1_keystone-bracket.stl:
                
                <small style="font-family:'Lucida Console', monospace">stl</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/home-lab-keystone-bracket/models/v2.3mf">
                <i class="far fa-file-archive"></i>
                models/v2.3mf:
                
                <small style="font-family:'Lucida Console', monospace">3mf</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/home-lab-keystone-bracket/models/v2.step">
                <i class="far fa-file-archive"></i>
                models/v2.step:
                
                <small style="font-family:'Lucida Console', monospace">step</small> <small>file</small>
                
                
                <br>
                <small>STEP file</small>
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/home-lab-keystone-bracket/models/v2.stl">
                <i class="far fa-file-code"></i>
                models/v2.stl:
                
                <small style="font-family:'Lucida Console', monospace">stl</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/home-lab-keystone-bracket/images/print_orientation.jpg">
                    
                </a>
                
                <figcaption>
                    <small>Suggested print orientation</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/home-lab-keystone-bracket/images/v2_installed_front.jpg">
                    
                </a>
                
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/home-lab-keystone-bracket/images/v2_installed_rear.jpg">
                    
                </a>
                
                <figcaption>
                    <small>Yes, I do need to re-do the cable runs; they&#39;re a mess</small>
                </figcaption>
                
            </figure>

        
    </li>
    
</ul>

]]></description></item><item><title>home lab: consolidating multiple PSUs</title><link>https://karlquinsland.com/home-lab-consolidated-psu/</link><pubDate>Sat, 27 Jun 2020 00:00:00 +0000</pubDate><author>Author</author><guid>https://karlquinsland.com/home-lab-consolidated-psu/</guid><description><![CDATA[<p>A while back, I traded writing salt states and managing systemd <code>.service</code> files wrapping <code>podman</code> for the <a href="https://www.youtube.com/watch?v=9wvEwPLcLcA" target="_blank" rel="noopener noreffer">&lsquo;simplicity&rsquo;</a> of running kubernetes in my home lab. Jury is still out on weather or not the switch was worth it.</p>
<p>The cluster is a hodgepodge of second hand Intel NUCs and other scavenged compute hardware i&rsquo;ve collected over the past few years. Some of it runs on 12v, some of it on 19v. For each node, there&rsquo;s a dedicated switch mode power supply. Each supply takes up an outlet and brings a bit of cable mgmt related clutter. The solution is consolidation.</p>
<p>So thats how this project came to be.</p>
<h2 id="what">What</h2>
<p>A set of 3d printable parts to compactly combine two LRS-350 PSUs into a compact unit with optional voltage and current displays.</p>
<p>The details are on the <a href="https://www.thingiverse.com/thing:4504948" target="_blank" rel="noopener noreffer">thingiverse</a> and <a href="https://www.prusaprinters.org/prints/35514-dual-mean-well-lrs-350-psu" target="_blank" rel="noopener noreffer">prusaprinters</a> page.</p>
<h2 id="files">Files</h2>
<p>For archive / posterity, all source files are included here. All files are licensed as <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener noreffer">Creative Commons Attribution-NonCommercial-ShareAlike</a> (CC BY-NC-SA).</p>
<ul>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/home-lab-consolidated-psu/images/built.jpg">
                    
                </a>
                
                <figcaption>
                    <small>Fully Assembled; ignore the messy workbench</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/home-lab-consolidated-psu/images/cad-back.jpg">
                    
                </a>
                
                <figcaption>
                    <small>component view, from rear</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/home-lab-consolidated-psu/images/cad-front.jpg">
                    
                </a>
                
                <figcaption>
                    <small>component view, from front</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/home-lab-consolidated-psu/images/core.jpg">
                    
                </a>
                
                <figcaption>
                    <small>Print Bed arrangement, green is support structures</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/home-lab-consolidated-psu/images/meter-panel.jpg">
                    
                </a>
                
                <figcaption>
                    <small>meter panel print orientation</small>
                </figcaption>
                
            </figure>

        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/home-lab-consolidated-psu/models/2x-lrs-psu.f3z">
                <i class="far fa-file-archive"></i>
                Consolidated PSU CAD:
                
                <small style="font-family:'Lucida Console', monospace">f3z</small> <small>file</small>
                
                
                <br>
                <small>Fusion360 Archive</small>
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/home-lab-consolidated-psu/models/box.stl">
                <i class="far fa-file-code"></i>
                Box:
                
                <small style="font-family:'Lucida Console', monospace">stl</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/home-lab-consolidated-psu/models/brace.stl">
                <i class="far fa-file-code"></i>
                Brace:
                
                <small style="font-family:'Lucida Console', monospace">stl</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/home-lab-consolidated-psu/models/core.3mf">
                <i class="far fa-file-archive"></i>
                Core Components:
                
                <small style="font-family:'Lucida Console', monospace">3mf</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/home-lab-consolidated-psu/models/lid.stl">
                <i class="far fa-file-code"></i>
                Lid:
                
                <small style="font-family:'Lucida Console', monospace">stl</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/home-lab-consolidated-psu/models/meter-panel.3mf">
                <i class="far fa-file-archive"></i>
                (Optional) Meter Panel:
                
                <small style="font-family:'Lucida Console', monospace">3mf</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        
            <a target="_blank" href="https://karlquinsland.com/home-lab-consolidated-psu/models/meter-panel.stl">
                <i class="far fa-file-code"></i>
                (Optional) Meter Panel:
                
                <small style="font-family:'Lucida Console', monospace">stl</small> <small>file</small>
                
                
            </a>
        
    </li>
    
    <li>
        

            
            
        
            <figure>
                <a target="_blank" href="https://karlquinsland.com/home-lab-consolidated-psu/images/meter-panel-slice.jpg">
                    
                </a>
                
                <figcaption>
                    <small>using slic3r too remove the second meter cutout</small>
                </figcaption>
                
            </figure>

        
    </li>
    
</ul>

]]></description></item></channel></rss>